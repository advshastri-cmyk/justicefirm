<!-- === START PART 1/3 === -->
<!doctype html>
<html lang="en-IN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1, shrink-to-fit=no" />
  <title>The Justice Firm — Advocates & Legal Consultants (India)</title>
  <meta name="description" content="The Justice Firm — Family, Criminal & Civil law; Mediation. Based in Allahabad (Prayagraj), Uttar Pradesh." />
  <meta name="author" content="The Justice Firm">
  <link rel="canonical" href="https://justicefirms.com/">
  <meta name="robots" content="index,follow">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Merriweather:ital,wght@0,400;0,700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#f5f7fb;--card:#ffffff;--ink:#0f1724;--muted:#6b7280;--accent:#0b5cff;--gold:#d4af37;
      --radius:14px;--container:1100px;--easing:cubic-bezier(.16,.84,.32,1);
      --shadow-1: 0 6px 30px rgba(12,18,35,0.06);
      --shadow-2: 0 14px 40px rgba(12,18,35,0.04);
      --success:#1f7a3a;--danger:#b42318;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto; -webkit-font-smoothing:antialiased;line-height:1.45}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--container);margin:0 auto;padding:20px}
    .skip-link{position:fixed;left:8px;top:8px;background:#000;color:#fff;padding:8px 10px;border-radius:6px;z-index:2000;transform:translateY(-200%);transition:transform .2s}
    .skip-link:focus{transform:translateY(0%)}

    .nav{display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,0.9);backdrop-filter:blur(6px);padding:14px;border-radius:12px;box-shadow:var(--shadow-1);margin:18px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:46px;height:46px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#2e6df6);display:grid;place-items:center;color:#fff;font-weight:700;font-size:1.1rem;transition:transform 420ms var(--easing)}
    .brand:hover .logo{transform:scale(1.05) rotate(-6deg)}
    .brand-name{font-family:Merriweather,serif;font-size:1.1rem;font-weight:700;margin:0}
    .nav-links{display:flex;gap:16px;align-items:center}
    .nav-links a{color:var(--muted);font-weight:600;padding:8px 10px;border-radius:8px}
    .nav-links a.cta{background:var(--accent);color:#fff}
    .nav-toggle{display:none;border:0;font-size:22px;background:none;color:var(--ink)}
    #clock{color:var(--gold);font-weight:700;font-size:.95rem}

    .hero{display:grid;grid-template-columns:1fr 380px;gap:28px;align-items:center;margin:18px;margin-top:6px;position:relative}
    .hero-card{background:var(--card);padding:34px;border-radius:16px;box-shadow:0 24px 80px rgba(12,18,35,0.06);position:relative;z-index:1}
    .eyebrow{background:linear-gradient(90deg,var(--accent),#2e6df6);color:#fff;padding:6px 12px;border-radius:999px;font-size:.82rem;font-weight:700;display:inline-block}
    .headline{font-family:Merriweather,serif;font-size:28px;margin:14px 0}
    .lead{color:var(--muted);margin-bottom:20px}
    .hero-cta{display:flex;gap:12px;flex-wrap:wrap}

    .panel{background:var(--card);padding:18px;border-radius:12px;box-shadow:var(--shadow-2);z-index:1}
    #clock-nav{font-weight:700;color:var(--gold);font-size:.95rem;text-align:right}
    #calendar-section{background:linear-gradient(180deg,#fff,#fbfdff);border-radius:10px;padding:12px;margin-top:12px;box-shadow:0 12px 36px rgba(12,18,35,0.04)}
    #calendar{width:100%;overflow-x:auto}
    #calendar table{width:100%;border-collapse:collapse;font-size:.95rem}
    #calendar th,#calendar td{padding:8px;text-align:center;border-radius:6px}
    #calendar th{color:var(--muted);font-weight:700;font-size:.9rem}
    #calendar td{height:40px}
    #calendar td.today{background:var(--gold);color:#000;font-weight:700;border-radius:50%}

    section{margin:36px 18px}
    h2{font-family:Merriweather,serif;font-size:1.25rem;margin:0 0 10px;position:relative}
    h2::after{content:"";display:block;width:48px;height:4px;background:var(--gold);border-radius:4px;margin-top:8px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:var(--shadow-2);transition:transform 320ms var(--easing),box-shadow 320ms var(--easing)}
    .card:hover{transform:translateY(-8px);box-shadow:0 28px 70px rgba(12,18,35,0.10)}
    .member{background:var(--card);border-radius:12px;box-shadow:var(--shadow-2);overflow:hidden;transition:transform 320ms var(--easing)}
    .member img.photo{height:260px;width:100%;object-fit:cover;border-radius:6px}
    .member:hover img.photo{transform:scale(1.04)}
    .member .bio{padding:14px}

    .pay-grid{display:grid;grid-template-columns:1fr 1fr;gap:18px}
    .pay-box{background:var(--card);padding:18px;text-align:center;border-radius:12px;box-shadow:var(--shadow-2)}
    .pay-box img{width:140px;height:140px;border-radius:10px;border:2px solid var(--gold);object-fit:cover}

    form input,form textarea,form select{width:100%;padding:10px;border-radius:10px;border:1px solid #d8dce3;font-size:1rem;font-family:Inter}
    label{font-size:.9rem;color:var(--muted);display:block;margin-bottom:6px}

    /* inline message box */
    .form-message{margin-top:12px;padding:12px;border-radius:10px;font-weight:600;display:none}
    .form-message.success{background:rgba(31,122,58,0.12);color:var(--success);display:block;border:1px solid rgba(31,122,58,0.18)}
    .form-message.error{background:rgba(180,35,24,0.08);color:var(--danger);display:block;border:1px solid rgba(180,35,24,0.12)}

    footer{background:linear-gradient(180deg,#02102a,#041733);padding:22px;border-radius:14px;margin:28px 18px;margin-bottom:40px;color:#fff;display:flex;justify-content:space-between;align-items:center;gap:12px}
    footer a{color:var(--gold)}

    .btn{background:var(--accent);color:#fff;border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700;transition:transform 220ms var(--easing),box-shadow 220ms var(--easing)}
    .btn:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(11,92,255,0.12)}
    .btn:active{transform:translateY(1px) scale(.99)}
    .btn.ghost{background:#fff;color:var(--ink);border:1px solid #e0e6f0}
    .btn.primary-shine{position:relative;overflow:hidden}
    .btn.primary-shine::after{content:"";position:absolute;inset:0;left:-60%;width:60%;background:linear-gradient(120deg,rgba(255,255,255,0.10),rgba(255,255,255,0.25),rgba(255,255,255,0.10));transform:skewX(-18deg);transition:left 650ms var(--easing);border-radius:10px}
    .btn.primary-shine:hover::after{left:120%}
    a:focus,button:focus,input:focus,textarea:focus,select:focus{outline:3px solid rgba(11,92,255,0.12);outline-offset:3px;border-radius:8px}

    [data-reveal]{opacity:0;transform:translateY(10px);transition:opacity 520ms var(--easing),transform 520ms var(--easing)}
    [data-reveal].is-revealed{opacity:1;transform:none}

    #calendar th,#calendar td{padding:6px}
    #calendar td{min-width:28px}

    .muted{color:var(--muted)}

    @media(max-width:1024px){.hero{grid-template-columns:1fr 320px}.panel{padding:14px}}
    @media(max-width:720px){.nav-links{display:none}.nav-toggle{display:block}.nav-links.is-open{display:flex;flex-direction:column;position:absolute;top:calc(100% + 8px);right:18px;background:var(--card);padding:12px;border-radius:10px;box-shadow:var(--shadow-2);min-width:200px}.hero{grid-template-columns:1fr;gap:14px}.pay-grid{grid-template-columns:1fr}section{margin:26px 12px}footer{flex-direction:column;align-items:flex-start}.member img.photo{height:220px}}
    @media (prefers-reduced-motion: reduce){*,*::before,*::after{transition:none!important;animation:none!important;scroll-behavior:auto!important}}
  </style>
</head>

<body>
  <a class="skip-link" href="#main-content">Skip to content</a>

  <div class="wrap">
    <header class="nav" role="banner">
      <div class="brand">
        <div class="logo" aria-hidden="true">TJ</div>
        <div>
          <div class="brand-name">The Justice Firm</div>
          <div class="muted" style="font-size:.85rem">Advocates & Legal Consultants (India)</div>
        </div>
      </div>

      <nav id="main-nav" class="nav-links" role="navigation" aria-label="Main">
        <a href="#practice">Practice</a>
        <a href="#about">About</a>
        <a href="#team">Team</a>
        <a href="#articles">Articles</a>
        <a href="#payment">Payment</a>
        <a href="contact.html" class="cta">Contact</a>
        <span id="clock" aria-live="polite" style="margin-left:8px"></span>
      </nav>

      <button class="nav-toggle" id="navToggle" aria-expanded="false" aria-controls="main-nav" aria-label="Open menu">☰</button>
    </header>

    <main id="main-content" tabindex="-1">
      <section class="hero" data-reveal>
        <div class="hero-card" data-reveal>
          <span class="eyebrow">Trusted in Indian Courts</span>
          <h1 class="headline">Practical counsel for Family, Criminal & Civil disputes.</h1>
          <p class="lead">Confidential, strategic and results-focused representation across Allahabad and Uttar Pradesh.</p>
          <div class="hero-cta">
            <a class="btn primary-shine" href="contact.html">Book Consultation</a>
            <a class="btn ghost" href="#practice">Explore Practice</a>
          </div>
          <p class="muted" style="margin-top:12px;font-size:.92rem"><strong>+91 94541 83793</strong> · <a href="mailto:adv.shastri@gmail.com">adv.shastri@gmail.com</a></p>
        </div>

        <aside class="panel" data-reveal aria-labelledby="nextSlotLabel">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
            <div>
              <h4 id="nextSlotLabel" style="margin:0">Next Available Slot</h4>
              <div class="muted" id="nextSlot" style="margin-top:6px">Loading…</div>
            </div>
            <div id="clock-nav">--:--:-- IST</div>
          </div>

          <div style="margin-top:12px;display:flex;gap:8px">
            <button class="btn" id="requestSlotBtn" type="button">Request Slot</button>
            <a class="btn ghost" href="#contact">Contact</a>
          </div>

          <div id="calendar-section" aria-label="Court calendar">
            <h4 style="margin:8px 0 6px 0">Court Calendar</h4>
            <div id="calendar" role="table" aria-live="polite" aria-atomic="true"></div>
          </div>
        </aside>
      </section>
<!-- === END PART 1/3 === -->
      <!-- === START PART 2/3 === -->
      <section id="practice">
        <h2>Practice Areas</h2>
        <p class="muted">Family, Criminal, Civil Litigation & Mediation.</p>
        <div class="grid" style="margin-top:16px">
          <article class="card" data-reveal><h3>Family & Matrimonial</h3><p>Divorce, custody, alimony, DV Act, 125 CrPC, mediation.</p></article>
          <article class="card" data-reveal><h3>Criminal Defence</h3><p>Bail, anticipatory bail, criminal trials & appeals.</p></article>
          <article class="card" data-reveal><h3>Civil & Property</h3><p>Partition, recovery, injunctions, property litigation.</p></article>
        </div>
      </section>

      <section id="about">
        <h2>About Adv. Ganga Shankar Shastri</h2>
        <div style="display:flex;gap:18px;flex-wrap:wrap;margin-top:12px;align-items:flex-start">
          <div class="placeholder-card" data-reveal>
            <div>[Image for Ganga Shastri]<br>240px x 240px</div>
          </div>

          <div style="flex:1;min-width:220px" data-reveal>
            <p>With over 15 years of practice before the Allahabad High Court and district courts, Adv. Ganga Shankar Shastri is known for his clarity, courtroom preparation and practical client-focused representation.</p>
            <p class="muted">We emphasise confidentiality, balanced negotiation and strong litigation strategy.</p>
            <a class="btn" href="contact.html" style="margin-top:12px">Book Consultation</a>
          </div>
        </div>
      </section>
<!-- ====== Copy/paste this ENTIRE block and replace your existing <section id="team"> ====== -->
<style>
  /* Team-specific image fixes (merge into your main <style> if you prefer) */
  /* Wrapper */
  .team-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:18px; align-items:start; }

  .member {
    background:var(--card);
    border-radius:12px;
    box-shadow:var(--shadow-2);
    overflow:hidden;               /* important so images don't overflow rounded corners */
    transition:transform 320ms var(--easing);
  }
  .member:focus-within,
  .member:hover { transform: translateY(-6px); }

  /* Base photo rules */
  .member img.photo,
  .member img.ganga-photo,
  .member img.shivani-photo,
  .member .placeholder-photo {
    display:block;
    width:100%;
    height:260px;                /* desktop height */
    object-fit:cover;            /* fill container while preserving aspect */
    border:0;
    transition:transform 420ms var(--easing);
    background:#f0f3f8;
  }

  /* Person-specific object-position tweaks to avoid head-crop */
  .member img.ganga-photo { object-position: center 8%; }    /* moves crop up so head shows */
  .member img.shivani-photo { object-position: center 14%; } /* slightly less shift */

  /* hover zoom */
  .member:hover img.photo,
  .member:hover img.ganga-photo,
  .member:hover img.shivani-photo { transform: scale(1.03); }

  /* placeholder styling */
  .member .placeholder-photo {
    display:grid;
    place-items:center;
    color:var(--muted);
    font-size:.95rem;
    border-bottom:2px solid #e6ebf5;
  }

  .member .bio { padding:14px; }

  /* Responsive */
  @media (max-width:720px) {
    .member img.photo,
    .member img.ganga-photo,
    .member img.shivani-photo,
    .member .placeholder-photo { height:220px; }
    .member img.ganga-photo { object-position: center 5%; }
    .member img.shivani-photo { object-position: center 10%; }
  }
</style>

<section id="team" aria-labelledby="teamHeading">
  <h2 id="teamHeading">Our Team</h2>
  <p class="muted">Experienced advocates & legal consultants.</p>

  <div class="team-grid" role="list">
    <!-- Ganga (explicit class to adjust crop) -->
    <article class="member" role="listitem" aria-label="Adv. Ganga Shankar Shastri — Founder & Lead Counsel">
      <!-- use ganga-photo class so CSS moves crop up -->
      <img src="ganga.jpg" alt="Adv. Ganga Shankar Shastri, Founder and Lead Counsel" class="ganga-photo" loading="lazy" decoding="async">
      <div class="bio">
        <h3>Adv. Ganga Shankar Shastri</h3>
        <p class="muted">Founder & Lead Counsel</p>
      </div>
    </article>

    <!-- Minakshi (normal photo) -->
    <article class="member" role="listitem" aria-label="Adv. Minakshi Shastri — Senior Associate">
      <img src="minakshi.jpg" alt="Adv. Minakshi Shastri, Senior Associate – Civil & Corporate" class="photo" loading="lazy" decoding="async" onerror="this.style.display='none'">
      <div class="bio">
        <h3>Adv. Minakshi Shastri</h3>
        <p class="muted">Senior Associate – Civil & Corporate</p>
      </div>
    </article>

    <!-- Shivani (explicit class to slightly change crop) -->
    <article class="member" role="listitem" aria-label="Adv. Shivani Shastri — Consulting Advocate">
      <img src="new_shivani.jpg" alt="Adv. Shivani Shastri, Consulting Advocate – Constitutional Affairs" class="shivani-photo" loading="lazy" decoding="async" onerror="this.style.display='none'">
      <div class="bio">
        <h3>Adv. Shivani Shastri</h3>
        <p class="muted">Consulting Advocate – Constitutional Affairs</p>
      </div>
    </article>

    <!-- Sanjay (use placeholder if photo missing) -->
    <article class="member" role="listitem" aria-label="Adv. Sanjay Kumar — Associate Counsel">
      <!-- if you have a photo, replace the div below with <img src="sanjay.jpg" ...> -->
      <div class="placeholder-photo" aria-hidden="true">Photo coming soon</div>
      <div class="bio">
        <h3>Adv. Sanjay Kumar</h3>
        <p class="muted">Associate Counsel – Criminal Defence</p>
      </div>
    </article>
  </div>
</section>
<!-- ====== END corrected TEAM section ====== -->
      
      <section id="articles">
        <h2>Articles & Insights</h2>
        <div class="grid" style="margin-top:12px">
          <article class="card" data-reveal><h3>Section 125 CrPC Explained</h3><p class="muted">Maintenance & rights under Indian law.</p></article>
          <article class="card" data-reveal><h3>Understanding Bail Law</h3><p class="muted">Regular vs Anticipatory bail.</p></article>
          <article class="card" data-reveal><h3>Property Partition Suits</h3><p class="muted">Process, documents & strategy.</p></article>
        </div>
      </section>

      <section id="payment">
        <h2>Secure Payment</h2>
        <p class="muted">All payments in INR. UPI preferred. Receipts available on request.</p>

        <div class="pay-grid" style="margin-top:12px">
          <div class="pay-box" data-reveal>
            <h4>UPI Payment</h4>
            <img src="upi_qr.jpg" alt="UPI QR for The Justice Firm" loading="lazy" width="140" height="140">
            <p class="muted">UPI ID: <strong id="upi-id">adv.shastri@oksbi</strong></p>
            <button class="btn" id="copyUpiBtn" type="button">Copy UPI</button>
          </div>

          <div class="pay-box" data-reveal>
            <h4>Bank Transfer</h4>
            <p class="muted">The Justice Firm · Canara Bank<br>A/c 5328127000035 · IFSC CNRB0005131</p>
          </div>
        </div>
      </section>

      <section id="contact">
        <h2>Contact & Consultation</h2>
        <div style="display:grid;grid-template-columns:1fr 320px;gap:18px;margin-top:12px">
          <!-- Contact form — action set to your Formspree contact endpoint -->
          <form id="contactForm" action="https://formspree.io/f/mjkqwgje" method="POST" style="background:var(--card);padding:16px;border-radius:12px;box-shadow:var(--shadow-2)" data-reveal>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
              <label for="name">Full Name</label>
              <input id="name" name="name" placeholder="Full Name" required>
              <label for="phone">Phone (+91)</label>
              <input id="phone" name="phone" type="tel" placeholder="Phone (+91)" required>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px">
              <label for="email">Email</label>
              <input id="email" name="email" type="email" placeholder="Email" required>
              <label for="matter">Matter</label>
              <select id="matter" name="matter">
                <option>Family Matter</option>
                <option>Criminal</option>
                <option>Civil / Property</option>
                <option>Mediation</option>
                <option>Other</option>
              </select>
            </div>
            <label for="message" style="margin-top:10px">Brief description</label>
            <textarea id="message" name="message" rows="4" placeholder="Brief description…" required></textarea>

            <!-- Honeypot -->
            <input type="text" name="_gotcha" style="display:none" aria-hidden="true" tabindex="-1">

            <!-- Inline message placeholder (accessible) -->
            <div id="contactMessage" class="form-message" role="status" aria-live="polite" aria-atomic="true"></div>

            <div style="display:flex;gap:8px;margin-top:12px">
              <button class="btn" type="submit">Send Request</button>
              <button class="btn ghost" id="scheduleCallBtn" type="button">Schedule Call</button>
            </div>
          </form>
<!-- === END PART 2/3 === -->
          <!-- === START PART 3/3 === -->
          <aside class="panel" data-reveal>
            <h4>Office Address</h4>
            <p class="muted">Rajrooppur, Allahabad (Prayagraj), Uttar Pradesh</p>
            <h4 style="margin-top:16px">Timings</h4>
            <p class="muted">Mon–Sun · 9:00 AM – 9:00 PM</p>
            <p style="font-weight:700">
              <a href="https://wa.me/919454183793" target="_blank" rel="noopener noreferrer" style="text-decoration:none; color:inherit;">
                +91 94541 83793 (WhatsApp)
              </a>
            </p>
          </aside>
        </div>
      </section>
    </main>

    <footer>
      <div>
        <div style="font-weight:700">The Justice Firm</div>
        <div class="muted">© <span id="year"></span> • All Rights Reserved</div>
      </div>
      <div><a href="disclaimer.html">Disclaimer & Privacy</a> • <a href="terms.html">Terms</a></div>
    </footer>
  </div>

  <!-- Booking Modal -->
  <div id="bookingModal" aria-hidden="true" aria-labelledby="modalTitle" style="display:none;position:fixed;inset:0;background:rgba(2,6,23,0.5);backdrop-filter:blur(4px);align-items:center;justify-content:center;z-index:1200;padding:18px">
    <div role="dialog" aria-modal="true" aria-labelledby="modalTitle" style="background:var(--card);padding:20px;border-radius:12px;max-width:420px;width:100%">
      <h3 id="modalTitle">Request Consultation</h3>
      <p class="muted">Choose a date — we will confirm via email.</p>
      <!-- Booking form — action set to your Formspree booking endpoint -->
      <form id="bookingForm" action="https://formspree.io/f/myzqwkvv" method="POST">
        <label for="bk-client">Full name</label>
        <input id="bk-client" name="client" placeholder="Full name" required style="margin-top:10px">
        <label for="bk-email">Email</label>
        <input id="bk-email" name="email" type="email" placeholder="Email" required style="margin-top:10px">
        <label for="bk-date">Date</label>
        <input id="bk-date" name="date" type="date" required style="margin-top:10px">
        <!-- Honeypot -->
        <input type="text" name="_gotcha" style="display:none" aria-hidden="true" tabindex="-1">

        <!-- Inline message placeholder -->
        <div id="bookingMessage" class="form-message" role="status" aria-live="polite" aria-atomic="true"></div>

        <div style="display:flex;gap:8px;margin-top:14px">
          <button class="btn" type="submit">Request</button>
          <button class="btn ghost" type="button" id="cancelBookingBtn">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    /* Utility */
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));

    /* Nav toggle */
    const navToggle = document.getElementById('navToggle');
    const navLinks = document.getElementById('main-nav');
    navToggle?.addEventListener('click', () => {
      const expanded = navToggle.getAttribute('aria-expanded') === 'true';
      navToggle.setAttribute('aria-expanded', String(!expanded));
      if (navLinks && window.innerWidth < 720) {
        navLinks.classList.toggle('is-open');
      }
    });

    /* Clock (Asia/Kolkata) */
    function updateClock(){
      try {
        const opt = { timeZone: 'Asia/Kolkata', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
        const now = new Date();
        const t = now.toLocaleTimeString('en-IN', opt) + ' IST';
        const el = document.getElementById('clock-nav');
        if (el) el.textContent = t;
        const navClock = document.getElementById('clock');
        if (navClock) navClock.textContent = t;
      } catch(e) { console.error('Clock error', e); }
    }
    setInterval(updateClock, 1000); updateClock();

    /* Next available slot */
    (function setNextSlot(){
      const el = document.getElementById('nextSlot');
      const now = new Date();
      const next = new Date(now);
      const inIST = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }));
      const hour = inIST.getHours();
      if (hour >= 16) next.setDate(next.getDate() + 1);
      next.setHours(11,0,0,0);
      const opt = { weekday:'short', day:'numeric', month:'short', hour:'2-digit', minute:'2-digit', timeZone:'Asia/Kolkata', hour12:false };
      if (el) el.textContent = next.toLocaleString('en-IN', opt) + ' IST';
    })();

    /* Calendar generator */
    function generateCalendar(containerId='calendar'){
      const el = document.getElementById(containerId);
      if(!el) return;
      const nowIST = new Date(new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }));
      const year = nowIST.getFullYear();
      const month = nowIST.getMonth();
      const today = nowIST.getDate();
      const months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month +1, 0).getDate();
      let html = `<table aria-label="${months[month]} ${year}"><caption style="text-align:left;padding:8px 0;font-weight:700">${months[month]} ${year}</caption><thead><tr><th scope="col">Su</th><th scope="col">Mo</th><th scope="col">Tu</th><th scope="col">We</th><th scope="col">Th</th><th scope="col">Fr</th><th scope="col">Sa</th></tr></thead><tbody>`;
      let d = 1;
      for(let r=0; r<6; r++){
        html += '<tr>';
        for(let c=0;c<7;c++){
          if(r===0 && c<firstDay){ html += '<td aria-hidden="true"></td>'; }
          else if(d>daysInMonth){ html += '<td aria-hidden="true"></td>'; }
          else {
            const isToday = (d === today);
            html += `<td ${isToday ? 'class="today" aria-current="date"' : ''}>${d}</td>`;
            d++;
          }
        }
        html += '</tr>';
        if(d>daysInMonth) break;
      }
      html += '</tbody></table>';
      el.innerHTML = html;
    }
    generateCalendar();

    // Regenerate after midnight
    (function scheduleMidnightRefresh(){
      const now = new Date();
      const nextMidnight = new Date(now.getFullYear(), now.getMonth(), now.getDate()+1, 0, 0, 2);
      const ms = nextMidnight - now;
      setTimeout(()=>{ generateCalendar(); scheduleMidnightRefresh(); }, ms);
    })();

    /* Booking modal handlers */
    const bookingModal = document.getElementById('bookingModal');
    const requestSlotBtn = document.getElementById('requestSlotBtn');
    const scheduleCallBtn = document.getElementById('scheduleCallBtn');
    const cancelBookingBtn = document.getElementById('cancelBookingBtn');
    const bookingForm = document.getElementById('bookingForm');

    function openBooking(){
      if(!bookingModal) return;
      bookingModal.style.display = 'flex';
      bookingModal.setAttribute('aria-hidden','false');
      const first = bookingModal.querySelector('input');
      if(first) first.focus();
    }
    function closeBooking(){
      if(!bookingModal) return;
      bookingModal.style.display = 'none';
      bookingModal.setAttribute('aria-hidden','true');
      requestSlotBtn?.focus();
    }
    requestSlotBtn?.addEventListener('click', openBooking);
    scheduleCallBtn?.addEventListener('click', openBooking);
    cancelBookingBtn?.addEventListener('click', closeBooking);

    /* Copy UPI */
    const copyUpiBtn = document.getElementById('copyUpiBtn');
    copyUpiBtn?.addEventListener('click', async () => {
      const upi = (document.getElementById('upi-id')?.textContent || '').trim();
      if(!upi){ alert('UPI ID not found'); return; }
      try {
        if (navigator.clipboard && navigator.clipboard.writeText) {
          await navigator.clipboard.writeText(upi);
          showInlineTemp(`UPI Copied: ${upi}`);
        } else {
          window.prompt('Copy UPI ID', upi);
        }
      } catch (err) {
        window.prompt('Copy UPI ID', upi);
      }
    });

    /* Small ephemeral message (bottom-left) for UPI copy */
    function showInlineTemp(msg, ms=2500){
      let el = document.getElementById('tempMessage');
      if(!el){
        el = document.createElement('div');
        el.id = 'tempMessage';
        el.style.position = 'fixed';
        el.style.left = '14px';
        el.style.bottom = '18px';
        el.style.background = '#02102a';
        el.style.color = '#fff';
        el.style.padding = '10px 12px';
        el.style.borderRadius = '8px';
        el.style.boxShadow = '0 8px 30px rgba(0,0,0,0.18)';
        el.style.zIndex = 9999;
        document.body.appendChild(el);
      }
      el.textContent = msg;
      el.style.opacity = '1';
      setTimeout(()=>{ if(el) el.style.opacity = '0'; }, ms);
    }

    /* showMessage: places inline success/error into form message container */
    function showMessage(formId, type, text, autoHide=true, ms=6000){
      const map = { contactForm: 'contactMessage', bookingForm: 'bookingMessage' };
      const mid = map[formId];
      if(!mid) return;
      const el = document.getElementById(mid);
      if(!el) return;
      el.className = 'form-message ' + (type === 'success' ? 'success' : 'error');
      el.textContent = text;
      el.style.display = 'block';
      el.focus();
      if(autoHide){
        clearTimeout(el._hideTimer);
        el._hideTimer = setTimeout(()=>{ el.style.display = 'none'; }, ms);
      }
    }

    /* ---- Formspree AJAX Handler (for both forms) ---- */
    function attachFormspreeHandler(formId){
      const form = document.getElementById(formId);
      if(!form) return;

      form.addEventListener('submit', async function(e){
        e.preventDefault();

        const submitBtn = form.querySelector('button[type="submit"]');
        const originalText = submitBtn ? submitBtn.textContent : '';

        try {
          if (submitBtn){ submitBtn.disabled = true; submitBtn.textContent = 'Sending…'; }

          const formData = new FormData(form);

          // add subject for easier inbox sorting
          if (formId === 'bookingForm') {
              formData.append('_subject', 'Booking Slot Request from justicefirms.com');
          } else if (formId === 'contactForm') {
              formData.append('_subject', 'New Contact Request from justicefirms.com');
          }

          const action = form.getAttribute('action');
          if (!action || action.indexOf('formspree.io') === -1) {
            showMessage(formId, 'error', 'Form endpoint not set. Please create a form on formspree.io and paste the endpoint into form action.');
            return;
          }

          const resp = await fetch(action, {
            method: 'POST',
            body: formData,
            headers: { 'Accept': 'application/json' }
          });

          const data = await resp.json().catch(() => ({}));

          if (resp.ok) {
            showMessage(formId, 'success', 'Your request has been received. We will contact you soon.');
            form.reset();
            if(formId === 'bookingForm') closeBooking();
          } else {
            let msg = 'Unable to send request. Please try again later.';
            if (data && data.errors && Array.isArray(data.errors)) {
              msg = data.errors.map(i => i.message || i).join('; ');
            } else if (data && data.message) {
              msg = data.message;
            }
            showMessage(formId, 'error', msg);
          }
        } catch (err) {
          console.error('Form submit error', err);
          showMessage(formId, 'error', 'Network error. Please check your connection and try again.');
        } finally {
          if (submitBtn){ submitBtn.disabled = false; submitBtn.textContent = originalText; }
        }
      });
    }
    attachFormspreeHandler('contactForm');
    attachFormspreeHandler('bookingForm');

    /* Scroll reveal, hero parallax, calendar etc. (kept same behavior) */
    if ('IntersectionObserver' in window && !window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      const obs = new IntersectionObserver((entries, o) => {
        entries.forEach(en => { if (en.isIntersecting) { en.target.classList.add('is-revealed'); o.unobserve(en.target); } });
      }, { threshold: 0.12 });
      document.querySelectorAll('[data-reveal]').forEach(el => obs.observe(el));
    } else {
      document.querySelectorAll('[data-reveal]').forEach(el => el.classList.add('is-revealed'));
    }

    (function(){ const hero = document.querySelector('.hero'); if(!hero) return; if(window.matchMedia('(pointer: coarse)').matches) return;
      let raf=null;
      hero.addEventListener('mousemove', e => {
        const rect = hero.getBoundingClientRect();
        const x = (e.clientX - (rect.left + rect.width/2))/rect.width;
        const y = (e.clientY - (rect.top + rect.height/2))/rect.height;
        cancelAnimationFrame(raf);
        raf = requestAnimationFrame(()=> hero.style.transform = `translate3d(${x*8}px,${y*4}px,0)`);
      });
      hero.addEventListener('mouseleave', ()=> hero.style.transform = 'translate3d(0,0,0)');
    })();

    /* Footer year + ESC close */
    document.getElementById('year').textContent = new Date().getFullYear();
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && bookingModal && bookingModal.style.display === 'flex') closeBooking();
    });

  </script>
</body>
</html>
<!-- === END PART 3/3 === -->
