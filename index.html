<!doctype html>
<html lang="en-IN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1, shrink-to-fit=no" />
  <title>The Justice Firm — Advocates & Legal Consultants (India)</title>
  <meta name="description" content="The Justice Firm — Family, Criminal & Civil law; Mediation. Based in Allahabad (Prayagraj), Uttar Pradesh." />
  <meta name="author" content="The Justice Firm">
  <link rel="canonical" href="https://justicefirms.com/">
  <meta name="robots" content="index,follow">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Merriweather:ital,wght@0,400;0,700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#f4f6fb; --card:#ffffff; --ink:#071225; --muted:#556173;
      --accent:#083b9a; --accent-2:#052c78; --gold:#c89b1e;
      --radius:14px; --container:1100px; --easing:cubic-bezier(.16,.84,.32,1);
      --shadow-1: 0 6px 30px rgba(7,12,25,0.06); --shadow-2: 0 14px 40px rgba(7,12,25,0.05);
      --success:#1f7a3a; --danger:#b42318;
      --btn-radius:12px; --btn-padding:12px 16px; --btn-shadow: 0 10px 32px rgba(5,44,120,0.12);
      --btn-focus: 0 0 0 4px rgba(8,59,155,0.12);
      --max-mobile-padding:18px;
    }

    /* Reset + baseline */
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto; -webkit-font-smoothing:antialiased;line-height:1.45;scroll-behavior:smooth}
    a{color:inherit;text-decoration:none}
    img,svg,canvas{max-width:100%;height:auto;display:block}
    html,body{overflow-x:hidden;}
    .wrap{max-width:var(--container);margin:0 auto;padding:20px var(--max-mobile-padding);}

    .muted { color: var(--muted); }
    .visually-hidden { position: absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }

    .skip-link{position:fixed;left:8px;top:8px;background:#000;color:#fff;padding:8px 10px;border-radius:6px;z-index:2000;transform:translateY(-200%);transition:transform .2s}
    .skip-link:focus{transform:translateY(0%)}

    /* NAV */
    .nav{
      display:flex;align-items:center;justify-content:space-between;
      background:rgba(255,255,255,0.92);backdrop-filter:blur(6px); padding:12px; border-radius:12px;
      box-shadow:var(--shadow-1); margin:12px 0; position:relative; z-index:30;
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:grid;place-items:center;color:#fff;font-weight:800;font-size:1.05rem;transition:transform 420ms var(--easing)}
    .brand:hover .logo{transform:scale(1.05) rotate(-6deg)}
    .brand-name{font-family:Merriweather,serif;font-size:1.05rem;font-weight:700;margin:0}
    .nav-links{display:flex;gap:12px;align-items:center}
    .nav-links a{color:var(--muted);font-weight:600;padding:8px 10px;border-radius:8px}
    .nav-links a.cta{background:var(--accent);color:#fff}
    .nav-toggle{display:none;border:0;font-size:22px;background:none;color:var(--ink);padding:6px;border-radius:8px}

    #clock{color:var(--gold);font-weight:700;font-size:.95rem}

    /* HERO — uses hero_bg.jpg */
    .hero{
      display:grid;grid-template-columns:1fr 360px;gap:22px;align-items:start;margin:12px 0;position:relative;
      background-image: url('hero_bg.jpg');
      background-size:cover;
      background-position:center center;
      border-radius:16px;
      padding:26px;
      box-shadow: var(--shadow-2);
      overflow:visible;
    }
    .hero-card{background:linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.92));padding:24px;border-radius:12px;box-shadow:0 22px 60px rgba(7,12,25,0.06);position:relative;z-index:2}
    .eyebrow{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;padding:6px 12px;border-radius:999px;font-size:.82rem;font-weight:700;display:inline-block}
    .headline{font-family:Merriweather,serif;font-size:26px;margin:12px 0}
    .lead{color:var(--muted);margin-bottom:16px}
    .hero-cta{display:flex;gap:12px;flex-wrap:wrap}

    /* Aside panel */
    .panel{background:var(--card);padding:16px;border-radius:12px;box-shadow:var(--shadow-2);z-index:1}
    #clock-nav{font-weight:700;color:var(--gold);font-size:.95rem;text-align:right}
    #calendar-section{background:linear-gradient(180deg,#fff,#fbfdff);border-radius:10px;padding:10px;margin-top:12px;box-shadow:0 12px 36px rgba(7,12,25,0.04)}
    #calendar{width:100%;overflow-x:auto}
    #calendar table{width:100%;border-collapse:collapse;font-size:.95rem}
    #calendar th,#calendar td{padding:8px;text-align:center;border-radius:6px}
    #calendar th{color:var(--muted);font-weight:700;font-size:.9rem}
    #calendar td{height:40px}
    #calendar td.today{background:var(--gold);color:#000;font-weight:700;border-radius:50%}

    section{margin:30px 0}
    h2{font-family:Merriweather,serif;font-size:1.22rem;margin:0 0 10px;position:relative}
    h2::after{content:"";display:block;width:48px;height:4px;background:var(--gold);border-radius:4px;margin-top:8px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:var(--shadow-2);transition:transform 320ms var(--easing),box-shadow 320ms var(--easing)}
    .card:hover{transform:translateY(-8px);box-shadow:0 28px 70px rgba(7,12,25,0.10)}

    /* Practice cards with thumbnails */
    .practice-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:18px; margin-top:16px; }
    .practice-card { border-radius:14px; overflow:hidden; display:flex; gap:0; align-items:stretch; box-shadow:var(--shadow-2); background:#fff; }
    .practice-thumb { width:140px; min-width:140px; height:140px; object-fit:cover; display:block }
    .practice-body { padding:14px; display:flex; flex-direction:column; gap:8px; }

    .pay-grid{display:grid;grid-template-columns:1fr 1fr;gap:18px}
    .pay-box{background:var(--card);padding:18px;text-align:center;border-radius:12px;box-shadow:var(--shadow-2)}
    .pay-box img{width:140px;height:140px;border-radius:10px;border:2px solid var(--gold);object-fit:cover}

    /* titanium cards: tightened styling */
    .titanium-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:18px}
    .titanium-card, .bank-titanium { border-radius:14px; color:#e8f3ff; padding:18px; min-height:220px; display:flex; flex-direction:column; gap:12px; box-shadow: var(--shadow-2); }
    .titanium-card h4, .bank-titanium h4 { margin:0; color:#e6f2ff; font-family:Merriweather,serif; }
    .titanium-qr-frame { width:180px; height:180px; border-radius:10px; overflow:hidden; display:flex; align-items:center; justify-content:center; margin:8px auto 0; background:linear-gradient(180deg,#eef1f6,#dfe6ef); }
    .titanium-qr-frame img{width:100%;height:100%;object-fit:cover}
    .titanium-actions{display:flex;gap:10px;justify-content:center;align-items:center;flex-wrap:wrap}
    .titanium-btn{padding:10px 12px;border-radius:10px;border:0;cursor:pointer;color:#fff;background:linear-gradient(90deg,var(--accent),var(--accent-2));}

    form input,form textarea,form select{width:100%;padding:10px;border-radius:10px;border:1px solid #d8dce3;font-size:1rem;font-family:Inter}
    label{font-size:.9rem;color:var(--muted);display:block;margin-bottom:6px}

    .form-message{
      margin-top:12px;padding:12px;border-radius:10px;font-weight:600;display:none;
      align-items:center;gap:10px;
    }
    .form-message.success{background:rgba(31,122,58,0.10);color:var(--success);display:flex;border:1px solid rgba(31,122,58,0.16)}
    .form-message.error{background:rgba(180,35,24,0.08);color:var(--danger);display:flex;border:1px solid rgba(180,35,24,0.12)}

    footer{background:linear-gradient(180deg,#03102a,#041733);padding:18px;border-radius:14px;margin:28px 0 40px;color:#fff;display:flex;justify-content:space-between;align-items:center;gap:12px}
    footer a{color:var(--gold)}

    /* Buttons */
    .btn { display:inline-flex; align-items:center; gap:10px; padding:var(--btn-padding); border-radius:var(--btn-radius); cursor:pointer; font-weight:700; font-size:0.95rem; border:0; background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#fff; box-shadow:var(--btn-shadow); transition:transform .18s var(--easing),box-shadow .18s var(--easing); position:relative; overflow:hidden; text-decoration:none; -webkit-tap-highlight-color: transparent; }
    .btn:focus{outline:none;box-shadow:var(--btn-focus), var(--btn-shadow)}
    .btn:active{transform:translateY(1px) scale(.995)}
    .btn--primary { background:linear-gradient(90deg,var(--accent),var(--accent-2)); }
    .btn--ghost { background:transparent; color:var(--ink); border:1px solid rgba(5,44,120,0.08); box-shadow:none; }
    .btn--accent { background: linear-gradient(90deg,#17c964,#0ba35a); box-shadow: 0 10px 30px rgba(23,201,100,0.12); }
    .btn--outline { background:transparent; border:1px solid rgba(8,70,198,0.12); color:var(--accent-2); }
    .btn--icon { padding:10px; border-radius:10px; width:44px;height:44px; justify-content:center; font-weight:700; }
    .btn--small { padding:8px 10px; font-size:.88rem; border-radius:10px; font-weight:600; }
    .btn:focus-visible { box-shadow: var(--btn-focus); outline: none; }

    /* FAB */
    .fab{ position:fixed; right:18px; bottom:18px; z-index:1400; display:flex; flex-direction:column; align-items:flex-end; gap:8px; }
    .fab__main{ width:60px; height:60px; border-radius:999px; display:grid; place-items:center; color:#fff; background:linear-gradient(180deg,var(--accent-2),var(--accent)); box-shadow:0 18px 48px rgba(5,44,120,0.18); cursor:pointer; border:0; transition:transform .18s var(--easing),box-shadow .18s var(--easing); }
    .fab__main:focus{outline:var(--btn-focus);}
    .fab__menu{ display:flex; flex-direction:column; align-items:flex-end; gap:8px; margin-bottom:6px; transform-origin:100% 100%; transition:transform .28s var(--easing),opacity .2s var(--easing); opacity:0; transform:translateY(8px) scale(.9); pointer-events:none; }
    .fab[aria-expanded="true"] .fab__menu{ opacity:1; transform:translateY(0) scale(1); pointer-events:auto }
    .fab__item{ display:inline-flex; align-items:center; gap:10px; padding:10px 12px; border-radius:999px; background:var(--card); box-shadow:var(--shadow-2); color:var(--ink); text-decoration:none; border:1px solid rgba(7,12,25,0.04); }

    a:focus,button:focus,input:focus,textarea:focus,select:focus{outline:3px solid rgba(8,59,155,0.10);outline-offset:3px;border-radius:8px}

    [data-reveal]{opacity:0;transform:translateY(10px);transition:opacity 520ms var(--easing),transform 520ms var(--easing)}
    [data-reveal].is-revealed{opacity:1;transform:none}

    .tick-svg { width:22px;height:22px;flex:0 0 22px }
    .tick-path { stroke: var(--success); stroke-width:3; stroke-linecap:round; stroke-linejoin:round; fill:none; stroke-dasharray: 48; stroke-dashoffset: 48; transition: stroke-dashoffset 420ms ease-out; }
    .form-message.success .tick-path { stroke-dashoffset: 0; }

    /* Team styles (consistent squares) */
    .team-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:22px; margin-top:16px; }
    .member { background:var(--card); border-radius:14px; overflow:hidden; box-shadow:var(--shadow-2); transition:transform .25s var(--easing); display:flex; flex-direction:column; }
    .member-figure { width:100%; height:220px; background:#eef2f7; position:relative; overflow:hidden; display:block; }
    .member-figure img { width:100%; height:100%; object-fit:cover; object-position:center center; display:block; transition:transform .6s var(--easing); }
    .member:hover img { transform:scale(1.04); }
    .initials { position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:84px;height:84px;border-radius:12px;background:linear-gradient(135deg,var(--accent-2),var(--accent)); color:#fff; font-weight:800; display:none; place-items:center; font-family:Merriweather,serif; font-size:1.05rem; }
    .bio { padding:16px; display:flex; flex-direction:column; gap:6px; }
    .bio h3 { margin:0; font-family:Merriweather,serif; font-size:1.05rem; }
    .bio .role{ margin:0;color:var(--muted); font-size:.95rem; }
    .bio .meta{ margin-top:auto;color:var(--muted); font-size:.88rem; }

    /* Articles left-thumb layout */
    #articlesGrid { display:grid; grid-template-columns: 1fr; gap:14px; margin-top:12px; }
    .article-row { display:flex; gap:12px; align-items:flex-start; background:var(--card); padding:12px; border-radius:12px; box-shadow:var(--shadow-2); }
    .article-thumb { width:120px; height:84px; flex:0 0 120px; border-radius:8px; object-fit:cover; }
    .article-body { flex:1; display:flex; flex-direction:column; gap:8px; }
    .article-title { font-weight:700; }
    .article-excerpt { color:var(--muted); font-size:.95rem; }

    /* Dictionary section */
    #dictionaryCard { margin-top:14px; }
    .dict-layout{display:grid;grid-template-columns:minmax(0,1.4fr) minmax(0,1fr);gap:18px;align-items:start}
    .dict-input-wrap{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .dict-results{background:var(--card);padding:14px;border-radius:12px;box-shadow:var(--shadow-2);min-height:80px}
    .dict-term{font-weight:700}
    .dict-definition{margin-top:6px;color:var(--muted)}
    .dict-note{margin-top:8px;font-size:.85rem;color:var(--muted)}

    /* Tag chip (articles) */
    .tag-chip{border-radius:999px;border:1px solid #dde4f3;padding:4px 10px;font-size:.85rem;background:#fff;cursor:pointer}
    .tag-chip[aria-pressed="true"]{background:var(--accent);color:#fff;border-color:var(--accent)}

    /* Chat widget basic message styles */
    .message{margin-bottom:8px;max-width:80%}
    .from-bot{align-self:flex-start}
    .from-user{align-self:flex-end}

    .chip{border-radius:999px;border:1px solid #dde4f3;padding:4px 10px;font-size:.82rem;background:#f1f5ff;cursor:pointer;margin-top:6px;margin-right:6px}

    /* Mobile nav panel (hidden by default) */
    .mobile-nav-panel{ display:none; position:fixed; inset:0; z-index:1200; background:linear-gradient(180deg, rgba(2,6,23,0.85), rgba(2,6,23,0.92)); color:#fff; padding:18px; overflow:auto }
    .mobile-nav-panel.open{ display:block }
    .mobile-nav-panel a, .mobile-nav-panel .mobile-link{ display:block; padding:12px 0; color:#fff; text-decoration:none; font-weight:700 }
    .mobile-nav-panel .close{ background:transparent;border:0;color:#fff;font-size:20px;padding:6px; margin-left:auto }

    @media(max-width:1024px){ .hero{grid-template-columns:1fr 320px} .panel{padding:12px} .dict-layout{grid-template-columns:1fr} }
    @media(max-width:720px){
      .nav-toggle{display:block}
      .nav-links{display:none}
      .hero{grid-template-columns:1fr;gap:12px;padding:20px}
      .practice-thumb{min-width:120px;width:120px;height:120px}
      .pay-grid{grid-template-columns:1fr}
      section{margin:18px 0}
      footer{flex-direction:column;align-items:flex-start}
      .member-figure{height:180px}
      .headline{font-size:20px}
      .logo{width:40px;height:40px}
      .wrap{padding:16px}
      .article-thumb{width:100px;height:70px;flex:0 0 100px}
      .mobile-nav-panel{ padding-top:60px }
    }

    @media (prefers-reduced-motion: reduce){
      *,*::before,*::after{transition:none!important;animation:none!important;scroll-behavior:auto!important}
    }
  </style>
</head>

<body>
  <a class="skip-link" href="#main-content">Skip to content</a>

  <div class="wrap">
    <header class="nav" role="banner">
      <div class="brand">
        <div class="logo" aria-hidden="true">TJ</div>
        <div>
          <div class="brand-name">The Justice Firm</div>
          <div class="muted" style="font-size:.85rem">Advocates & Legal Consultants (India)</div>
        </div>
      </div>

      <nav id="main-nav" class="nav-links" role="navigation" aria-label="Main">
        <a href="#practice">Practice</a>
        <a href="#about">About</a>
        <a href="#team">Team</a>
        <a href="#articles">Articles</a>
        <a href="#dictionary">Dictionary</a>
        <a href="#payment">Payment</a>
        <a href="#contact" class="cta btn--ghost">Contact</a>
        <span id="clock" aria-live="polite" style="margin-left:8px"></span>
      </nav>

      <button class="nav-toggle btn btn--icon" id="navToggle" aria-expanded="false" aria-controls="mobileNavPanel" aria-label="Open menu">☰</button>
    </header>

    <!-- Mobile nav panel (hidden initially) -->
    <div id="mobileNavPanel" class="mobile-nav-panel" aria-hidden="true">
      <div style="display:flex;align-items:center;gap:12px;justify-content:flex-start;margin-bottom:12px">
        <div class="logo" style="width:44px;height:44px">TJ</div>
        <div style="font-weight:700">The Justice Firm</div>
        <button class="close" id="mobileNavClose" aria-label="Close menu" style="margin-left:auto">✕</button>
      </div>
      <a href="#practice" class="mobile-link">Practice</a>
      <a href="#about" class="mobile-link">About</a>
      <a href="#team" class="mobile-link">Team</a>
      <a href="#articles" class="mobile-link">Articles</a>
      <a href="#dictionary" class="mobile-link">Dictionary</a>
      <a href="#payment" class="mobile-link">Payment</a>
      <a href="#contact" class="btn btn--primary" style="width:100%;display:inline-flex;justify-content:center;margin-top:12px">Contact / Book</a>

      <div style="margin-top:20px;color:rgba(255,255,255,0.9);font-size:.95rem">
        <div><strong>Call:</strong> <a href="tel:+919454183793" style="color:#fff">+91 94541 83793</a></div>
        <div style="margin-top:6px"><a href="mailto:adv.shastri@gmail.com" style="color:#fff">adv.shastri@gmail.com</a></div>
      </div>
    </div>

    <main id="main-content" tabindex="-1">
      <!-- HERO -->
      <section class="hero" data-reveal>
        <div class="hero-card" data-reveal>
          <span class="eyebrow">Trusted in Indian Courts</span>
          <h1 class="headline">Practical counsel for Family, Criminal & Civil disputes.</h1>
          <p class="lead">Confidential, strategic and results-focused representation across Allahabad and Uttar Pradesh.</p>
          <div class="hero-cta">
            <a class="btn btn--primary" href="#contact" title="Book consultation">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M7 11h10" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 15h6" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Book Consultation
            </a>

            <a class="btn btn--ghost" href="#practice">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 2v20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M2 12h20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              Explore Practice
            </a>
          </div>
          <p class="muted" style="margin-top:12px;font-size:.92rem"><strong>+91 94541 83793</strong> · <a href="mailto:adv.shastri@gmail.com">adv.shastri@gmail.com</a></p>
        </div>

        <aside class="panel" data-reveal aria-labelledby="nextSlotLabel">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
            <div>
              <h4 id="nextSlotLabel" style="margin:0">Next Available Slot</h4>
              <div class="muted" id="nextSlot" style="margin-top:6px">Loading…</div>
            </div>
            <div id="clock-nav">--:--:-- IST</div>
          </div>

          <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn btn--outline" id="requestSlotBtn" type="button">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 5v14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              Request Slot
            </button>
            <a class="btn btn--ghost" href="#contact">Contact</a>
          </div>

          <div id="calendar-section" aria-label="Court calendar">
            <h4 style="margin:8px 0 6px 0">Court Calendar</h4>
            <div id="calendar" role="table" aria-live="polite" aria-atomic="true"></div>
          </div>
        </aside>
      </section>

      <!-- PRACTICE -->
      <section id="practice">
        <h2>Practice Areas</h2>
        <p class="muted">Family, Criminal, Civil Litigation & Mediation.</p>

        <div class="practice-grid">
          <article class="practice-card" data-reveal>
            <img class="practice-thumb" src="fam.jpg" alt="Family & Matrimonial" loading="lazy" decoding="async">
            <div class="practice-body">
              <h3 style="margin:0">Family & Matrimonial</h3>
              <p class="muted" style="margin:0">Divorce, custody, alimony, DV Act, 125 CrPC, mediation.</p>
              <div style="margin-top:auto">
                <a class="btn btn--ghost btn--small" href="#contact">Consult</a>
              </div>
            </div>
          </article>

          <article class="practice-card" data-reveal>
            <img class="practice-thumb" src="crim.jpg" alt="Criminal Defence" loading="lazy" decoding="async">
            <div class="practice-body">
              <h3 style="margin:0">Criminal Defence</h3>
              <p class="muted" style="margin:0">Bail, anticipatory bail, criminal trials & appeals.</p>
              <div style="margin-top:auto"><a class="btn btn--ghost btn--small" href="#contact">Consult</a></div>
            </div>
          </article>

          <article class="practice-card" data-reveal>
            <img class="practice-thumb" src="prop.jpg" alt="Civil & Property" loading="lazy" decoding="async">
            <div class="practice-body">
              <h3 style="margin:0">Civil & Property</h3>
              <p class="muted" style="margin:0">Partition, recovery, injunctions, property litigation.</p>
              <div style="margin-top:auto"><a class="btn btn--ghost btn--small" href="#contact">Consult</a></div>
            </div>
          </article>
        </div>
      </section>

      <!-- ABOUT -->
      <section id="about">
        <h2>About Adv. Ganga Shankar Shastri</h2>
        <div style="display:flex;gap:18px;flex-wrap:wrap;margin-top:12px;align-items:flex-start">
          <div class="placeholder-card" data-reveal style="min-width:240px;max-width:240px;border-radius:12px;background:#fff;padding:8px;box-shadow:var(--shadow-2)">
            <img src="ganga.jpg" alt="Adv. Ganga Shankar Shastri — Founder" style="width:100%;height:auto;border-radius:8px;object-fit:cover" onerror="this.parentElement.innerHTML='[Image for S Sha] 240px x 240px'">
          </div>

          <div style="flex:1;min-width:220px" data-reveal>
            <p>With over 15 years of practice before the Allahabad High Court and district courts, Adv. Ganga Shankar Shastri is known for his clarity, courtroom preparation and practical client-focused representation.</p>
            <p class="muted">We emphasise confidentiality, balanced negotiation and strong litigation strategy.</p>
            <a class="btn btn--primary" href="#contact" style="margin-top:12px">Book Consultation</a>
          </div>
        </div>
      </section>

      <!-- TEAM -->
      <!-- ========================= OUR TEAM (PREMIUM + SOBER PARAGRAPH MODAL) ========================= -->
<section id="team" aria-labelledby="teamHeading" class="team-section-premium">
  <div class="wrap">
    <header class="team-header">
      <h2 id="teamHeading">Our Team</h2>
      <p class="muted">Experienced advocates &amp; legal consultants.</p>
    </header>

    <div class="team-grid" role="list" aria-label="Our team members">

      <!-- ================= GANGA SHANKAR SHASTRI ================= -->
      <article class="member" role="listitem" tabindex="0"
        data-name="Adv. Ganga Shankar Shastri"
        data-bio='{
          "title": "Adv. Ganga Shankar Shastri",
          "subtitle": "Founder & Lead Counsel",
          "quote": "Justice is served best when clarity meets conscience.",
          "content": "Adv. Ganga Shankar Shastri holds a Bachelor\\'s degree in Information Technology and a Bachelor\\'s degree in Law, blending analytical precision with deep legal insight.\\n\\nWith over 15 years of experience in law, he has guided complex matters before the Allahabad High Court with clarity, discipline, and unwavering composure.\\n\\nHe is the author of the respected Supreme Court judgment compilation series \\'Nirnay Dhara\\', known for its scholarly depth and practical relevance. Admired for his humility, principled advocacy, and steady judgement, he remains a trusted counsel for clients facing high-stakes litigation."
        }'>

        <figure class="member-figure" aria-hidden="true">
          <img src="ganga.jpg" alt="Adv. Ganga Shankar Shastri" loading="lazy" decoding="async" data-focus="50% 22%">
          <div class="initials" aria-hidden="true">GS</div>
          <div class="sheen" aria-hidden="true"></div>
        </figure>

        <div class="bio">
          <h3>Adv. Ganga Shankar Shastri</h3>
          <p class="role">Founder &amp; Lead Counsel</p>
          <p class="meta">15+ years • Allahabad High Court</p>
        </div>
      </article>

      <!-- ================= MINAKSHI SHASTRI ================= -->
      <article class="member" role="listitem" tabindex="0"
        data-name="Adv. Minakshi Shastri"
        data-bio='{
          "title": "Adv. Minakshi Shastri",
          "subtitle": "Senior Associate – Civil & Corporate",
          "quote": "Clarity, compassion, and discipline — the pillars of enduring advocacy.",
          "content": "Adv. Minakshi Shastri holds a Master of Laws (LL.M.) and is a postgraduate of the Indian Institute of Human Rights.\\n\\nShe combines academic depth with practical courtroom skill, shaping strategies marked by precision and compassion.\\n\\nRecognised for her calm authority, meticulous preparation, and empathetic client guidance, she brings unwavering commitment to every civil and corporate matter she leads."
        }'>

        <figure class="member-figure" aria-hidden="true">
          <img src="minakshi.jpg" alt="Adv. Minakshi Shastri" loading="lazy" decoding="async" data-focus="50% 20%">
          <div class="initials" aria-hidden="true">MS</div>
          <div class="sheen" aria-hidden="true"></div>
        </figure>

        <div class="bio">
          <h3>Adv. Minakshi Shastri</h3>
          <p class="role">Senior Associate – Civil &amp; Corporate</p>
          <p class="meta">Property &amp; Corporate Litigation</p>
        </div>
      </article>

      <!-- ================= SHIVANI SHASTRI ================= -->
      <article class="member" role="listitem" tabindex="0"
        data-name="Adv. Shivani Shastri"
        data-bio='{
          "title": "Adv. Shivani Shastri",
          "subtitle": "Consulting Advocate – Constitutional Affairs",
          "quote": "Progress in law begins with the courage to question, learn, and refine.",
          "content": "Adv. Shivani Shastri holds a Master of Laws (LL.M.) and is currently pursuing her Ph.D. to deepen her research in constitutional studies.\\n\\nHer scholarly approach, analytical discipline, and commitment to continued learning distinguish her among emerging legal minds.\\n\\nKnown for her clarity of thought and respectful professionalism, she contributes refined research, thoughtful advisory work, and principled perspective to every constitutional matter she engages with."
        }'>

        <figure class="member-figure" aria-hidden="true">
          <img src="new_shivani.jpg" alt="Adv. Shivani Shastri" loading="lazy" decoding="async" data-focus="50% 18%">
          <div class="initials" aria-hidden="true">SS</div>
          <div class="sheen" aria-hidden="true"></div>
        </figure>

        <div class="bio">
          <h3>Adv. Shivani Shastri</h3>
          <p class="role">Consulting Advocate – Constitutional Affairs</p>
          <p class="meta">Research &amp; Advisory</p>
        </div>
      </article>

      <!-- ================= SANJAY KUMAR (no bio yet) ================= -->
      <article class="member" role="listitem" tabindex="0"
        data-name="Adv. Sanjay Kumar"
        data-bio="">
        <figure class="member-figure" aria-hidden="true">
          <img src="sanjay.jpg" alt="Adv. Sanjay Kumar" loading="lazy" decoding="async" data-focus="50% 20%">
          <div class="initials" aria-hidden="true">SK</div>
          <div class="sheen" aria-hidden="true"></div>
        </figure>

        <div class="bio">
          <h3>Adv. Sanjay Kumar</h3>
          <p class="role">Associate Counsel – Criminal Defence</p>
          <p class="meta">Photo coming soon</p>
        </div>
      </article>

    </div>
  </div>

  <!-- ================= MODAL ================= -->
  <div id="profileModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc" hidden>
    <div class="modal-backdrop" data-close="true"></div>

    <div class="modal-panel" role="document" aria-live="polite">
      <button class="modal-close" aria-label="Close profile" data-close="true">&times;</button>

      <div class="modal-content">
        <header class="modal-head">
          <h3 id="modalTitle"></h3>
          <p class="modal-sub" id="modalSub"></p>
        </header>

        <blockquote class="modal-quote" id="modalQuote" aria-hidden="true"></blockquote>

        <section id="modalDesc" class="modal-body"></section>

        <footer class="modal-foot">
          <button class="btn btn-primary" data-close="true">Close</button>
        </footer>
      </div>
    </div>
  </div>

  <!-- ================= SCRIPT ================= -->
  <script>
    (function () {
      /* ---------------- Utilities ---------------- */
      function getInitials(name) {
        if (!name) return '';
        const parts = name.trim().split(/\s+/).filter(Boolean);
        if (parts.length === 1) return parts[0].slice(0,2).toUpperCase();
        return (parts[0][0] + parts[parts.length - 1][0]).toUpperCase();
      }

      function safeParseJSON(str) {
        if (!str) return null;
        try { return JSON.parse(str); }
        catch (e) { return null; }
      }

      /* ---------------- Image fallback & focus handling ---------------- */
      document.querySelectorAll('.member').forEach(member => {
        const fig = member.querySelector('.member-figure');
        const img = fig && fig.querySelector('img');
        const initialsEl = fig.querySelector('.initials');
        const name = member.getAttribute('data-name') || member.querySelector('h3')?.textContent || '';

        if (initialsEl) initialsEl.textContent = getInitials(name);

        if (!img) {
          if (initialsEl) initialsEl.style.display = 'grid';
          return;
        }

        // respect data-focus
        const focus = img.getAttribute('data-focus');
        img.style.objectFit = 'cover';
        img.style.objectPosition = focus || 'center center';

        function update() {
          if (img.complete && img.naturalWidth && img.naturalWidth > 0) {
            img.style.display = 'block';
            if (initialsEl) initialsEl.style.display = 'none';
          } else {
            img.style.display = 'none';
            if (initialsEl) initialsEl.style.display = 'grid';
          }
        }

        img.addEventListener('load', update);
        img.addEventListener('error', update);
        setTimeout(update, 60);
      });

      /* ---------------- Reveal & pointer parallax (degrade for reduced motion) ---------------- */
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (!prefersReduced && 'IntersectionObserver' in window) {
        const obs = new IntersectionObserver((entries, o) => {
          entries.forEach(e => {
            if (e.isIntersecting) {
              e.target.classList.add('in-view');
              o.unobserve(e.target);
            }
          });
        }, { threshold: 0.16 });
        document.querySelectorAll('.member').forEach(m => obs.observe(m));
      } else {
        document.querySelectorAll('.member').forEach(m => m.classList.add('in-view'));
      }

      if (window.matchMedia('(pointer: fine)').matches && !prefersReduced) {
        document.querySelectorAll('.member').forEach(member => {
          const img = member.querySelector('.member-figure img');

          function onMove(e) {
            const rect = member.getBoundingClientRect();
            const cx = rect.left + rect.width / 2;
            const cy = rect.top + rect.height / 2;
            const dx = (e.clientX - cx) / rect.width;
            const dy = (e.clientY - cy) / rect.height;
            const tx = dx * 8;
            const ty = dy * 8;
            const rx = dy * -2.8;
            const ry = dx * 5;

            if (img && img.style.display !== 'none') {
              img.style.transform = `translate(${tx}px, ${ty}px) scale(1.06) rotateX(${rx}deg) rotateY(${ry}deg)`;
            }
            member.style.transform = `translateY(-6px) rotateX(${rx / 6}deg) rotateY(${ry / 8}deg)`;
          }

          function onLeave() {
            const imgEl = member.querySelector('.member-figure img');
            if (imgEl) imgEl.style.transform = '';
            member.style.transform = '';
          }

          member.addEventListener('pointermove', onMove);
          member.addEventListener('pointerleave', onLeave);
          member.addEventListener('pointercancel', onLeave);
          member.addEventListener('blur', onLeave);
        });
      }

      /* ---------------- Accessible modal (paragraphs + focus trap) ---------------- */
      const modal = document.getElementById('profileModal');
      const modalPanel = modal.querySelector('.modal-panel');
      const modalTitle = document.getElementById('modalTitle');
      const modalSub = document.getElementById('modalSub');
      const modalBody = document.getElementById('modalDesc');
      const modalQuote = document.getElementById('modalQuote');
      let lastFocused = null;

      // make innerHTML paragraphs from double-linebreaks
      function contentToParagraphs(text) {
        if (!text) return '';
        return text
          .split(/\n\s*\n/) // split on blank line
          .map(p => `<p>${escapeHtml(p.trim())}</p>`)
          .join('');
      }

      // simple HTML escape to be safe
      function escapeHtml(str) {
        return str.replace(/[&<>"']/g, function (m) {
          return ({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;', "'":'&#39;' })[m];
        });
      }

      // Focus trap implementation (robust enough for modal)
      let focusable = [];
      function trapFocus(container) {
        focusable = Array.from(container.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])'))
          .filter(n => n.offsetParent !== null);
        if (focusable.length === 0) return;
        const first = focusable[0];
        const last = focusable[focusable.length - 1];

        function handleKey(e) {
          if (e.key === 'Tab') {
            if (e.shiftKey && document.activeElement === first) {
              e.preventDefault();
              last.focus();
            } else if (!e.shiftKey && document.activeElement === last) {
              e.preventDefault();
              first.focus();
            }
          } else if (e.key === 'Escape') {
            closeModal();
          }
        }
        container.addEventListener('keydown', handleKey);
        // store handler so we can remove later
        container._trapHandler = handleKey;
      }
      function releaseTrap(container) {
        if (container && container._trapHandler) {
          container.removeEventListener('keydown', container._trapHandler);
          delete container._trapHandler;
        }
      }

      function openModal(data, opener) {
        lastFocused = opener || document.activeElement;
        modalTitle.textContent = data.title || '';
        modalSub.textContent = data.subtitle || '';
        modalQuote.textContent = data.quote || '';
        modalQuote.style.display = data.quote ? 'block' : 'none';
        modalBody.innerHTML = contentToParagraphs(data.content || '');
        modal.removeAttribute('hidden');
        document.documentElement.style.overflow = 'hidden';
        setTimeout(() => { // allow CSS to settle then focus
          const focusTarget = modal.querySelector('.modal-close') || modal.querySelector('button, [tabindex]');
          if (focusTarget) focusTarget.focus();
          trapFocus(modal);
        }, 50);
        modal.classList.add('open');
        modal.setAttribute('aria-hidden', 'false');
      }

      function closeModal() {
        modal.classList.remove('open');
        modal.setAttribute('hidden', '');
        releaseTrap(modal);
        document.documentElement.style.overflow = '';
        if (lastFocused && typeof lastFocused.focus === 'function') lastFocused.focus();
      }

      // open on click / keyboard
      document.querySelectorAll('.member').forEach(member => {
        member.addEventListener('click', (e) => {
          const raw = member.getAttribute('data-bio');
          const data = safeParseJSON(raw);
          if (data) openModal(data, member);
        });
        member.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            const raw = member.getAttribute('data-bio');
            const data = safeParseJSON(raw);
            if (data) openModal(data, member);
          }
        });
      });

      // close handlers (backdrop, buttons)
      modal.addEventListener('click', (e) => {
        if (e.target.matches('[data-close]') || e.target.classList.contains('modal-backdrop')) closeModal();
      });
      // close buttons inside modal (marked data-close)
      modal.querySelectorAll('[data-close]').forEach(btn => {
        btn.addEventListener('click', closeModal);
      });

      // escape to close when modal open
      window.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && !modal.hasAttribute('hidden')) closeModal();
      });

      // ensure modal hidden state on initial load
      modal.setAttribute('hidden', '');

    })();
  </script>

  <!-- ================= STYLES ================= -->
  <style>
    /* ---------- Section wrapper & animated background ---------- */
    .team-section-premium {
      position: relative;
      padding: 64px 18px;
      color: #e9f0fb;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      overflow: hidden;
      isolation: isolate;
      -webkit-font-smoothing: antialiased;
    }

    .team-section-premium::before {
      content: "";
      position: absolute;
      inset: -20% -10%;
      z-index: 0;
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(135,123,255,0.12), transparent 8%),
        radial-gradient(900px 500px at 90% 80%, rgba(20,255,220,0.04), transparent 8%),
        linear-gradient(180deg, rgba(3,8,18,0.88) 0%, rgba(8,12,20,0.95) 100%);
      filter: blur(26px) saturate(1.05);
      animation: bgShift 12s linear infinite alternate;
      pointer-events: none;
    }
    @keyframes bgShift {
      0% { transform: translate3d(-1.8%, -1%, 0) rotate(0.01deg); }
      50% { transform: translate3d(2%, 1.2%, 0) rotate(-0.02deg); }
      100% { transform: translate3d(-0.8%, -0.4%, 0) rotate(0.01deg); }
    }
    .team-section-premium::after {
      content: "";
      position: absolute;
      inset: 0;
      z-index: 1;
      pointer-events: none;
      background-image: radial-gradient(rgba(255,255,255,0.01) 1px, transparent 1px);
      background-size: 12px 12px;
      opacity: 0.45;
      mix-blend-mode: overlay;
    }

    .wrap { position: relative; z-index: 2; max-width: 1180px; margin: 0 auto; }

    .team-header { margin-bottom: 26px; }
    .team-header h2 { margin: 0; color: #fff; font-weight: 700; letter-spacing: -.02em; font-size: 1.95rem; }
    .team-header .muted { margin: 6px 0 0; color: #98a9c0; font-size: .95rem; }

    /* Grid */
    .team-grid { display: grid; gap: 20px; grid-template-columns: 1fr; }
    @media (min-width: 720px) { .team-grid { grid-template-columns: repeat(2, 1fr); gap: 22px; } }
    @media (min-width: 1100px) { .team-grid { grid-template-columns: repeat(4, 1fr); gap: 28px; } }

    /* Card */
    .member {
      position: relative;
      display: flex;
      flex-direction: column;
      border-radius: 14px;
      overflow: visible;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.04);
      box-shadow: 0 8px 30px rgba(2,6,23,0.55);
      transition: transform .45s cubic-bezier(.2,.9,.2,1), box-shadow .45s;
      transform-origin: center;
      min-height: 260px;
      outline: none;
      will-change: transform;
      backface-visibility: hidden;
    }
    .member.in-view { transform: translateY(0); opacity: 1; }
    .member:hover, .member:focus { transform: translateY(-6px); box-shadow: 0 22px 60px rgba(2,8,26,0.78); z-index: 3; cursor: pointer; }

    /* Figure */
    .member-figure {
      position: relative;
      width: 100%;
      aspect-ratio: 4/3;
      overflow: hidden;
      border-radius: 12px;
      display: grid;
      place-items: center;
      background: linear-gradient(180deg, rgba(10,14,20,0.35), rgba(6,8,14,0.5));
    }
    .member-figure img {
      width: 110%;
      height: 110%;
      object-fit: cover;
      object-position: center center;
      display: block;
      transform: scale(1);
      transition: transform .9s cubic-bezier(.15,.9,.2,1), filter .7s;
      filter: contrast(1.01) saturate(.96) brightness(.96);
      will-change: transform;
    }
    .member:hover .member-figure img { transform: scale(1.08); }

    .sheen {
      pointer-events: none;
      position: absolute;
      left: -30%;
      top: -50%;
      width: 160%;
      height: 220%;
      background: linear-gradient(120deg, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.02) 20%, rgba(255,255,255,0.0) 50%);
      transform: rotate(22deg) translateX(-40%);
      mix-blend-mode: screen;
      filter: blur(18px) saturate(1.05);
      transition: transform 1.6s linear, opacity .6s;
      opacity: 0.12;
    }
    .member:hover .sheen { transform: translateX(30%) rotate(22deg); opacity: 0.22; }

    /* Initials fallback */
    .initials {
      position: absolute;
      inset: 0;
      display: none; /* toggled by JS */
      place-items: center;
      font-weight: 700;
      color: #ffffff;
      background: linear-gradient(180deg, rgba(34,41,60,0.92), rgba(17,22,34,0.96));
      font-size: 1.125rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      -webkit-backdrop-filter: blur(6px);
      backdrop-filter: blur(6px);
    }

    /* Bio */
    .bio {
      padding: 14px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      justify-content: center;
      align-items: flex-start;
      margin-top: 10px;
    }
    .bio h3 { margin: 0; font-size: 1rem; color: #fff; line-height: 1.15; }
    .role { margin: 0; color: #b7c7da; font-size: .9rem; }
    .meta { margin: 0; color: #8ea4bf; font-size: .82rem; }

    /* subtle glow */
    .member::after {
      content: "";
      position: absolute;
      bottom: -10px;
      left: 10%;
      width: 80%;
      height: 14px;
      filter: blur(18px);
      background: radial-gradient(closest-side, rgba(28,120,255,0.05), transparent 60%);
      opacity: 0.6;
      pointer-events: none;
      transition: opacity .4s;
    }
    .member:hover::after { opacity: 1; }

    /* ---------- Modal styles (sober paragraph layout) ---------- */
    .modal[hidden] { display: none; }
    .modal {
      position: fixed;
      inset: 0;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    .modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(2,6,20,0.64);
      backdrop-filter: blur(6px);
      transition: opacity .35s ease;
    }
    .modal-panel {
      position: relative;
      z-index: 3;
      max-width: 720px;
      width: calc(100% - 40px);
      margin: 16px;
      border-radius: 12px;
      transform: translateY(10px) scale(.995);
      transition: transform .36s cubic-bezier(.2,.9,.2,1), opacity .36s;
      box-shadow: 0 24px 80px rgba(4,8,20,0.75);
    }
    .modal.open .modal-panel { transform: translateY(0) scale(1); }
    .modal-content {
      background: linear-gradient(180deg, rgba(10,14,22,0.98), rgba(6,8,14,0.99));
      padding: 22px;
      color: #eaf3ff;
      border-radius: 12px;
      overflow: hidden;
    }
    .modal-close {
      position: absolute;
      right: 12px;
      top: 10px;
      background: transparent;
      border: none;
      color: #cfe6ff;
      font-size: 28px;
      line-height: 1;
      cursor: pointer;
      padding: 6px;
    }
    .modal-close:focus { outline: 2px solid rgba(145,180,255,0.22); border-radius: 6px; }

    .modal-head h3 { margin: 0 0 6px 0; font-size: 1.2rem; color: #fff; }
    .modal-sub { margin: 0 0 12px 0; color: #9fb0c9; font-size: .95rem; }

    .modal-quote {
      margin: 8px 0 12px 0;
      padding-left: 12px;
      border-left: 3px solid rgba(77,124,255,0.18);
      color: #cfe2fc;
      font-style: italic;
    }

    /* Sober paragraph styling: limited line length, comfortable leading */
    .modal-body {
      color: #dfeafc;
      font-size: 0.98rem;
      line-height: 1.6;
      max-width: 620px;
      margin: 0 auto;
    }
    .modal-body p { margin: 0 0 14px 0; text-align: left; opacity: 0.95; }

    .modal-foot { display:flex; justify-content:flex-end; gap:10px; margin-top: 6px; }
    .btn { border: none; padding: 8px 14px; border-radius: 8px; cursor: pointer; font-weight:600; }
    .btn-primary { background: linear-gradient(180deg,#36a0ff,#0d6fe8); color: white; box-shadow: 0 8px 24px rgba(13,111,232,0.18); }
    .btn-primary:focus { outline: 2px solid rgba(13,111,232,0.22); }

    /* responsive tweaks */
    @media (max-width: 520px) {
      .member { min-height: 220px; }
      .member-figure { aspect-ratio: 16/10; border-radius: 10px; }
      .modal-panel { width: calc(100% - 24px); margin: 10px; }
      .modal-content { padding: 16px; }
      .modal-close { right: 8px; top: 8px; font-size: 22px; }
      .modal-body { font-size: 0.96rem; line-height: 1.55; }
    }

    /* reduce motion accessibility */
    @media (prefers-reduced-motion: reduce) {
      .team-section-premium::before, .member-figure img, .member, .sheen, .modal .modal-panel { animation: none !important; transition: none !important; transform: none !important; }
    }
  </style>
</section>
<!-- ========================= END TEAM SECTION ========================= -->
      <!-- ARTICLES -->
      <section id="articles" aria-labelledby="articlesHeading" style="margin-top:0;">
        <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px;flex-wrap:wrap">
          <div>
            <h2 id="articlesHeading">Articles & Insights</h2>
            <p class="muted" style="margin-top:6px">Short guides, practical steps and case insights — written for clients and families.</p>
          </div>

          <div style="display:flex;gap:8px;align-items:center">
            <label for="articleSearch" class="muted" style="font-size:.88rem;margin-right:6px">Search</label>
            <input id="articleSearch" type="search" placeholder="Search articles…" aria-label="Search articles" style="padding:8px;border-radius:10px;border:1px solid #e2e6ef;min-width:160px">
            <div id="articleTags" role="list" aria-label="Filter by tag" style="display:flex;gap:8px;flex-wrap:wrap;margin-left:6px"></div>
          </div>
        </div>

        <div id="articlesMeta" style="display:flex;gap:12px;align-items:center;margin-top:10px;flex-wrap:wrap">
          <div class="muted" id="articlesCount" aria-live="polite">Showing <strong id="articlesVisible">0</strong> articles</div>
          <div style="margin-left:auto" class="muted">Sort:
            <select id="articlesSort" aria-label="Sort articles" style="padding:6px;border-radius:8px;border:1px solid #e6ebf5;margin-left:8px">
              <option value="newest">Newest</option>
              <option value="oldest">Oldest</option>
            </select>
          </div>
        </div>

        <div id="articlesGrid"></div>

        <div id="articlePreview" style="display:none;position:fixed;inset:0;background:rgba(2,6,23,0.6);z-index:1400;align-items:center;justify-content:center;padding:18px">
          <article role="dialog" aria-modal="true" aria-labelledby="previewTitle" style="max-width:820px;width:100%;background:var(--card);padding:18px;border-radius:10px;box-shadow:var(--shadow-2);overflow:auto;max-height:80vh">
            <header style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px">
              <div>
                <h3 id="previewTitle" style="margin:0">Title</h3>
                <div class="muted" id="previewMeta" style="margin-top:6px;font-size:.95rem"></div>
              </div>
              <button id="previewClose" class="btn btn--ghost" aria-label="Close preview">Close</button>
            </header>
            <div id="previewBody" style="margin-top:12px;color:var(--muted)"></div>
          </article>
        </div>
      </section>

      <!-- DICTIONARY -->
      <section id="dictionary" aria-labelledby="dictionaryHeading">
        <h2 id="dictionaryHeading">Legal Word Helper (Dictionary)</h2>
        <p class="muted">Type a simple term like “FIR”, “maintenance”, “custody”, “bail” — get a plain English meaning.</p>

        <div id="dictionaryCard" class="dict-layout">
          <div>
            <label for="dictInput">Search legal term</label>
            <div class="dict-input-wrap">
              <input id="dictInput" type="search" placeholder="e.g. FIR, maintenance, alimony, custody" aria-label="Search legal term">
              <button id="dictSearchBtn" class="btn btn--primary btn--small" type="button">Search</button>
            </div>
            <p class="dict-note">Tip: Hindi / Hinglish words like “baarakhasta”, “talak”, “girftari” are also recognised for many terms.</p>
          </div>

          <div class="dict-results" id="dictResults" aria-live="polite" aria-atomic="true">
            <div class="muted">Start by typing a term above. Example: <strong>“Section 125”</strong> or <strong>“custody”</strong>.</div>
          </div>
        </div>
      </section>

      <!-- PAYMENT -->
      <section id="payment">
        <h2 style="color:#e8f2ff">Secure Payment — Titanium</h2>
        <p class="muted" style="color:#bfcfe0">Fast, secure payments. Use UPI or bank transfer — receipts available on request.</p>

        <div class="titanium-grid" style="margin-top:18px;align-items:stretch">
          <div class="titanium-card" aria-labelledby="tupi" style="background-image: linear-gradient(180deg, rgba(2,6,10,0.66), rgba(8,12,16,0.66)), url('pay_bg.jpg'); background-size:cover; background-position:center; border:1px solid rgba(255,255,255,0.04);">
            <h4 id="tupi" style="color:#e6f2ff">UPI — Instant Payment</h4>

            <div style="margin-top:6px;color:rgba(235,245,255,0.9)">Scan to pay — encrypted & secure</div>

            <div class="titanium-qr-frame" style="margin-top:12px;">
              <img src="upi_qr.jpg" alt="UPI QR — The Justice Firm" loading="lazy" decoding="async">
            </div>

            <div style="text-align:center;margin-top:8px;color:#dbefff">UPI ID: <strong id="upi-id" style="color:#fff">adv.shastri@oksbi</strong></div>

            <div class="titanium-actions" style="margin-top:auto">
              <button id="copyUpiBtn" class="titanium-btn" type="button" aria-label="Copy UPI ID">Copy UPI</button>
              <button id="downloadQR" class="titanium-btn" type="button" aria-label="Download QR">Download QR</button>
            </div>
          </div>

          <div class="bank-titanium" aria-labelledby="tbank" style="background-image: linear-gradient(180deg, rgba(4,8,12,0.7), rgba(6,10,14,0.7)), url('pay_bg.jpg'); background-size:cover; background-position:center;">
            <div style="display:flex;align-items:center;gap:10px;justify-content:center">
              <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 12h18" stroke="#dfeeff" stroke-width="1.2" stroke-linecap="round"/></svg>
              <h4 id="tbank">Bank Transfer</h4>
            </div>

            <div style="text-align:center;font-size:1rem;font-weight:600;color:#dbefff">
              The Justice Firm — Canara Bank<br>
              A/c: <strong>5328127000035</strong><br>
              IFSC: <strong>CNRB0005131</strong>
            </div>

            <div style="display:flex;gap:12px;justify-content:center;margin-top:auto">
              <a id="downloadReceipt" class="titanium-btn" href="#" style="color:#dbefff; text-decoration:none; display:inline-flex; align-items:center; justify-content:center;">Download Receipt</a>
              <a class="titanium-btn" href="https://wa.me/919454183793" target="_blank" rel="noopener" style="background:linear-gradient(90deg,#1b6fb2,#083b9a); color:#fff; text-decoration:none;">Need Help</a>
            </div>
          </div>
        </div>

        <script>
          (function(){
            const copyBtn = document.getElementById('copyUpiBtn');
            const upiEl = document.getElementById('upi-id');
            const downloadBtn = document.getElementById('downloadQR');

            function showTemp(msg){
              const elId = 'tempMessageSmall';
              let el = document.getElementById(elId);
              if(!el){
                el = document.createElement('div'); el.id = elId;
                el.style.position = 'fixed'; el.style.left='16px'; el.style.bottom='18px'; el.style.background='#03102a'; el.style.color='#fff'; el.style.padding='10px 12px'; el.style.borderRadius='8px'; el.style.boxShadow='0 8px 30px rgba(0,0,0,0.18)'; el.style.zIndex='9999'; document.body.appendChild(el);
              }
              el.textContent = msg; el.style.opacity='1';
              setTimeout(()=> el.style.opacity='0', 2200);
            }

            copyBtn && copyBtn.addEventListener('click', async ()=> {
              const upi = (upiEl && upiEl.textContent || '').trim();
              if(!upi){ showTemp('UPI not found'); return; }
              try {
                if(navigator.clipboard && navigator.clipboard.writeText){
                  await navigator.clipboard.writeText(upi);
                  showTemp('UPI copied');
                } else {
                  window.prompt('Copy UPI ID', upi);
                }
              } catch(e){
                window.prompt('Copy UPI ID', upi);
              }
            });

            downloadBtn && downloadBtn.addEventListener('click', ()=> {
              const a = document.createElement('a'); a.href = 'upi_qr.jpg'; a.download = 'justicefirm_upi_qr.jpg'; document.body.appendChild(a); a.click(); a.remove();
            });

            const receipt = document.getElementById('downloadReceipt');
            receipt && receipt.addEventListener('click', (e)=>{
              e.preventDefault();
              const txt = `Receipt — The Justice Firm\nDate: ${new Date().toLocaleDateString('en-IN')}\nPaid to: The Justice Firm\nUPI ID: ${(upiEl && upiEl.textContent) || ''}\nReference: (enter transaction id)\n\nThank you.`;
              const blob = new Blob([txt], { type: 'text/plain' });
              const url = URL.createObjectURL(blob);
              const a = document.createElement('a');
              a.href = url; a.download = 'receipt.txt'; document.body.appendChild(a); a.click();
              setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); },1500);
            });
          })();
        </script>
      </section>

      <!-- CONTACT -->
      <section id="contact">
        <h2>Contact & Consultation</h2>

        <div class="contact-grid" style="display:grid;grid-template-columns:1fr minmax(220px,360px);gap:18px;margin-top:12px;align-items:start">
          <!-- Form -->
          <form id="contactForm" class="contact-form" action="https://formspree.io/f/mjkqwgje" method="POST" data-reveal>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
              <div>
                <label for="name">Full Name</label>
                <input id="name" name="name" placeholder="Full Name" required>
              </div>
              <div>
                <label for="phone">Phone (+91)</label>
                <input id="phone" name="phone" type="tel" placeholder="Phone (+91)" required>
              </div>
            </div>

            <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px">
              <div>
                <label for="email">Email</label>
                <input id="email" name="email" type="email" placeholder="Email" required>
              </div>
              <div>
                <label for="matter">Matter</label>
                <select id="matter" name="matter">
                  <option>Family Matter</option>
                  <option>Criminal</option>
                  <option>Civil / Property</option>
                  <option>Mediation</option>
                  <option>Other</option>
                </select>
              </div>
            </div>

            <label for="message" style="margin-top:10px">Brief description</label>
            <textarea id="message" name="message" rows="4" placeholder="Brief description…" required></textarea>

            <input type="text" name="_gotcha" style="display:none" aria-hidden="true" tabindex="-1">

            <div id="contactMessage" class="form-message" role="status" aria-live="polite" aria-atomic="true"></div>

            <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap">
              <button class="btn btn--primary" type="submit">Send Request</button>
              <button class="btn btn--ghost" id="scheduleCallBtn" type="button">Schedule Call</button>
            </div>
          </form>

          <!-- Aside -->
          <aside class="contact-aside panel" data-reveal aria-label="Contact information" style="background-image:url('contact_bg.jpg'); background-size:cover; background-position:center;">
            <div class="panel-content" style="background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.84)); padding:12px; border-radius:10px;">
              <h4>Office Address</h4>
              <p class="muted">Rajrooppur, Allahabad (Prayagraj), Uttar Pradesh</p>

              <h4 style="margin-top:12px">Timings</h4>
              <p class="muted">Mon–Sun · 9:00 AM – 9:00 PM</p>
            </div>

            <div class="contact-actions" aria-hidden="false" style="display:flex;flex-direction:column;gap:10px;padding:12px">
              <a href="https://wa.me/919454183793" class="btn btn--accent" target="_blank" rel="noopener" aria-label="WhatsApp chat">
                💬 WhatsApp — Chat Now
              </a>

              <a href="tel:+918433438419" class="btn btn--primary" aria-label="Call">
                📞 Call — Immediate Response
              </a>
            </div>
          </aside>
        </div>
      </section>

    </main>

    <footer>
      <div>
        <div style="font-weight:700">The Justice Firm</div>
        <div class="muted">© <span id="year"></span> • All Rights Reserved</div>
      </div>
      <div><a href="disclaimer.html">Disclaimer & Privacy</a> • <a href="terms.html">Terms</a></div>
    </footer>
  </div>

  <!-- FAB -->
  <div class="fab" id="fab" aria-expanded="false" aria-label="Quick contact">
    <div class="fab__menu" role="menu" aria-hidden="true" id="fabMenu">
      <a class="fab__item" href="https://wa.me/919454183793" target="_blank" rel="noopener" role="menuitem" id="fabWa">WhatsApp</a>
      <a class="fab__item" href="tel:+918433438419" role="menuitem" id="fabCall">Call</a>
      <a class="fab__item" href="#dictionary" role="menuitem">Legal Dictionary</a>
    </div>

    <button class="fab__main" id="fabToggle" aria-label="Open quick contact" title="Contact">
      <svg id="fabIcon" width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 5v14" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M5 12h14" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>

  <!-- Back to top -->
  <button id="backTop" aria-label="Back to top" title="Back to top" style="position:fixed;right:18px;bottom:96px;display:none;background:var(--accent);color:#fff;width:46px;height:46px;border-radius:999px;align-items:center;justify-content:center;box-shadow:var(--btn-shadow);border:0;cursor:pointer;font-size:1.1rem;">↑</button>

  <!-- Booking Modal -->
  <div id="bookingModal" aria-hidden="true" aria-labelledby="modalTitle" style="display:none;position:fixed;inset:0;background:rgba(2,6,23,0.5);backdrop-filter:blur(4px);align-items:center;justify-content:center;z-index:1200;padding:18px">
    <div role="dialog" aria-modal="true" aria-labelledby="modalTitle" style="background:var(--card);padding:20px;border-radius:12px;max-width:420px;width:100%">
      <h3 id="modalTitle">Request Consultation</h3>
      <p class="muted">Choose a date — we will confirm via email.</p>
      <form id="bookingForm" action="https://formspree.io/f/myzqwkvv" method="POST">
        <label for="bk-client">Full name</label>
        <input id="bk-client" name="client" placeholder="Full name" required style="margin-top:10px">
        <label for="bk-email">Email</label>
        <input id="bk-email" name="email" type="email" placeholder="Email" required style="margin-top:10px">
        <label for="bk-date">Date</label>
        <input id="bk-date" name="date" type="date" required style="margin-top:10px">
        <input type="text" name="_gotcha" style="display:none" aria-hidden="true" tabindex="-1">
        <div id="bookingMessage" class="form-message" role="status" aria-live="polite" aria-atomic="true"></div>
        <div style="display:flex;gap:8px;margin-top:14px">
          <button class="btn btn--primary" type="submit">Request</button>
          <button class="btn btn--ghost" type="button" id="cancelBookingBtn">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Chat widget (no auto-open) -->
  <div id="ljf-chat" aria-live="polite" aria-atomic="true" style="position:fixed;left:18px;bottom:22px;z-index:1600">
    <button id="ljf-toggle" class="chat-toggle" aria-expanded="false" aria-label="Open chat" style="width:56px;height:56px;border-radius:999px;background:linear-gradient(180deg,#052c78,#083b9a);color:#fff;border:0;box-shadow:0 12px 36px rgba(5,44,120,0.18);">
      💬
    </button>
    <div id="ljf-panel" class="chat-panel" style="display:none;position:fixed;left:18px;bottom:90px;width:360px;max-width:92vw;background:#fff;border-radius:12px;box-shadow:0 28px 80px rgba(7,12,25,0.18);overflow:hidden;flex-direction:column;">
      <div style="padding:12px 14px;background:linear-gradient(90deg,#083b9a,#052c78);color:#fff;display:flex;align-items:center;justify-content:space-between">
        <div style="display:flex;gap:10px;align-items:center"><div style="width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,#083b9a,#052c78);display:grid;place-items:center;color:#fff;font-weight:800">TJ</div><div><div style="font-weight:700">Chat with The Justice Firm</div><div style="font-size:.85rem;color:rgba(255,255,255,0.9)">Quick answers or book</div></div></div>
        <div style="display:flex;gap:8px"><button id="ljf-close" style="background:transparent;border:0;color:#fff;font-size:18px">✕</button></div>
      </div>
      <div id="ljf-body" style="padding:12px;height:340px;overflow:auto;background:#f7f9fc;display:flex;flex-direction:column;">
        <div class="message from-bot" style="background:#fff;padding:10px;border-radius:10px;display:inline-block;box-shadow:var(--shadow-1)">Hello — I'm the virtual assistant. Try: <button class="chip" data-suggest="book">Book consultation</button> <button class="chip" data-suggest="fees">Fees</button> <button class="chip" data-suggest="docs">Documents</button></div>
      </div>
      <div style="padding:10px;border-top:1px solid #eef3fb;display:flex;gap:8px">
        <input id="ljf-input" type="text" placeholder="Type a quick question…" style="flex:1;padding:10px;border-radius:8px;border:1px solid #e6ebf5">
        <button id="ljf-send" class="small-cta" style="background:linear-gradient(90deg,#083b9a,#052c78);color:#fff;border-radius:8px;padding:8px 10px;border:0;cursor:pointer;">Send</button>
      </div>
    </div>
  </div>

  <script>
    /* small utilities */
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));
    const bodyEl = document.body;

    // mobile nav
    const navToggle = document.getElementById('navToggle');
    const mobilePanel = document.getElementById('mobileNavPanel');
    const mobileClose = document.getElementById('mobileNavClose');
    function openMobileNav(){ if(!mobilePanel) return; mobilePanel.classList.add('open'); mobilePanel.setAttribute('aria-hidden','false'); navToggle && navToggle.setAttribute('aria-expanded','true'); bodyEl.style.overflow='hidden'; const link = mobilePanel.querySelector('a'); if(link) link.focus(); }
    function closeMobileNav(){ if(!mobilePanel) return; mobilePanel.classList.remove('open'); mobilePanel.setAttribute('aria-hidden','true'); navToggle && navToggle.setAttribute('aria-expanded','false'); bodyEl.style.overflow=''; navToggle && navToggle.focus(); }
    navToggle && navToggle.addEventListener('click', ()=> mobilePanel && mobilePanel.classList.contains('open') ? closeMobileNav() : openMobileNav());
    mobileClose && mobileClose.addEventListener('click', closeMobileNav);
    mobilePanel && mobilePanel.addEventListener('click', (e)=> { if(e.target.matches('a.mobile-link')) closeMobileNav(); });

    // clock (Asia/Kolkata)
    function updateClock(){
      try {
        const opt = { timeZone: 'Asia/Kolkata', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
        const now = new Date();
        const t = now.toLocaleTimeString('en-IN', opt) + ' IST';
        const el = document.getElementById('clock-nav');
        if (el) el.textContent = t;
        const navClock = document.getElementById('clock');
        if (navClock) navClock.textContent = t;
      } catch(e) { console.error('Clock error', e); }
    }
    setInterval(updateClock, 1000); updateClock();

    // next slot
    (function setNextSlot(){
      const el = document.getElementById('nextSlot');
      const now = new Date();
      const inIST = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }));
      const next = new Date(inIST);
      const hour = inIST.getHours();
      if (hour >= 16) next.setDate(next.getDate() + 1);
      next.setHours(11,0,0,0);
      const opt = { weekday:'short', day:'numeric', month:'short', hour:'2-digit', minute:'2-digit', timeZone:'Asia/Kolkata', hour12:false };
      if (el) el.textContent = next.toLocaleString('en-IN', opt) + ' IST';
    })();

    // calendar
    function generateCalendar(containerId='calendar'){
      const el = document.getElementById(containerId);
      if(!el) return;
      const nowIST = new Date(new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }));
      const year = nowIST.getFullYear(); const month = nowIST.getMonth(); const today = nowIST.getDate();
      const months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month +1, 0).getDate();
      let html = `<table aria-label="${months[month]} ${year}"><caption style="text-align:left;padding:8px 0;font-weight:700">${months[month]} ${year}</caption><thead><tr><th scope="col">Su</th><th scope="col">Mo</th><th scope="col">Tu</th><th scope="col">We</th><th scope="col">Th</th><th scope="col">Fr</th><th scope="col">Sa</th></tr></thead><tbody>`;
      let d = 1;
      for(let r=0; r<6; r++){
        html += '<tr>';
        for(let c=0;c<7;c++){
          if(r===0 && c<firstDay){ html += '<td aria-hidden="true"></td>'; }
          else if(d>daysInMonth){ html += '<td aria-hidden="true"></td>'; }
          else { const isToday = (d === today); html += `<td ${isToday ? 'class="today" aria-current="date"' : ''}>${d}</td>`; d++; }
        }
        html += '</tr>';
        if(d>daysInMonth) break;
      }
      html += '</tbody></table>';
      el.innerHTML = html;
    }
    generateCalendar();
    (function scheduleMidnightRefresh(){ const now = new Date(); const nextMidnight = new Date(now.getFullYear(), now.getMonth(), now.getDate()+1, 0, 0, 2); const ms = nextMidnight - now; setTimeout(()=>{ generateCalendar(); scheduleMidnightRefresh(); }, ms); })();

    // booking modal
    const bookingModal = document.getElementById('bookingModal');
    const requestSlotBtn = document.getElementById('requestSlotBtn');
    const scheduleCallBtn = document.getElementById('scheduleCallBtn');
    const cancelBookingBtn = document.getElementById('cancelBookingBtn');
    function openBooking(){ if(!bookingModal) return; bookingModal.style.display='flex'; bookingModal.setAttribute('aria-hidden','false'); bodyEl.style.overflow='hidden'; const first = bookingModal.querySelector('input'); if(first) first.focus(); }
    function closeBooking(){ if(!bookingModal) return; bookingModal.style.display='none'; bookingModal.setAttribute('aria-hidden','true'); bodyEl.style.overflow=''; requestSlotBtn && requestSlotBtn.focus(); }
    requestSlotBtn && requestSlotBtn.addEventListener('click', openBooking);
    scheduleCallBtn && scheduleCallBtn.addEventListener('click', openBooking);
    cancelBookingBtn && cancelBookingBtn.addEventListener('click', closeBooking);
    bookingModal && bookingModal.addEventListener('click', (e)=>{ if(e.target === bookingModal) closeBooking(); });

    // small inline toast
    function showInlineTemp(msg, ms=2500){
      let el = document.getElementById('tempMessage');
      if(!el){
        el = document.createElement('div');
        el.id = 'tempMessage';
        el.style.position = 'fixed';
        el.style.left = '14px';
        el.style.bottom = '18px';
        el.style.background = '#03102a';
        el.style.color = '#fff';
        el.style.padding = '10px 12px';
        el.style.borderRadius = '8px';
        el.style.boxShadow = '0 8px 30px rgba(0,0,0,0.18)';
        el.style.zIndex = 9999;
        el.style.transition = 'opacity .28s';
        document.body.appendChild(el);
      }
      el.textContent = msg;
      el.style.opacity = '1';
      setTimeout(()=>{ if(el) el.style.opacity = '0'; }, ms);
    }

    // formspree handler
    function showMessage(formId, type, text, autoHide=true, ms=6000){
      const map = { contactForm: 'contactMessage', bookingForm: 'bookingMessage' };
      const mid = map[formId];
      if(!mid) return;
      const el = document.getElementById(mid);
      if(!el) return;
      el.innerHTML = '';
      if(type === 'success'){
        const svgNS = 'http://www.w3.org/2000/svg';
        const wrap = document.createElement('div'); wrap.style.display = 'flex'; wrap.style.alignItems = 'center'; wrap.style.gap = '10px';
        const svg = document.createElementNS(svgNS, 'svg'); svg.setAttribute('viewBox','0 0 24 24'); svg.classList.add('tick-svg');
        const circle = document.createElementNS(svgNS,'circle'); circle.setAttribute('cx','12'); circle.setAttribute('cy','12'); circle.setAttribute('r','10'); circle.setAttribute('fill','rgba(31,122,58,0.08)');
        const path = document.createElementNS(svgNS,'path'); path.setAttribute('d','M6.5 12.3l3.2 3.2 7.8-8.1'); path.setAttribute('fill','none'); path.classList.add('tick-path');
        svg.appendChild(circle); svg.appendChild(path);
        const txt = document.createElement('div'); txt.textContent = text;
        wrap.appendChild(svg); wrap.appendChild(txt); el.appendChild(wrap);
        el.className = 'form-message success';
        void path.getBoundingClientRect();
      } else {
        el.textContent = text;
        el.className = 'form-message error';
      }
      el.style.display = 'flex';
      el.setAttribute('tabindex','-1');
      el.focus();
      if(autoHide){ clearTimeout(el._hideTimer); el._hideTimer = setTimeout(()=>{ el.style.display = 'none'; }, ms); }
    }
    function attachFormspreeHandler(formId){
      const form = document.getElementById(formId);
      if(!form) return;
      form.addEventListener('submit', async function(e){
        e.preventDefault();
        const submitBtn = form.querySelector('button[type="submit"]');
        const originalText = submitBtn ? submitBtn.textContent : '';
        try {
          if (submitBtn){ submitBtn.disabled = true; submitBtn.textContent = 'Sending…'; }
          const formData = new FormData(form);
          if (formId === 'bookingForm') { formData.append('_subject', 'Booking Slot Request from justicefirms.com'); }
          else if (formId === 'contactForm') { formData.append('_subject', 'New Contact Request from justicefirms.com'); }
          const action = form.getAttribute('action');
          if (!action || action.indexOf('formspree.io') === -1) {
            showMessage(formId, 'error', 'Form endpoint not set. Please create a form on formspree.io and paste the endpoint into form action.');
            return;
          }
          const resp = await fetch(action, { method: 'POST', body: formData, headers: { 'Accept': 'application/json' }});
          const data = await resp.json().catch(() => ({}));
          if (resp.ok) {
            showMessage(formId, 'success', 'Received — we will contact you shortly.');
            form.reset();
            if(formId === 'bookingForm') closeBooking();
          } else {
            let msg = 'Unable to send request. Please try again later.';
            if (data && data.errors && Array.isArray(data.errors)) { msg = data.errors.map(i => i.message || i).join('; '); }
            else if (data && data.message) { msg = data.message; }
            showMessage(formId, 'error', msg);
          }
        } catch (err) {
          console.error('Form submit error', err);
          showMessage(formId, 'error', 'Network error. Please check your connection and try again.');
        } finally {
          if (submitBtn){ submitBtn.disabled = false; submitBtn.textContent = originalText; }
        }
      });
    }
    attachFormspreeHandler('contactForm');
    attachFormspreeHandler('bookingForm');

    // scroll reveal
    if ('IntersectionObserver' in window && !window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      const obs = new IntersectionObserver((entries, o) => {
        entries.forEach(en => { if (en.isIntersecting) { en.target.classList.add('is-revealed'); o.unobserve(en.target); } });
      }, { threshold: 0.12 });
      document.querySelectorAll('[data-reveal]').forEach(el => obs.observe(el));
    } else {
      document.querySelectorAll('[data-reveal]').forEach(el => el.classList.add('is-revealed'));
    }

    // hero parallax: keep subtle, skip on touch devices
    (function(){
      const hero = document.querySelector('.hero');
      if(!hero) return;
      if(window.matchMedia('(pointer: coarse)').matches) return;
      let raf=null;
      hero.addEventListener('mousemove', e => {
        const rect = hero.getBoundingClientRect();
        const x = (e.clientX - (rect.left + rect.width/2))/rect.width;
        const y = (e.clientY - (rect.top + rect.height/2))/rect.height;
        cancelAnimationFrame(raf);
        raf = requestAnimationFrame(()=> hero.style.transform = `translate3d(${x*4}px,${y*2}px,0)`);
      });
      hero.addEventListener('mouseleave', ()=> hero.style.transform = 'translate3d(0,0,0)');
    })();

    // FAB toggle
    const fab = document.getElementById('fab');
    const fabToggle = document.getElementById('fabToggle');
    const fabMenu = document.getElementById('fabMenu');
    function toggleFab(open){
      if(!fab || !fabMenu || !fabToggle) return;
      const isOpen = open === undefined ? fab.getAttribute('aria-expanded') === 'true' : open;
      const newState = !isOpen;
      fab.setAttribute('aria-expanded', String(newState));
      fabMenu.setAttribute('aria-hidden', String(!newState));
      const icon = document.getElementById('fabIcon');
      if(icon) icon.style.transform = newState ? 'rotate(45deg) scale(1.02)' : 'rotate(0deg) scale(1)';
      fabToggle.setAttribute('aria-pressed', String(newState));
    }
    fabToggle && fabToggle.addEventListener('click', ()=> toggleFab());
    document.addEventListener('click', (e)=>{ if(!fab || !fabMenu) return; if(fab.contains(e.target)) return; if(fab.getAttribute('aria-expanded') === 'true') toggleFab(false); });
    fabToggle && fabToggle.addEventListener('keydown', (e)=> { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleFab(); } });

    // back to top
    const backTop = document.getElementById('backTop');
    window.addEventListener('scroll', ()=> {
      if(!backTop) return;
      if(window.scrollY > 300) {
        backTop.style.display = 'flex';
      } else {
        backTop.style.display = 'none';
      }
    });
    backTop && backTop.addEventListener('click', ()=> window.scrollTo({top:0,behavior:'smooth'}));

    // ESC close catches
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (bookingModal && bookingModal.style.display === 'flex') closeBooking();
        if (fab && fab.getAttribute('aria-expanded') === 'true') toggleFab(false);
        if (mobilePanel && mobilePanel.classList.contains('open')) closeMobileNav();
        const lj = document.getElementById('ljf-panel'); 
        const ljToggle = document.getElementById('ljf-toggle');
        if (lj && lj.style.display === 'flex') { lj.style.display = 'none'; if(ljToggle) ljToggle.setAttribute('aria-expanded','false'); }
        const preview = document.getElementById('articlePreview'); if (preview && preview.style.display === 'flex') preview.style.display = 'none';
      }
    });

    /* ARTICLES client-side (left-thumbnail layout) */
    (function(){
      const articles = [
        { id:'sec125', title:'Section 125 CrPC: Maintenance — What you must know', date:'2024-09-12', tags:['Family','Maintenance'], thumb:'fam.jpg', excerpt:'A concise guide to maintenance claims under Section 125 CrPC — eligibility, documents, and the process in UP courts.', url:'articles/sec125.html', body:`<p>This guide explains entitlement, typical timelines and documents required to file a maintenance application under Section 125 CrPC. Practical tips and court approach.</p>`},
        { id:'bail-law', title:'Understanding Bail: Regular vs Anticipatory', date:'2024-07-05', tags:['Criminal','Bail'], thumb:'crim.jpg', excerpt:'Key differences between regular bail and anticipatory bail, and practical tips for early release.', url:'articles/bail-law.html', body:`<p>When to apply for anticipatory bail, timelines and the courts’ approach — practical advice for accused persons.</p>`},
        { id:'partition', title:'Partition Suits: Documents & Strategy', date:'2024-03-22', tags:['Civil','Property'], thumb:'prop.jpg', excerpt:'Step-by-step: how partition suits work, essential documents and how to protect your rights.', url:'articles/partition-suits.html', body:`<p>Checklist of documents, common pitfalls in partition suits and recommended approach for early resolution.</p>`},
        { id:'practical-tips', title:'Practical Steps After Receiving Notice', date:'2024-01-18', tags:['General','Procedure'], thumb:'art.jpg', excerpt:'Immediate practical steps to take after receiving a legal notice — checklist for respondents.', url:'articles/notice-steps.html', body:`<p>Short checklist: do’s and don’ts, preserving evidence and acting promptly.</p>`}
      ];
      const grid = document.getElementById('articlesGrid');
      const searchInput = document.getElementById('articleSearch');
      const tagsWrap = document.getElementById('articleTags');
      const articlesCount = document.getElementById('articlesVisible');
      const sortSelect = document.getElementById('articlesSort');
      const preview = document.getElementById('articlePreview');
      const previewTitle = document.getElementById('previewTitle');
      const previewBody = document.getElementById('previewBody');
      const previewMeta = document.getElementById('previewMeta');

      const tagSet = new Set();
      articles.forEach(a => a.tags.forEach(t => tagSet.add(t)));
      const tags = Array.from(tagSet);

      function renderTagFilters(){
        if(!tagsWrap) return;
        tagsWrap.innerHTML = '';
        const allBtn = document.createElement('button');
        allBtn.className = 'tag-chip';
        allBtn.textContent = 'All';
        allBtn.dataset.tag = 'all';
        allBtn.setAttribute('aria-pressed','true');
        tagsWrap.appendChild(allBtn);
        tags.forEach(t => {
          const btn = document.createElement('button');
          btn.className = 'tag-chip';
          btn.textContent = t;
          btn.dataset.tag = t;
          btn.setAttribute('aria-pressed','false');
          tagsWrap.appendChild(btn);
        });
        tagsWrap.addEventListener('click', (e)=>{
          const btn = e.target.closest('button[data-tag]');
          if(!btn) return;
          tagsWrap.querySelectorAll('button[data-tag]').forEach(b=>b.setAttribute('aria-pressed','false'));
          btn.setAttribute('aria-pressed','true');
          applyFilters();
        });
      }

      function estimateReadingTime(text){
        const words = (text || '').split(/\s+/).filter(Boolean).length;
        const minutes = Math.max(1, Math.round(words / 200));
        return `${minutes} min read`;
      }

      function escapeHtml(s){ return String(s).replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]); }); }

      function renderArticles(list){
        if(!grid || !articlesCount) return;
        const order = sortSelect ? (sortSelect.value || 'newest') : 'newest';
        list.sort((a,b) => order === 'newest' ? (new Date(b.date) - new Date(a.date)) : (new Date(a.date) - new Date(b.date)));
        grid.innerHTML = '';
        if(list.length === 0){ grid.innerHTML = '<div class="card muted">No articles found.</div>'; articlesCount.textContent = 0; return; }
        list.forEach(article => {
          const row = document.createElement('article');
          row.className = 'article-row';
          row.setAttribute('tabindex','0');
          row.innerHTML = `
            <img class="article-thumb" loading="lazy" alt="${escapeHtml(article.title)}" src="${article.thumb}">
            <div class="article-body">
              <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px">
                <div class="article-title">${escapeHtml(article.title)}</div>
                <div class="muted" style="font-size:.92rem">${new Date(article.date).toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'})}</div>
              </div>
              <div class="article-excerpt">${escapeHtml(article.excerpt)}</div>
              <div style="display:flex;gap:8px;align-items:center;margin-top:auto">
                <a class="read-more btn btn--ghost btn--small" href="${article.url}">Read more →</a>
                <button class="btn btn--small" data-preview="${article.id}" type="button">Preview</button>
                <div style="margin-left:auto" class="muted">${estimateReadingTime(article.excerpt + ' ' + (article.body || ''))}</div>
              </div>
            </div>
          `;
          grid.appendChild(row);
        });

        grid.querySelectorAll('button[data-preview]').forEach(btn => {
          btn.addEventListener('click', () => {
            const id = btn.dataset.preview;
            openPreview(id);
          });
        });
        articlesCount.textContent = list.length;
      }

      function applyFilters(){
        if(!tagsWrap) return;
        const q = (searchInput && searchInput.value || '').trim().toLowerCase();
        const active = Array.from(tagsWrap.querySelectorAll('button[data-tag]')).find(b => b.getAttribute('aria-pressed') === 'true');
        const tag = active ? active.dataset.tag : 'all';
        let filtered = articles.filter(a => {
          const hay = (a.title + ' ' + a.excerpt + ' ' + (a.tags||[]).join(' ')).toLowerCase();
          const matchQ = !q || hay.indexOf(q) !== -1;
          const matchTag = tag === 'all' || a.tags.includes(tag);
          return matchQ && matchTag;
        });
        renderArticles(filtered);
      }

      function openPreview(id){
        if(!preview || !previewTitle || !previewMeta || !previewBody) return;
        const a = articles.find(x=>x.id===id);
        if(!a) return;
        previewTitle.textContent = a.title;
        previewMeta.textContent = `${new Date(a.date).toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'})} • ${a.tags.join(' • ')}`;
        previewBody.innerHTML = a.body || `<p>${a.excerpt}</p>`;
        preview.style.display = 'flex';
        const dlg = preview.querySelector('[role="dialog"]');
        if(dlg) dlg.focus();
      }
      function closePreview(){ if(preview) preview.style.display = 'none'; }

      renderTagFilters();
      renderArticles(articles);
      searchInput && searchInput.addEventListener('input', () => applyFilters());
      sortSelect && sortSelect.addEventListener('change', () => applyFilters());
      document.getElementById('previewClose') && document.getElementById('previewClose').addEventListener('click', closePreview);
      preview && preview.addEventListener('click', (e) => { if(e.target === preview) closePreview(); });
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && preview && preview.style.display === 'flex') closePreview(); });
    })();

    /* DICTIONARY behaviour */
    (function(){
      const dictInput = document.getElementById('dictInput');
      const dictBtn = document.getElementById('dictSearchBtn');
      const dictResults = document.getElementById('dictResults');
      if(!dictInput || !dictBtn || !dictResults) return;

      const TERMS = [
        { keys:['fir','f.i.r','first information report','जाँच रिपोर्ट','एफआईआर'], term:'FIR (First Information Report)', def:'A written document prepared by police when they receive information about the commission of a cognizable offence. It starts the criminal case and investigation.' },
        { keys:['125','section 125','sec 125','125 crpc','maintenance','मेण्टेनेन्स','भरण पोषण'], term:'Section 125 CrPC (Maintenance)', def:'Provision for basic monthly maintenance to wife, minor children or parents who cannot maintain themselves, granted by a Magistrate.' },
        { keys:['custody','child custody','बच्चे की कस्टडी','guardianship'], term:'Child Custody', def:'Court’s decision as to which parent or person will live with and take day-to-day care of a child after separation or divorce.' },
        { keys:['bail','जमानत','anticipatory bail','regular bail'], term:'Bail', def:'Permission from court for an accused person to remain out of jail during investigation or trial, subject to certain conditions.' },
        { keys:['anticipatory','anticipatory bail','438 crpc'], term:'Anticipatory Bail (Section 438 CrPC)', def:'Bail granted in anticipation of arrest. Person is not taken into regular custody if they comply with conditions of the anticipatory bail order.' },
        { keys:['injunction','stay order','स्टे ऑर्डर'], term:'Injunction / Stay Order', def:'An order of the civil court directing a party to do something or not to do something (for example, not to sell property) until further orders.' },
        { keys:['alimony','permanent alimony','maintenance after divorce'], term:'Alimony / Permanent Maintenance', def:'Amount granted to a spouse (usually wife) for her maintenance after divorce, separate from day-to-day interim maintenance.' },
        { keys:['mediation','settlement','समझौता','lok adalat'], term:'Mediation / Settlement', def:'Confidential process where a neutral mediator helps parties discuss issues and try to reach a mutually acceptable settlement without full trial.' },
        { keys:['decree','divorce decree','डिक्री'], term:'Decree', def:'Formal final order of the court finally deciding a civil dispute, such as granting divorce or declaring rights in property.' },
        { keys:['execution','execution case','darkhast'], term:'Execution of Decree', def:'Legal process of implementing or enforcing a court decree, for example recovery of money or handing over property.' }
      ];

      function findTerm(qRaw){
        const q = qRaw.trim().toLowerCase();
        if(!q) return null;
        // exact / contains match inside each keys array
        for(const item of TERMS){
          for(const k of item.keys){
            if(q === k.toLowerCase() || q.includes(k.toLowerCase()) || k.toLowerCase().includes(q)) return item;
          }
        }
        return null;
      }

      function renderResult(){
        const q = dictInput.value || '';
        if(!q.trim()){
          dictResults.innerHTML = '<div class="muted">Please type a term above, e.g. <strong>“FIR”</strong> or <strong>“bail”</strong>.</div>';
          return;
        }
        const match = findTerm(q);
        if(!match){
          dictResults.innerHTML = `<div class="dict-term">No simple definition found for “${q.replace(/</g,'&lt;')}”.</div><div class="dict-definition">Please describe your situation in the contact form or WhatsApp — we can explain it specifically for your case.</div>`;
          return;
        }
        dictResults.innerHTML = `<div class="dict-term">${match.term}</div><div class="dict-definition">${match.def}</div><div class="dict-note">Note: This is a general explanation. Actual rights and procedures depend on facts of your case and latest court decisions.</div>`;
      }

      dictBtn.addEventListener('click', renderResult);
      dictInput.addEventListener('keydown', e => { if(e.key === 'Enter'){ e.preventDefault(); renderResult(); } });
    })();

    /* Chat widget basic behaviour (NO AUTO-OPEN, FIXED & SEPARATE FROM FAB) */
    (function(){
      const toggle = document.getElementById('ljf-toggle');
      const panel = document.getElementById('ljf-panel');
      const closeBtn = document.getElementById('ljf-close');
      const body = document.getElementById('ljf-body');
      const input = document.getElementById('ljf-input');
      const sendBtn = document.getElementById('ljf-send');

      if(!toggle || !panel || !body || !input || !sendBtn) return;

      const KB = [
        { q: ['fee','fees','charge','pricing','cost'], a: 'Our fees vary by matter. Typical consultation is ₹500–₹1500. For a proper quote, please mention matter type (family/criminal/property).' },
        { q: ['book','appointment','slot','consultation'], a: 'To book consultation: share your name, phone and matter type here, or use the contact form. Our team will confirm a time shortly.' },
        { q: ['documents','papers','docs','document'], a: 'Documents depend on case. Property: title deed, tax receipt; Family: marriage certificate, ID proof, earlier orders. Criminal: FIR copy, notices, arrest memo.' },
        { q: ['bail','arrest'], a: 'If someone is arrested: stay calm, do not sign anything blindly, and contact a lawyer urgently. You can WhatsApp us for immediate help.' },
        { q: ['timing','timings','hours','open'], a: 'Office hours: Mon–Sun 9:00 AM – 9:00 PM (with prior appointment). For urgent matters, send a WhatsApp message anytime.' }
      ];

      function appendMessage(text, who='bot'){
        const el = document.createElement('div');
        el.className = 'message ' + (who === 'bot' ? 'from-bot' : 'from-user');
        el.style.padding = '8px';
        el.style.borderRadius = '10px';
        el.style.display = 'inline-block';
        if(who==='bot'){ el.style.background='#fff'; el.style.boxShadow='0 6px 20px rgba(7,12,25,0.06)'; }
        else { el.style.background='linear-gradient(90deg,#17c964,#0ba35a)'; el.style.color='#fff'; }
        el.textContent = text;
        body.appendChild(el);
        body.scrollTop = body.scrollHeight;
      }

      function openPanel(){ panel.style.display = 'flex'; toggle.setAttribute('aria-expanded','true'); setTimeout(()=>input.focus(),120); }
      function closePanel(){ panel.style.display = 'none'; toggle.setAttribute('aria-expanded','false'); toggle.focus(); }
      toggle.addEventListener('click', ()=> { panel.style.display === 'flex' ? closePanel() : openPanel(); });
      closeBtn.addEventListener('click', closePanel);

      function handleQuery(raw){
        const v = raw.trim();
        if(!v) return;
        appendMessage(v, 'user');
        const low = v.toLowerCase();
        let matched = false;
        for(const item of KB){
          for(const kw of item.q){
            if(low.includes(kw)){
              setTimeout(()=> appendMessage(item.a, 'bot'), 420);
              matched = true; break;
            }
          }
          if(matched) break;
        }
        if(!matched) setTimeout(()=> appendMessage('Thank you. We will review and respond. For urgent matters please call or WhatsApp on the numbers given.', 'bot'), 700);
      }

      sendBtn.addEventListener('click', ()=> {
        const v = input.value;
        if(!v.trim()) return;
        handleQuery(v);
        input.value = '';
      });
      input.addEventListener('keydown', (e)=> { if(e.key === 'Enter') { e.preventDefault(); sendBtn.click(); } });

      // quick chips click
      body.addEventListener('click', (e)=>{
        const chip = e.target.closest('.chip');
        if(!chip) return;
        const type = chip.dataset.suggest || '';
        let text = '';
        if(type === 'book') text = 'I want to book a consultation.';
        else if(type === 'fees') text = 'What are your fees?';
        else if(type === 'docs') text = 'Which documents are required?';
        if(text){
          input.value = text;
          sendBtn.click();
        }
      });
    })();

    // small safety
    $$('a[href^="tel:"], a[href^="mailto:"]').forEach(a=>a.setAttribute('rel','noopener'));
    const yearEl = document.getElementById('year');
    if(yearEl) yearEl.textContent = new Date().getFullYear();
  </script>
</body>
</html>
