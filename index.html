<!doctype html>
<html lang="en-IN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1, shrink-to-fit=no" />
  <title>The Justice Firm â€” Advocates & Legal Consultants (India)</title>
  <meta name="description" content="The Justice Firm â€” Family, Criminal & Civil law; Mediation. Based in Allahabad (Prayagraj), Uttar Pradesh." />
  <meta name="author" content="The Justice Firm">
  <link rel="canonical" href="https://justicefirms.com/">
  <meta name="robots" content="index,follow">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Merriweather:ital,wght@0,400;0,700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#f4f6fb; --card:#ffffff; --ink:#071225; --muted:#556173;
      --accent:#083b9a; --accent-2:#052c78; --gold:#c89b1e;
      --radius:14px; --container:1100px; --easing:cubic-bezier(.16,.84,.32,1);
      --shadow-1: 0 6px 30px rgba(7,12,25,0.06); --shadow-2: 0 14px 40px rgba(7,12,25,0.05);
      --success:#1f7a3a; --danger:#b42318;
      --btn-radius:12px; --btn-padding:12px 16px; --btn-shadow: 0 10px 32px rgba(5,44,120,0.12);
      --btn-focus: 0 0 0 4px rgba(8,59,155,0.12);
      --max-mobile-padding:18px;
    }

    /* Reset + baseline */
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto; -webkit-font-smoothing:antialiased;line-height:1.45;scroll-behavior:smooth}
    a{color:inherit;text-decoration:none}
    img,svg,canvas{max-width:100%;height:auto;display:block}
    html,body{overflow-x:hidden;}
    .wrap{max-width:var(--container);margin:0 auto;padding:20px var(--max-mobile-padding);}

    .muted { color: var(--muted); }
    .visually-hidden { position: absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }

    .skip-link{position:fixed;left:8px;top:8px;background:#000;color:#fff;padding:8px 10px;border-radius:6px;z-index:2000;transform:translateY(-200%);transition:transform .2s}
    .skip-link:focus{transform:translateY(0%)}

    /* NAV */
    .nav{
      display:flex;align-items:center;justify-content:space-between;
      background:rgba(255,255,255,0.92);backdrop-filter:blur(6px); padding:12px; border-radius:12px;
      box-shadow:var(--shadow-1); margin:12px 0; position:relative; z-index:30;
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:grid;place-items:center;color:#fff;font-weight:800;font-size:1.05rem;transition:transform 420ms var(--easing)}
    .brand:hover .logo{transform:scale(1.05) rotate(-6deg)}
    .brand-name{font-family:Merriweather,serif;font-size:1.05rem;font-weight:700;margin:0}
    .nav-links{display:flex;gap:12px;align-items:center}
    .nav-links a{color:var(--muted);font-weight:600;padding:8px 10px;border-radius:8px}
    .nav-links a.cta{background:var(--accent);color:#fff}
    .nav-toggle{display:none;border:0;font-size:22px;background:none;color:var(--ink);padding:6px;border-radius:8px}

    #clock{color:var(--gold);font-weight:700;font-size:.95rem}

    /* HERO â€” uses hero_bg.jpg */
    .hero{
      display:grid;grid-template-columns:1fr 360px;gap:22px;align-items:start;margin:12px 0;position:relative;
      background-image: url('hero_bg.jpg');
      background-size:cover;
      background-position:center center;
      border-radius:16px;
      padding:26px;
      box-shadow: var(--shadow-2);
    }
    .hero-card{background:linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.92));padding:24px;border-radius:12px;box-shadow:0 22px 60px rgba(7,12,25,0.06);position:relative;z-index:2}
    .eyebrow{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;padding:6px 12px;border-radius:999px;font-size:.82rem;font-weight:700;display:inline-block}
    .headline{font-family:Merriweather,serif;font-size:26px;margin:12px 0}
    .lead{color:var(--muted);margin-bottom:16px}
    .hero-cta{display:flex;gap:12px;flex-wrap:wrap}

    /* Aside panel */
    .panel{background:var(--card);padding:16px;border-radius:12px;box-shadow:var(--shadow-2);z-index:1}
    #clock-nav{font-weight:700;color:var(--gold);font-size:.95rem;text-align:right}
    #calendar-section{background:linear-gradient(180deg,#fff,#fbfdff);border-radius:10px;padding:10px;margin-top:12px;box-shadow:0 12px 36px rgba(7,12,25,0.04)}
    #calendar{width:100%;overflow-x:auto}
    #calendar table{width:100%;border-collapse:collapse;font-size:.95rem}
    #calendar th,#calendar td{padding:8px;text-align:center;border-radius:6px}
    #calendar th{color:var(--muted);font-weight:700;font-size:.9rem}
    #calendar td{height:40px}
    #calendar td.today{background:var(--gold);color:#000;font-weight:700;border-radius:50%}

    section{margin:30px 0}
    h2{font-family:Merriweather,serif;font-size:1.22rem;margin:0 0 10px;position:relative}
    h2::after{content:"";display:block;width:48px;height:4px;background:var(--gold);border-radius:4px;margin-top:8px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:var(--shadow-2);transition:transform 320ms var(--easing),box-shadow 320ms var(--easing)}
    .card:hover{transform:translateY(-8px);box-shadow:0 28px 70px rgba(7,12,25,0.10)}

    /* Practice cards with thumbnails */
    .practice-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:18px; margin-top:16px; }
    .practice-card { border-radius:14px; overflow:hidden; display:flex; gap:0; align-items:stretch; box-shadow:var(--shadow-2); background:#fff; }
    .practice-thumb { width:140px; min-width:140px; height:140px; object-fit:cover; display:block }
    .practice-body { padding:14px; display:flex; flex-direction:column; gap:8px; }

    .pay-grid{display:grid;grid-template-columns:1fr 1fr;gap:18px}
    .pay-box{background:var(--card);padding:18px;text-align:center;border-radius:12px;box-shadow:var(--shadow-2)}
    .pay-box img{width:140px;height:140px;border-radius:10px;border:2px solid var(--gold);object-fit:cover}

    form input,form textarea,form select{width:100%;padding:10px;border-radius:10px;border:1px solid #d8dce3;font-size:1rem;font-family:Inter}
    label{font-size:.9rem;color:var(--muted);display:block;margin-bottom:6px}

    .form-message{
      margin-top:12px;padding:12px;border-radius:10px;font-weight:600;display:none;
      align-items:center;gap:10px;
    }
    .form-message.success{background:rgba(31,122,58,0.10);color:var(--success);display:flex;border:1px solid rgba(31,122,58,0.16)}
    .form-message.error{background:rgba(180,35,24,0.08);color:var(--danger);display:flex;border:1px solid rgba(180,35,24,0.12)}

    footer{background:linear-gradient(180deg,#03102a,#041733);padding:18px;border-radius:14px;margin:28px 0 40px;color:#fff;display:flex;justify-content:space-between;align-items:center;gap:12px}
    footer a{color:var(--gold)}

    /* Buttons */
    .btn { display:inline-flex; align-items:center; gap:10px; padding:var(--btn-padding); border-radius:var(--btn-radius); cursor:pointer; font-weight:700; font-size:0.95rem; border:0; background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#fff; box-shadow:var(--btn-shadow); transition:transform .18s var(--easing),box-shadow .18s var(--easing); position:relative; overflow:hidden; text-decoration:none; -webkit-tap-highlight-color: transparent; }
    .btn:focus{outline:none;box-shadow:var(--btn-focus), var(--btn-shadow)}
    .btn:active{transform:translateY(1px) scale(.995)}
    .btn--primary { background:linear-gradient(90deg,var(--accent),var(--accent-2)); }
    .btn--ghost { background:transparent; color:var(--ink); border:1px solid rgba(5,44,120,0.08); box-shadow:none; }
    .btn--accent { background: linear-gradient(90deg,#17c964,#0ba35a); box-shadow: 0 10px 30px rgba(23,201,100,0.12); }
    .btn--outline { background:transparent; border:1px solid rgba(8,70,198,0.12); color:var(--accent-2); }
    .btn--icon { padding:10px; border-radius:10px; width:44px;height:44px; justify-content:center; font-weight:700; }
    .btn--small { padding:8px 10px; font-size:.88rem; border-radius:10px; font-weight:600; }
    .btn:focus-visible { box-shadow: var(--btn-focus); outline: none; }

    /* FAB */
    .fab{ position:fixed; right:18px; bottom:18px; z-index:1400; display:flex; flex-direction:column; align-items:flex-end; gap:8px; }
    .fab__main{ width:60px; height:60px; border-radius:999px; display:grid; place-items:center; color:#fff; background:linear-gradient(180deg,var(--accent-2),var(--accent)); box-shadow:0 18px 48px rgba(5,44,120,0.18); cursor:pointer; border:0; transition:transform .18s var(--easing),box-shadow .18s var(--easing); }
    .fab__main:focus{outline:var(--btn-focus);}
    .fab__menu{ display:flex; flex-direction:column; align-items:flex-end; gap:8px; margin-bottom:6px; transform-origin:100% 100%; transition:transform .28s var(--easing),opacity .2s var(--easing); opacity:0; transform:translateY(8px) scale(.9); pointer-events:none; }
    .fab[aria-expanded="true"] .fab__menu{ opacity:1; transform:translateY(0) scale(1); pointer-events:auto }
    .fab__item{ display:inline-flex; align-items:center; gap:10px; padding:10px 12px; border-radius:999px; background:var(--card); box-shadow:var(--shadow-2); color:var(--ink); text-decoration:none; border:1px solid rgba(7,12,25,0.04); }

    a:focus,button:focus,input:focus,textarea:focus,select:focus{outline:3px solid rgba(8,59,155,0.10);outline-offset:3px;border-radius:8px}

    [data-reveal]{opacity:0;transform:translateY(10px);transition:opacity 520ms var(--easing),transform 520ms var(--easing)}
    [data-reveal].is-revealed{opacity:1;transform:none}

    .tick-svg { width:22px;height:22px;flex:0 0 22px }
    .tick-path { stroke: var(--success); stroke-width:3; stroke-linecap:round; stroke-linejoin:round; fill:none; stroke-dasharray: 48; stroke-dashoffset: 48; transition: stroke-dashoffset 420ms ease-out; }
    .form-message.success .tick-path { stroke-dashoffset: 0; }

    /* Team styles (consistent squares) */
    .team-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:22px; margin-top:16px; }
    .member { background:var(--card); border-radius:14px; overflow:hidden; box-shadow:var(--shadow-2); transition:transform .25s var(--easing); display:flex; flex-direction:column; }
    .member-figure { width:100%; height:220px; background:#eef2f7; position:relative; overflow:hidden; display:block; }
    .member-figure img { width:100%; height:100%; object-fit:cover; object-position:center center; display:block; transition:transform .6s var(--easing); }
    .member:hover img { transform:scale(1.04); }
    .initials { display:none; position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:84px;height:84px;border-radius:12px;background:linear-gradient(135deg,var(--accent-2),var(--accent)); color:#fff; font-weight:800; display:grid; place-items:center; font-family:Merriweather,serif; font-size:1.05rem; }
    .bio { padding:16px; display:flex; flex-direction:column; gap:6px; }
    .bio h3 { margin:0; font-family:Merriweather,serif; font-size:1.05rem; }
    .bio .role{ margin:0;color:var(--muted); font-size:.95rem; }
    .bio .meta{ margin-top:auto;color:var(--muted); font-size:.88rem; }

    /* Articles left-thumb layout */
    #articlesGrid { display:grid; grid-template-columns: 1fr; gap:14px; margin-top:12px; }
    .article-row { display:flex; gap:12px; align-items:flex-start; background:var(--card); padding:12px; border-radius:12px; box-shadow:var(--shadow-2); }
    .article-thumb { width:120px; height:84px; flex:0 0 120px; border-radius:8px; object-fit:cover; }
    .article-body { flex:1; display:flex; flex-direction:column; gap:8px; }
    .article-title { font-weight:700; }
    .article-excerpt { color:var(--muted); font-size:.95rem; }

    /* Payment titanium / contact adjustments done inline in section */
    @media(max-width:1024px){ .hero{grid-template-columns:1fr 320px} .panel{padding:12px} }
    @media(max-width:720px){
      .nav-toggle{display:block}
      .nav-links{display:none}
      .hero{grid-template-columns:1fr;gap:12px;padding:20px}
      .practice-thumb{min-width:120px;width:120px;height:120px}
      .pay-grid{grid-template-columns:1fr}
      section{margin:18px 0}
      footer{flex-direction:column;align-items:flex-start}
      .member-figure{height:180px}
      .headline{font-size:20px}
      .logo{width:40px;height:40px}
      .wrap{padding:16px}
      .article-thumb{width:100px;height:70px;flex:0 0 100px}
    }

    @media (prefers-reduced-motion: reduce){
      *,*::before,*::after{transition:none!important;animation:none!important;scroll-behavior:auto!important}
    }
  </style>
</head>

<body>
  <a class="skip-link" href="#main-content">Skip to content</a>

  <div class="wrap">
    <header class="nav" role="banner">
      <div class="brand">
        <div class="logo" aria-hidden="true">TJ</div>
        <div>
          <div class="brand-name">The Justice Firm</div>
          <div class="muted" style="font-size:.85rem">Advocates & Legal Consultants (India)</div>
        </div>
      </div>

      <nav id="main-nav" class="nav-links" role="navigation" aria-label="Main">
        <a href="#practice">Practice</a>
        <a href="#about">About</a>
        <a href="#team">Team</a>
        <a href="#articles">Articles</a>
        <a href="#payment">Payment</a>
        <a href="contact.html" class="cta btn--ghost">Contact</a>
        <span id="clock" aria-live="polite" style="margin-left:8px"></span>
      </nav>

      <button class="nav-toggle btn btn--icon" id="navToggle" aria-expanded="false" aria-controls="main-nav" aria-label="Open menu">â˜°</button>
    </header>

    <!-- Mobile nav panel -->
    <div id="mobileNavPanel" class="mobile-nav-panel" aria-hidden="true">
      <div style="display:flex;align-items:center;gap:12px">
        <div class="logo" style="width:44px;height:44px">TJ</div>
        <div style="font-weight:700">The Justice Firm</div>
        <button class="close" id="mobileNavClose" aria-label="Close menu">âœ•</button>
      </div>
      <a href="#practice" class="mobile-link">Practice</a>
      <a href="#about" class="mobile-link">About</a>
      <a href="#team" class="mobile-link">Team</a>
      <a href="#articles" class="mobile-link">Articles</a>
      <a href="#payment" class="mobile-link">Payment</a>
      <a href="contact.html" class="btn btn--primary" style="width:100%;">Contact / Book</a>
      <div style="margin-top:auto;color:rgba(255,255,255,0.8);font-size:.95rem">
        <div><strong>Call:</strong> <a href="tel:+919454183793" style="color:#fff">+91 94541 83793</a></div>
        <div style="margin-top:6px"><a href="mailto:adv.shastri@gmail.com" style="color:#fff">adv.shastri@gmail.com</a></div>
      </div>
    </div>

    <main id="main-content" tabindex="-1">
      <!-- HERO -->
      <section class="hero" data-reveal>
        <div class="hero-card" data-reveal>
          <span class="eyebrow">Trusted in Indian Courts</span>
          <h1 class="headline">Practical counsel for Family, Criminal & Civil disputes.</h1>
          <p class="lead">Confidential, strategic and results-focused representation across Allahabad and Uttar Pradesh.</p>
          <div class="hero-cta">
            <a class="btn btn--primary" href="#contact" title="Book consultation">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M7 11h10" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 15h6" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Book Consultation
            </a>

            <a class="btn btn--ghost" href="#practice">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 2v20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M2 12h20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              Explore Practice
            </a>
          </div>
          <p class="muted" style="margin-top:12px;font-size:.92rem"><strong>+91 94541 83793</strong> Â· <a href="mailto:adv.shastri@gmail.com">adv.shastri@gmail.com</a></p>
        </div>

        <aside class="panel" data-reveal aria-labelledby="nextSlotLabel">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
            <div>
              <h4 id="nextSlotLabel" style="margin:0">Next Available Slot</h4>
              <div class="muted" id="nextSlot" style="margin-top:6px">Loadingâ€¦</div>
            </div>
            <div id="clock-nav">--:--:-- IST</div>
          </div>

          <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn btn--outline" id="requestSlotBtn" type="button">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 5v14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              Request Slot
            </button>
            <a class="btn btn--ghost" href="#contact">Contact</a>
          </div>

          <div id="calendar-section" aria-label="Court calendar">
            <h4 style="margin:8px 0 6px 0">Court Calendar</h4>
            <div id="calendar" role="table" aria-live="polite" aria-atomic="true"></div>
          </div>
        </aside>
      </section>

      <!-- PRACTICE -->
      <section id="practice">
        <h2>Practice Areas</h2>
        <p class="muted">Family, Criminal, Civil Litigation & Mediation.</p>

        <div class="practice-grid">
          <article class="practice-card" data-reveal>
            <img class="practice-thumb" src="fam.jpg" alt="Family & Matrimonial" loading="lazy" decoding="async">
            <div class="practice-body">
              <h3 style="margin:0">Family & Matrimonial</h3>
              <p class="muted" style="margin:0">Divorce, custody, alimony, DV Act, 125 CrPC, mediation.</p>
              <div style="margin-top:auto">
                <a class="btn btn--ghost btn--small" href="#contact">Consult</a>
              </div>
            </div>
          </article>

          <article class="practice-card" data-reveal>
            <img class="practice-thumb" src="crim.jpg" alt="Criminal Defence" loading="lazy" decoding="async">
            <div class="practice-body">
              <h3 style="margin:0">Criminal Defence</h3>
              <p class="muted" style="margin:0">Bail, anticipatory bail, criminal trials & appeals.</p>
              <div style="margin-top:auto"><a class="btn btn--ghost btn--small" href="#contact">Consult</a></div>
            </div>
          </article>

          <article class="practice-card" data-reveal>
            <img class="practice-thumb" src="prop.jpg" alt="Civil & Property" loading="lazy" decoding="async">
            <div class="practice-body">
              <h3 style="margin:0">Civil & Property</h3>
              <p class="muted" style="margin:0">Partition, recovery, injunctions, property litigation.</p>
              <div style="margin-top:auto"><a class="btn btn--ghost btn--small" href="#contact">Consult</a></div>
            </div>
          </article>
        </div>
      </section>

      <!-- ABOUT -->
      <section id="about">
        <h2>About Adv. Ganga Shankar Shastri</h2>
        <div style="display:flex;gap:18px;flex-wrap:wrap;margin-top:12px;align-items:flex-start">
          <div class="placeholder-card" data-reveal style="min-width:240px;max-width:240px;border-radius:12px;background:#fff;padding:8px;box-shadow:var(--shadow-2)">
            <img src="ganga.jpg" alt="Adv. Ganga Shankar Shastri â€” Founder" style="width:100%;height:auto;border-radius:8px;object-fit:cover" onerror="this.parentElement.innerHTML='[Image for S Sha] 240px x 240px'">
          </div>

          <div style="flex:1;min-width:220px" data-reveal>
            <p>With over 15 years of practice before the Allahabad High Court and district courts, Adv. Ganga Shankar Shastri is known for his clarity, courtroom preparation and practical client-focused representation.</p>
            <p class="muted">We emphasise confidentiality, balanced negotiation and strong litigation strategy.</p>
            <a class="btn btn--primary" href="#contact" style="margin-top:12px">Book Consultation</a>
          </div>
        </div>
      </section>

      <!-- TEAM (fixed centering + initials only on fail) -->
      <section id="team" aria-labelledby="teamHeading">
        <h2 id="teamHeading">Our Team</h2>
        <p class="muted">Experienced advocates & legal consultants.</p>

        <div class="team-grid" role="list" aria-label="Our team members">
          <!-- Member 1 -->
          <article class="member" role="listitem" tabindex="0">
            <figure class="member-figure">
              <img src="ganga.jpg" alt="Adv. Ganga Shankar Shastri" loading="lazy" decoding="async" data-focus="center 22%">
              <div class="initials" aria-hidden="true">GS</div>
            </figure>
            <div class="bio">
              <h3>Adv. Ganga Shankar Shastri</h3>
              <p class="role">Founder & Lead Counsel</p>
              <p class="meta">15+ years â€¢ Allahabad High Court</p>
            </div>
          </article>

          <!-- Member 2 -->
          <article class="member" role="listitem" tabindex="0">
            <figure class="member-figure">
              <img src="minakshi.jpg" alt="Adv. Minakshi Shastri" loading="lazy" decoding="async" data-focus="center 20%">
              <div class="initials" aria-hidden="true">MS</div>
            </figure>
            <div class="bio">
              <h3>Adv. Minakshi Shastri</h3>
              <p class="role">Senior Associate â€“ Civil & Corporate</p>
              <p class="meta">Property & Corporate Litigation</p>
            </div>
          </article>

          <!-- Member 3 -->
          <article class="member" role="listitem" tabindex="0">
            <figure class="member-figure">
              <img src="new_shivani.jpg" alt="Adv. Shivani Shastri" loading="lazy" decoding="async" data-focus="center 18%">
              <div class="initials" aria-hidden="true">SS</div>
            </figure>
            <div class="bio">
              <h3>Adv. Shivani Shastri</h3>
              <p class="role">Consulting Advocate â€“ Constitutional Affairs</p>
              <p class="meta">Research & Advisory</p>
            </div>
          </article>

          <!-- Member 4 -->
          <article class="member" role="listitem" tabindex="0">
            <figure class="member-figure">
              <img src="sanjay.jpg" alt="Adv. Sanjay Kumar" loading="lazy" decoding="async" data-focus="center 20%" onerror="">
              <div class="initials" aria-hidden="true">SK</div>
            </figure>
            <div class="bio">
              <h3>Adv. Sanjay Kumar</h3>
              <p class="role">Associate Counsel â€“ Criminal Defence</p>
              <p class="meta">Photo coming soon</p>
            </div>
          </article>
        </div>

        <!-- keep script local to team section for focusing images -->
        <script>
          (function(){
            // apply data-focus -> object-position and show initials only if image fails
            document.querySelectorAll('.member-figure').forEach(fig => {
              const img = fig.querySelector('img');
              const initials = fig.querySelector('.initials');
              if(!img) return;
              // apply focus if any
              const focus = img.getAttribute('data-focus');
              if(focus) img.style.objectPosition = focus;
              else img.style.objectPosition = 'center center';

              // When image loads correctly hide initials
              function showInitialsIfBroken(){
                // If naturalWidth is zero, image failed
                if(!img.complete || (img.naturalWidth && img.naturalWidth === 0)) {
                  if(initials) initials.style.display = 'grid';
                  img.style.display = 'none';
                } else {
                  if(initials) initials.style.display = 'none';
                  img.style.display = 'block';
                }
              }

              // set handlers
              img.addEventListener('load', showInitialsIfBroken);
              img.addEventListener('error', showInitialsIfBroken);
              // immediate check (for cache)
              setTimeout(showInitialsIfBroken, 30);
            });
          })();
        </script>
      </section>

      <!-- ARTICLES: left-thumb layout (A) -->
      <section id="articles" aria-labelledby="articlesHeading" style="margin-top:0;">
        <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px;flex-wrap:wrap">
          <div>
            <h2 id="articlesHeading">Articles & Insights</h2>
            <p class="muted" style="margin-top:6px">Short guides, practical steps and case insights â€” written for clients and families.</p>
          </div>

          <div style="display:flex;gap:8px;align-items:center">
            <label for="articleSearch" class="muted" style="font-size:.88rem;margin-right:6px">Search</label>
            <input id="articleSearch" type="search" placeholder="Search articlesâ€¦" aria-label="Search articles" style="padding:8px;border-radius:10px;border:1px solid #e2e6ef;min-width:160px">
            <div id="articleTags" role="list" aria-label="Filter by tag" style="display:flex;gap:8px;flex-wrap:wrap;margin-left:6px"></div>
          </div>
        </div>

        <div id="articlesMeta" style="display:flex;gap:12px;align-items:center;margin-top:10px;flex-wrap:wrap">
          <div class="muted" id="articlesCount" aria-live="polite">Showing <strong id="articlesVisible">0</strong> articles</div>
          <div style="margin-left:auto" class="muted">Sort:
            <select id="articlesSort" aria-label="Sort articles" style="padding:6px;border-radius:8px;border:1px solid #e6ebf5;margin-left:8px">
              <option value="newest">Newest</option>
              <option value="oldest">Oldest</option>
            </select>
          </div>
        </div>

        <div id="articlesGrid"></div>

        <div id="articlePreview" style="display:none;position:fixed;inset:0;background:rgba(2,6,23,0.6);z-index:1400;align-items:center;justify-content:center;padding:18px">
          <article role="dialog" aria-modal="true" aria-labelledby="previewTitle" style="max-width:820px;width:100%;background:var(--card);padding:18px;border-radius:10px;box-shadow:var(--shadow-2);overflow:auto;max-height:80vh">
            <header style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px">
              <div>
                <h3 id="previewTitle" style="margin:0">Title</h3>
                <div class="muted" id="previewMeta" style="margin-top:6px;font-size:.95rem"></div>
              </div>
              <button id="previewClose" class="btn btn--ghost" aria-label="Close preview">Close</button>
            </header>
            <div id="previewBody" style="margin-top:12px;color:var(--muted)"></div>
          </article>
        </div>
      </section>

      <!-- PAYMENT â€” TITANIUM with pay_bg.jpg -->
      <section id="payment">
        <h2 style="color:#e8f2ff">Secure Payment â€” Titanium</h2>
        <p class="muted" style="color:#bfcfe0">Fast, secure payments. Use UPI or bank transfer â€” receipts available on request.</p>

        <div class="titanium-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:22px;margin-top:18px;align-items:stretch">
          <!-- Titanium UPI Card -->
          <div class="titanium-card" aria-labelledby="tupi" style="background-image: linear-gradient(180deg, rgba(2,6,10,0.66), rgba(8,12,16,0.66)), url('pay_bg.jpg'); background-size:cover; background-position:center; border:1px solid rgba(255,255,255,0.04);">
            <div class="metal-bar" aria-hidden="true"></div>
            <h4 id="tupi" style="color:#e6f2ff">UPI â€” Instant Payment</h4>

            <div class="titanium-qr-wrap" role="region" aria-label="UPI QR code">
              <div class="titanium-qr-frame" id="tqr" style="background:linear-gradient(180deg,#eef1f6,#dfe6ef);">
                <img src="upi_qr.jpg" alt="UPI QR â€” The Justice Firm" loading="lazy" decoding="async">
              </div>

              <div class="titanium-pill" aria-hidden="false" style="color:#0b1220;background:rgba(255,255,255,0.95);">Scan with any UPI app</div>
            </div>

            <div class="titanium-info" role="status" aria-live="polite">
              <span style="color:#dbefff">UPI ID:</span> <strong id="upi-id" style="color:#fff">adv.shastri@oksbi</strong><br>
              <span style="font-size:.85rem;color:#9fb2cf">Encrypted & secure</span>
            </div>

            <div class="titanium-actions" role="group" aria-label="Payment actions">
              <button id="copyUpiBtn" class="titanium-btn btn-titanium-copy" type="button" aria-label="Copy UPI ID">Copy UPI</button>
              <button id="downloadQR" class="titanium-btn btn-titanium-download" type="button" aria-label="Download QR">Download QR</button>
              <div id="ttoast" style="display:none" aria-hidden="true"></div>
            </div>
          </div>

          <!-- Bank transfer titanium card -->
          <div class="bank-titanium" aria-labelledby="tbank" style="background-image: linear-gradient(180deg, rgba(4,8,12,0.7), rgba(6,10,14,0.7)), url('pay_bg.jpg'); background-size:cover; background-position:center;">
            <div style="display:flex;align-items:center;gap:10px;justify-content:center">
              <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 12h18" stroke="#dfeeff" stroke-width="1.2" stroke-linecap="round"/></svg>
              <h4 id="tbank">Bank Transfer</h4>
            </div>

            <div style="text-align:center;font-size:1rem;font-weight:600;color:#dbefff">
              The Justice Firm â€” Canara Bank<br>
              A/c: <strong>5328127000035</strong><br>
              IFSC: <strong>CNRB0005131</strong>
            </div>

            <div style="display:flex;gap:12px;justify-content:center;margin-top:auto">
              <a id="downloadReceipt" class="titanium-btn btn-titanium-download" href="#" style="color:#dbefff; text-decoration:none; display:inline-flex; align-items:center; justify-content:center;">Download Receipt</a>
              <a class="titanium-btn" href="https://wa.me/919454183793" target="_blank" rel="noopener" style="background:linear-gradient(90deg,#1b6fb2,#083b9a); color:#fff; text-decoration:none;">Need Help</a>
            </div>
          </div>
        </div>

        <script>
          (function(){
            const copyBtn = document.getElementById('copyUpiBtn');
            const upiEl = document.getElementById('upi-id');
            const toast = document.getElementById('ttoast');
            const downloadBtn = document.getElementById('downloadQR');

            function showToast(msg){
              toast.innerHTML = `<span class="titanium-toast" role="status" aria-live="polite">${msg}</span>`;
              toast.style.display = 'inline-flex';
              toast.setAttribute('aria-hidden','false');
              setTimeout(()=>{ toast.style.display='none'; toast.setAttribute('aria-hidden','true'); }, 2400);
            }

            copyBtn?.addEventListener('click', async ()=> {
              const upi = (upiEl?.textContent || '').trim();
              if(!upi){ showToast('UPI not found'); return; }
              try {
                if(navigator.clipboard && navigator.clipboard.writeText){
                  await navigator.clipboard.writeText(upi);
                  showToast('UPI copied');
                } else {
                  window.prompt('Copy UPI ID', upi);
                  showToast('Copy manually');
                }
              } catch(e){
                try { window.prompt('Copy UPI ID', upi); showToast('Copy manually'); } catch(err){ showToast('Unable to copy'); }
              }
            });

            downloadBtn?.addEventListener('click', ()=> {
              const a = document.createElement('a');
              a.href = 'upi_qr.jpg';
              a.download = 'justicefirm_upi_qr.jpg';
              document.body.appendChild(a); a.click(); a.remove();
            });

            const receipt = document.getElementById('downloadReceipt');
            receipt?.addEventListener('click', (e)=>{
              e.preventDefault();
              const txt = `Receipt â€” The Justice Firm\nDate: ${new Date().toLocaleDateString('en-IN')}\nPaid to: The Justice Firm\nUPI ID: ${upiEl?.textContent || ''}\nReference: (enter transaction id)\n\nThank you.`;
              const blob = new Blob([txt], { type: 'text/plain' });
              const url = URL.createObjectURL(blob);
              const a = document.createElement('a');
              a.href = url; a.download = 'receipt.txt'; document.body.appendChild(a); a.click();
              setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); },1500);
            });
          })();
        </script>
      </section>

      <!-- CONTACT (contact_bg.jpg as subtle aside background) -->
      <section id="contact">
        <h2>Contact & Consultation</h2>

        <div class="contact-grid" style="display:grid;grid-template-columns:1fr minmax(220px,360px);gap:18px;margin-top:12px;align-items:start">
          <!-- Form -->
          <form id="contactForm" class="contact-form" action="https://formspree.io/f/mjkqwgje" method="POST" data-reveal>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
              <div>
                <label for="name">Full Name</label>
                <input id="name" name="name" placeholder="Full Name" required>
              </div>
              <div>
                <label for="phone">Phone (+91)</label>
                <input id="phone" name="phone" type="tel" placeholder="Phone (+91)" required>
              </div>
            </div>

            <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px">
              <div>
                <label for="email">Email</label>
                <input id="email" name="email" type="email" placeholder="Email" required>
              </div>
              <div>
                <label for="matter">Matter</label>
                <select id="matter" name="matter">
                  <option>Family Matter</option>
                  <option>Criminal</option>
                  <option>Civil / Property</option>
                  <option>Mediation</option>
                  <option>Other</option>
                </select>
              </div>
            </div>

            <label for="message" style="margin-top:10px">Brief description</label>
            <textarea id="message" name="message" rows="4" placeholder="Brief descriptionâ€¦" required></textarea>

            <input type="text" name="_gotcha" style="display:none" aria-hidden="true" tabindex="-1">

            <div id="contactMessage" class="form-message" role="status" aria-live="polite" aria-atomic="true"></div>

            <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap">
              <button class="btn btn--primary" type="submit">Send Request</button>
              <button class="btn btn--ghost" id="scheduleCallBtn" type="button">Schedule Call</button>
            </div>
          </form>

          <!-- Aside -->
          <aside class="contact-aside panel" data-reveal aria-label="Contact information" style="background-image:url('contact_bg.jpg'); background-size:cover; background-position:center;">
            <div class="panel-content" style="background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.84)); padding:12px; border-radius:10px;">
              <h4>Office Address</h4>
              <p class="muted">Rajrooppur, Allahabad (Prayagraj), Uttar Pradesh</p>

              <h4 style="margin-top:12px">Timings</h4>
              <p class="muted">Monâ€“Sun Â· 9:00 AM â€“ 9:00 PM</p>
            </div>

            <div class="contact-actions" aria-hidden="false">
              <a href="https://wa.me/919454183793" class="btn btn--accent" target="_blank" rel="noopener" aria-label="WhatsApp chat">
                ðŸ’¬ WhatsApp â€” Chat Now
              </a>

              <a href="tel:+918433438419" class="btn btn--primary" aria-label="Call">
                ðŸ“ž Call â€” Immediate Response
              </a>
            </div>
          </aside>
        </div>
      </section>

    </main>

    <footer>
      <div>
        <div style="font-weight:700">The Justice Firm</div>
        <div class="muted">Â© <span id="year"></span> â€¢ All Rights Reserved</div>
      </div>
      <div><a href="disclaimer.html">Disclaimer & Privacy</a> â€¢ <a href="terms.html">Terms</a></div>
    </footer>
  </div>

  <!-- FAB -->
  <div class="fab" id="fab" aria-expanded="false" aria-label="Quick contact">
    <div class="fab__menu" role="menu" aria-hidden="true" id="fabMenu">
      <a class="fab__item" href="https://wa.me/919454183793" target="_blank" rel="noopener" role="menuitem" id="fabWa">WhatsApp</a>
      <a class="fab__item" href="tel:+918433438419" role="menuitem" id="fabCall">Call</a>
    </div>

    <button class="fab__main" id="fabToggle" aria-label="Open quick contact" title="Contact">
      <svg id="fabIcon" width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 5v14" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M5 12h14" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>

  <!-- Back to top -->
  <button id="backTop" aria-label="Back to top" title="Back to top" style="position:fixed;right:18px;bottom:96px;display:none;background:var(--accent);color:#fff;width:46px;height:46px;border-radius:999px;align-items:center;justify-content:center;box-shadow:var(--btn-shadow);">â†‘</button>

  <!-- Booking Modal -->
  <div id="bookingModal" aria-hidden="true" aria-labelledby="modalTitle" style="display:none;position:fixed;inset:0;background:rgba(2,6,23,0.5);backdrop-filter:blur(4px);align-items:center;justify-content:center;z-index:1200;padding:18px">
    <div role="dialog" aria-modal="true" aria-labelledby="modalTitle" style="background:var(--card);padding:20px;border-radius:12px;max-width:420px;width:100%">
      <h3 id="modalTitle">Request Consultation</h3>
      <p class="muted">Choose a date â€” we will confirm via email.</p>
      <form id="bookingForm" action="https://formspree.io/f/myzqwkvv" method="POST">
        <label for="bk-client">Full name</label>
        <input id="bk-client" name="client" placeholder="Full name" required style="margin-top:10px">
        <label for="bk-email">Email</label>
        <input id="bk-email" name="email" type="email" placeholder="Email" required style="margin-top:10px">
        <label for="bk-date">Date</label>
        <input id="bk-date" name="date" type="date" required style="margin-top:10px">
        <input type="text" name="_gotcha" style="display:none" aria-hidden="true" tabindex="-1">
        <div id="bookingMessage" class="form-message" role="status" aria-live="polite" aria-atomic="true"></div>
        <div style="display:flex;gap:8px;margin-top:14px">
          <button class="btn btn--primary" type="submit">Request</button>
          <button class="btn btn--ghost" type="button" id="cancelBookingBtn">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Chat widget (unchanged) -->
  <div id="ljf-chat" aria-live="polite" aria-atomic="true" style="position:fixed;right:18px;bottom:22px;z-index:1600">
    <!-- simplified toggle only; JS below handles full behavior -->
    <button id="ljf-toggle" class="chat-toggle" aria-expanded="false" aria-label="Open chat" style="width:56px;height:56px;border-radius:999px;background:linear-gradient(180deg,#052c78,#083b9a);color:#fff;border:0;box-shadow:0 12px 36px rgba(5,44,120,0.18);">
      ðŸ’¬
    </button>
    <div id="ljf-panel" class="chat-panel" style="display:none;position:fixed;right:18px;bottom:90px;width:360px;background:#fff;border-radius:12px;box-shadow:0 28px 80px rgba(7,12,25,0.18);overflow:hidden">
      <div style="padding:12px 14px;background:linear-gradient(90deg,#083b9a,#052c78);color:#fff;display:flex;align-items:center;justify-content:space-between">
        <div style="display:flex;gap:10px;align-items:center"><div style="width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,#083b9a,#052c78);display:grid;place-items:center;color:#fff;font-weight:800">TJ</div><div><div style="font-weight:700">Chat with The Justice Firm</div><div style="font-size:.85rem;color:rgba(255,255,255,0.9)">Quick answers or book</div></div></div>
        <div style="display:flex;gap:8px"><button id="ljf-close" style="background:transparent;border:0;color:#fff;font-size:18px">âœ•</button></div>
      </div>
      <div id="ljf-body" style="padding:12px;height:340px;overflow:auto;background:#f7f9fc">
        <div class="message from-bot" style="background:#fff;padding:10px;border-radius:10px;display:inline-block;box-shadow:var(--shadow-1)">Hello â€” I'm the virtual assistant. Try: <button class="chip" data-suggest="book">Book consultation</button> <button class="chip" data-suggest="fees">Fees</button></div>
      </div>
      <div style="padding:10px;border-top:1px solid #eef3fb;display:flex;gap:8px">
        <input id="ljf-input" type="text" placeholder="Type a quick questionâ€¦" style="flex:1;padding:10px;border-radius:8px;border:1px solid #e6ebf5">
        <button id="ljf-send" class="small-cta" style="background:linear-gradient(90deg,#083b9a,#052c78);color:#fff;border-radius:8px;padding:8px 10px">Send</button>
      </div>
    </div>
  </div>

  <script>
    /* small utilities */
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));
    const bodyEl = document.body;

    // mobile nav
    const navToggle = document.getElementById('navToggle');
    const mobilePanel = document.getElementById('mobileNavPanel');
    const mobileClose = document.getElementById('mobileNavClose');
    function openMobileNav(){ mobilePanel.classList.add('open'); mobilePanel.setAttribute('aria-hidden','false'); navToggle.setAttribute('aria-expanded','true'); bodyEl.style.overflow='hidden'; const link = mobilePanel.querySelector('a'); if(link) link.focus(); }
    function closeMobileNav(){ mobilePanel.classList.remove('open'); mobilePanel.setAttribute('aria-hidden','true'); navToggle.setAttribute('aria-expanded','false'); bodyEl.style.overflow=''; navToggle.focus(); }
    navToggle?.addEventListener('click', ()=> mobilePanel.classList.contains('open') ? closeMobileNav() : openMobileNav());
    mobileClose?.addEventListener('click', closeMobileNav);
    mobilePanel?.addEventListener('click', (e)=> { if(e.target.matches('a.mobile-link')) closeMobileNav(); });

    // clock (Asia/Kolkata)
    function updateClock(){
      try {
        const opt = { timeZone: 'Asia/Kolkata', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
        const now = new Date();
        const t = now.toLocaleTimeString('en-IN', opt) + ' IST';
        const el = document.getElementById('clock-nav');
        if (el) el.textContent = t;
        const navClock = document.getElementById('clock');
        if (navClock) navClock.textContent = t;
      } catch(e) { console.error('Clock error', e); }
    }
    setInterval(updateClock, 1000); updateClock();

    // next slot
    (function setNextSlot(){
      const el = document.getElementById('nextSlot');
      const now = new Date();
      const next = new Date(now);
      const inIST = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }));
      const hour = inIST.getHours();
      if (hour >= 16) next.setDate(next.getDate() + 1);
      next.setHours(11,0,0,0);
      const opt = { weekday:'short', day:'numeric', month:'short', hour:'2-digit', minute:'2-digit', timeZone:'Asia/Kolkata', hour12:false };
      if (el) el.textContent = next.toLocaleString('en-IN', opt) + ' IST';
    })();

    // calendar
    function generateCalendar(containerId='calendar'){
      const el = document.getElementById(containerId);
      if(!el) return;
      const nowIST = new Date(new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }));
      const year = nowIST.getFullYear(); const month = nowIST.getMonth(); const today = nowIST.getDate();
      const months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month +1, 0).getDate();
      let html = `<table aria-label="${months[month]} ${year}"><caption style="text-align:left;padding:8px 0;font-weight:700">${months[month]} ${year}</caption><thead><tr><th scope="col">Su</th><th scope="col">Mo</th><th scope="col">Tu</th><th scope="col">We</th><th scope="col">Th</th><th scope="col">Fr</th><th scope="col">Sa</th></tr></thead><tbody>`;
      let d = 1;
      for(let r=0; r<6; r++){
        html += '<tr>';
        for(let c=0;c<7;c++){
          if(r===0 && c<firstDay){ html += '<td aria-hidden="true"></td>'; }
          else if(d>daysInMonth){ html += '<td aria-hidden="true"></td>'; }
          else { const isToday = (d === today); html += `<td ${isToday ? 'class="today" aria-current="date"' : ''}>${d}</td>`; d++; }
        }
        html += '</tr>';
        if(d>daysInMonth) break;
      }
      html += '</tbody></table>';
      el.innerHTML = html;
    }
    generateCalendar();
    (function scheduleMidnightRefresh(){ const now = new Date(); const nextMidnight = new Date(now.getFullYear(), now.getMonth(), now.getDate()+1, 0, 0, 2); const ms = nextMidnight - now; setTimeout(()=>{ generateCalendar(); scheduleMidnightRefresh(); }, ms); })();

    // booking modal
    const bookingModal = document.getElementById('bookingModal');
    const requestSlotBtn = document.getElementById('requestSlotBtn');
    const scheduleCallBtn = document.getElementById('scheduleCallBtn');
    const cancelBookingBtn = document.getElementById('cancelBookingBtn');
    function openBooking(){ if(!bookingModal) return; bookingModal.style.display='flex'; bookingModal.setAttribute('aria-hidden','false'); bodyEl.style.overflow='hidden'; const first = bookingModal.querySelector('input'); if(first) first.focus(); }
    function closeBooking(){ if(!bookingModal) return; bookingModal.style.display='none'; bookingModal.setAttribute('aria-hidden','true'); bodyEl.style.overflow=''; requestSlotBtn?.focus(); }
    requestSlotBtn?.addEventListener('click', openBooking);
    scheduleCallBtn?.addEventListener('click', openBooking);
    cancelBookingBtn?.addEventListener('click', closeBooking);
    bookingModal?.addEventListener('click', (e)=>{ if(e.target === bookingModal) closeBooking(); });

    // copy UPI small modal (used earlier)
    const copyUpiBtn = document.getElementById('copyUpiBtn');
    copyUpiBtn?.addEventListener('click', async () => {
      const upi = (document.getElementById('upi-id')?.textContent || '').trim();
      if(!upi){ alert('UPI ID not found'); return; }
      try {
        if (navigator.clipboard && navigator.clipboard.writeText) {
          await navigator.clipboard.writeText(upi);
          showInlineTemp(`UPI Copied: ${upi}`);
        } else {
          window.prompt('Copy UPI ID', upi);
        }
      } catch (err) {
        window.prompt('Copy UPI ID', upi);
      }
    });
    function showInlineTemp(msg, ms=2500){
      let el = document.getElementById('tempMessage');
      if(!el){
        el = document.createElement('div');
        el.id = 'tempMessage';
        el.style.position = 'fixed';
        el.style.left = '14px';
        el.style.bottom = '18px';
        el.style.background = '#03102a';
        el.style.color = '#fff';
        el.style.padding = '10px 12px';
        el.style.borderRadius = '8px';
        el.style.boxShadow = '0 8px 30px rgba(0,0,0,0.18)';
        el.style.zIndex = 9999;
        el.style.transition = 'opacity .28s';
        document.body.appendChild(el);
      }
      el.textContent = msg;
      el.style.opacity = '1';
      setTimeout(()=>{ if(el) el.style.opacity = '0'; }, ms);
    }

    // formspree handler
    function showMessage(formId, type, text, autoHide=true, ms=6000){
      const map = { contactForm: 'contactMessage', bookingForm: 'bookingMessage' };
      const mid = map[formId];
      if(!mid) return;
      const el = document.getElementById(mid);
      if(!el) return;
      el.innerHTML = '';
      if(type === 'success'){
        const svgNS = 'http://www.w3.org/2000/svg';
        const wrap = document.createElement('div'); wrap.style.display = 'flex'; wrap.style.alignItems = 'center'; wrap.style.gap = '10px';
        const svg = document.createElementNS(svgNS, 'svg'); svg.setAttribute('viewBox','0 0 24 24'); svg.classList.add('tick-svg');
        const circle = document.createElementNS(svgNS,'circle'); circle.setAttribute('cx','12'); circle.setAttribute('cy','12'); circle.setAttribute('r','10'); circle.setAttribute('fill','rgba(31,122,58,0.08)');
        const path = document.createElementNS(svgNS,'path'); path.setAttribute('d','M6.5 12.3l3.2 3.2 7.8-8.1'); path.setAttribute('fill','none'); path.classList.add('tick-path');
        svg.appendChild(circle); svg.appendChild(path);
        const txt = document.createElement('div'); txt.textContent = text;
        wrap.appendChild(svg); wrap.appendChild(txt); el.appendChild(wrap);
        el.className = 'form-message success';
        void path.getBoundingClientRect();
      } else {
        el.textContent = text;
        el.className = 'form-message error';
      }
      el.style.display = 'flex';
      el.setAttribute('tabindex','-1');
      el.focus();
      if(autoHide){ clearTimeout(el._hideTimer); el._hideTimer = setTimeout(()=>{ el.style.display = 'none'; }, ms); }
    }
    function attachFormspreeHandler(formId){
      const form = document.getElementById(formId);
      if(!form) return;
      form.addEventListener('submit', async function(e){
        e.preventDefault();
        const submitBtn = form.querySelector('button[type="submit"]');
        const originalText = submitBtn ? submitBtn.textContent : '';
        try {
          if (submitBtn){ submitBtn.disabled = true; submitBtn.textContent = 'Sendingâ€¦'; }
          const formData = new FormData(form);
          if (formId === 'bookingForm') { formData.append('_subject', 'Booking Slot Request from justicefirms.com'); }
          else if (formId === 'contactForm') { formData.append('_subject', 'New Contact Request from justicefirms.com'); }
          const action = form.getAttribute('action');
          if (!action || action.indexOf('formspree.io') === -1) {
            showMessage(formId, 'error', 'Form endpoint not set. Please create a form on formspree.io and paste the endpoint into form action.');
            return;
          }
          const resp = await fetch(action, { method: 'POST', body: formData, headers: { 'Accept': 'application/json' }});
          const data = await resp.json().catch(() => ({}));
          if (resp.ok) {
            showMessage(formId, 'success', 'Received â€” we will contact you shortly.');
            form.reset();
            if(formId === 'bookingForm') closeBooking();
          } else {
            let msg = 'Unable to send request. Please try again later.';
            if (data && data.errors && Array.isArray(data.errors)) { msg = data.errors.map(i => i.message || i).join('; '); }
            else if (data && data.message) { msg = data.message; }
            showMessage(formId, 'error', msg);
          }
        } catch (err) {
          console.error('Form submit error', err);
          showMessage(formId, 'error', 'Network error. Please check your connection and try again.');
        } finally {
          if (submitBtn){ submitBtn.disabled = false; submitBtn.textContent = originalText; }
        }
      });
    }
    attachFormspreeHandler('contactForm');
    attachFormspreeHandler('bookingForm');

    // scroll reveal
    if ('IntersectionObserver' in window && !window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      const obs = new IntersectionObserver((entries, o) => {
        entries.forEach(en => { if (en.isIntersecting) { en.target.classList.add('is-revealed'); o.unobserve(en.target); } });
      }, { threshold: 0.12 });
      document.querySelectorAll('[data-reveal]').forEach(el => obs.observe(el));
    } else {
      document.querySelectorAll('[data-reveal]').forEach(el => el.classList.add('is-revealed'));
    }

    // hero parallax skip on touch
    (function(){
      const hero = document.querySelector('.hero');
      if(!hero) return;
      if(window.matchMedia('(pointer: coarse)').matches) return;
      let raf=null;
      hero.addEventListener('mousemove', e => {
        const rect = hero.getBoundingClientRect();
        const x = (e.clientX - (rect.left + rect.width/2))/rect.width;
        const y = (e.clientY - (rect.top + rect.height/2))/rect.height;
        cancelAnimationFrame(raf);
        raf = requestAnimationFrame(()=> hero.style.transform = `translate3d(${x*6}px,${y*3}px,0)`);
      });
      hero.addEventListener('mouseleave', ()=> hero.style.transform = 'translate3d(0,0,0)');
    })();

    // FAB toggle
    const fab = document.getElementById('fab');
    const fabToggle = document.getElementById('fabToggle');
    const fabMenu = document.getElementById('fabMenu');
    function toggleFab(open){
      const isOpen = open === undefined ? fab.getAttribute('aria-expanded') === 'true' : open;
      fab.setAttribute('aria-expanded', String(!isOpen));
      fabMenu.setAttribute('aria-hidden', String(isOpen));
      const icon = document.getElementById('fabIcon');
      if(icon) icon.style.transform = !isOpen ? 'rotate(45deg) scale(1.02)' : 'rotate(0deg) scale(1)';
      fabToggle.setAttribute('aria-pressed', String(!isOpen));
    }
    fabToggle?.addEventListener('click', ()=> toggleFab());
    document.addEventListener('click', (e)=>{ if(!fab) return; if(fab.contains(e.target)) return; if(fab.getAttribute('aria-expanded') === 'true') toggleFab(false); });
    fabToggle?.addEventListener('keydown', (e)=> { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleFab(); } });

    // back to top
    const backTop = document.getElementById('backTop');
    window.addEventListener('scroll', ()=> { if(window.scrollY > 300) backTop.style.display = 'flex'; else backTop.style.display = 'none'; });
    backTop?.addEventListener('click', ()=> window.scrollTo({top:0,behavior:'smooth'}));

    // ESC close catches
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (bookingModal && bookingModal.style.display === 'flex') closeBooking();
        if (fab && fab.getAttribute('aria-expanded') === 'true') toggleFab(false);
        if (mobilePanel && mobilePanel.classList.contains('open')) closeMobileNav();
        const lj = document.getElementById('ljf-panel'); if (lj && lj.style.display === 'flex') { lj.style.display = 'none'; document.getElementById('ljf-toggle').setAttribute('aria-expanded','false'); }
      }
    });

    /* ARTICLES client-side (left-thumbnail layout) */
    (function(){
      const articles = [
        { id:'sec125', title:'Section 125 CrPC: Maintenance â€” What you must know', date:'2024-09-12', tags:['Family','Maintenance'], thumb:'fam.jpg', excerpt:'A concise guide to maintenance claims under Section 125 CrPC â€” eligibility, documents, and the process in UP courts.', url:'articles/sec125.html', body:`<p>This guide explains entitlement, typical timelines and documents required to file a maintenance application under Section 125 CrPC. Practical tips and court approach.</p>`},
        { id:'bail-law', title:'Understanding Bail: Regular vs Anticipatory', date:'2024-07-05', tags:['Criminal','Bail'], thumb:'crim.jpg', excerpt:'Key differences between regular bail and anticipatory bail, and practical tips for early release.', url:'articles/bail-law.html', body:`<p>When to apply for anticipatory bail, timelines and the courtsâ€™ approach â€” practical advice for accused persons.</p>`},
        { id:'partition', title:'Partition Suits: Documents & Strategy', date:'2024-03-22', tags:['Civil','Property'], thumb:'prop.jpg', excerpt:'Step-by-step: how partition suits work, essential documents and how to protect your rights.', url:'articles/partition-suits.html', body:`<p>Checklist of documents, common pitfalls in partition suits and recommended approach for early resolution.</p>`},
        { id:'practical-tips', title:'Practical Steps After Receiving Notice', date:'2024-01-18', tags:['General','Procedure'], thumb:'art.jpg', excerpt:'Immediate practical steps to take after receiving a legal notice â€” checklist for respondents.', url:'articles/notice-steps.html', body:`<p>Short checklist: doâ€™s and donâ€™ts, preserving evidence and acting promptly.</p>`}
      ];
      const grid = document.getElementById('articlesGrid');
      const searchInput = document.getElementById('articleSearch');
      const tagsWrap = document.getElementById('articleTags');
      const articlesCount = document.getElementById('articlesVisible');
      const sortSelect = document.getElementById('articlesSort');
      const preview = document.getElementById('articlePreview');
      const previewTitle = document.getElementById('previewTitle');
      const previewBody = document.getElementById('previewBody');
      const previewMeta = document.getElementById('previewMeta');
      const previewClose = document.getElementById('previewClose');

      const tagSet = new Set();
      articles.forEach(a => a.tags.forEach(t => tagSet.add(t)));
      const tags = Array.from(tagSet);

      function renderTagFilters(){
        tagsWrap.innerHTML = '';
        const allBtn = document.createElement('button');
        allBtn.className = 'tag-chip';
        allBtn.textContent = 'All';
        allBtn.dataset.tag = 'all';
        allBtn.setAttribute('aria-pressed','true');
        tagsWrap.appendChild(allBtn);
        tags.forEach(t => {
          const btn = document.createElement('button');
          btn.className = 'tag-chip';
          btn.textContent = t;
          btn.dataset.tag = t;
          btn.setAttribute('aria-pressed','false');
          tagsWrap.appendChild(btn);
        });
        tagsWrap.addEventListener('click', (e)=>{
          const btn = e.target.closest('button[data-tag]');
          if(!btn) return;
          tagsWrap.querySelectorAll('button[data-tag]').forEach(b=>b.setAttribute('aria-pressed','false'));
          btn.setAttribute('aria-pressed','true');
          applyFilters();
        });
      }

      function estimateReadingTime(text){
        const words = (text || '').split(/\s+/).filter(Boolean).length;
        const minutes = Math.max(1, Math.round(words / 200));
        return `${minutes} min read`;
      }

      function renderArticles(list){
        const order = sortSelect.value || 'newest';
        list.sort((a,b) => order === 'newest' ? (new Date(b.date) - new Date(a.date)) : (new Date(a.date) - new Date(b.date)));
        grid.innerHTML = '';
        if(list.length === 0){ grid.innerHTML = '<div class="card muted">No articles found.</div>'; articlesCount.textContent = 0; return; }
        list.forEach(article => {
          const row = document.createElement('article');
          row.className = 'article-row';
          row.setAttribute('tabindex','0');
          row.innerHTML = `
            <img class="article-thumb" loading="lazy" alt="${escapeHtml(article.title)}" src="${article.thumb}">
            <div class="article-body">
              <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px">
                <div class="article-title">${escapeHtml(article.title)}</div>
                <div class="muted" style="font-size:.92rem">${new Date(article.date).toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'})}</div>
              </div>
              <div class="article-excerpt">${escapeHtml(article.excerpt)}</div>
              <div style="display:flex;gap:8px;align-items:center;margin-top:auto">
                <a class="read-more btn btn--ghost btn--small" href="${article.url}">Read more â†’</a>
                <button class="btn btn--small" data-preview="${article.id}">Preview</button>
                <div style="margin-left:auto" class="muted">${estimateReadingTime(article.excerpt + ' ' + (article.body || ''))}</div>
              </div>
            </div>
          `;
          grid.appendChild(row);
        });

        grid.querySelectorAll('button[data-preview]').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const id = btn.dataset.preview;
            openPreview(id);
          });
        });
        articlesCount.textContent = list.length;
      }

      function applyFilters(){
        const q = (searchInput.value || '').trim().toLowerCase();
        const active = Array.from(tagsWrap.querySelectorAll('button[data-tag]')).find(b => b.getAttribute('aria-pressed') === 'true');
        const tag = active ? active.dataset.tag : 'all';
        let filtered = articles.filter(a => {
          const hay = (a.title + ' ' + a.excerpt + ' ' + (a.tags||[]).join(' ')).toLowerCase();
          const matchQ = !q || hay.indexOf(q) !== -1;
          const matchTag = tag === 'all' || a.tags.includes(tag);
          return matchQ && matchTag;
        });
        renderArticles(filtered);
      }

      function openPreview(id){
        const a = articles.find(x=>x.id===id);
        if(!a) return;
        previewTitle.textContent = a.title;
        previewMeta.textContent = `${new Date(a.date).toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'})} â€¢ ${a.tags.join(' â€¢ ')}`;
        previewBody.innerHTML = a.body || `<p>${a.excerpt}</p>`;
        preview.style.display = 'flex';
        preview.querySelector('[role="dialog"]').focus();
      }
      function closePreview(){ preview.style.display = 'none'; }

      function escapeHtml(s){ return String(s).replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]); }); }

      renderTagFilters();
      renderArticles(articles);
      searchInput.addEventListener('input', () => applyFilters());
      sortSelect.addEventListener('change', () => applyFilters());
      document.getElementById('previewClose')?.addEventListener('click', closePreview);
      preview?.addEventListener('click', (e) => { if(e.target === preview) closePreview(); });
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && preview && preview.style.display === 'flex') closePreview(); });
    })();

    /* Chat widget basic behaviour */
    (function(){
      const toggle = document.getElementById('ljf-toggle');
      const panel = document.getElementById('ljf-panel');
      const closeBtn = document.getElementById('ljf-close');
      const body = document.getElementById('ljf-body');
      const input = document.getElementById('ljf-input');
      const sendBtn = document.getElementById('ljf-send');

      const KB = [
        { q: ['fee','fees','charge','pricing','cost'], a: 'Our fees vary by matter. Typical consultation is â‚¹500â€“â‚¹1500. For case fee estimates, please tell the matter type or book a consultation.' },
        { q: ['book','appointment','slot'], a: 'You can book a consultation now â€” I can collect name & phone and our team will confirm promptly.' },
        { q: ['documents','papers','docs'], a: 'Documents depend on matter. For property: title deeds, tax receipts; for family: marriage certificate, ID, prior orders. Want a checklist for a specific matter?' },
        { q: ['bail','arrest'], a: 'If arrested, remain calm and ask for a lawyer immediately. Do not sign documents without counsel. Contact us on WhatsApp for urgent assistance.' },
        { q: ['timing','timings','hours','open'], a: 'Office hours: Monâ€“Sun 9:00 AM â€“ 9:00 PM. For urgent matters outside hours, message on WhatsApp.' }
      ];

      function appendMessage(text, who='bot'){
        const el = document.createElement('div');
        el.className = 'message ' + (who === 'bot' ? 'from-bot' : 'from-user');
        el.style.padding = '8px';
        el.style.borderRadius = '10px';
        el.style.display = 'inline-block';
        if(who==='bot'){ el.style.background='#fff'; el.style.boxShadow='0 6px 20px rgba(7,12,25,0.06)'; }
        else { el.style.background='linear-gradient(90deg,#17c964,#0ba35a)'; el.style.color='#fff'; }
        el.textContent = text;
        body.appendChild(el);
        body.scrollTop = body.scrollHeight;
      }

      function openPanel(){ panel.style.display = 'flex'; toggle.setAttribute('aria-expanded','true'); setTimeout(()=>input.focus(),120); }
      function closePanel(){ panel.style.display = 'none'; toggle.setAttribute('aria-expanded','false'); toggle.focus(); }
      toggle.addEventListener('click', ()=> { panel.style.display === 'flex' ? closePanel() : openPanel(); });
      closeBtn.addEventListener('click', closePanel);

      sendBtn.addEventListener('click', ()=> {
        const v = input.value.trim();
        if(!v) return;
        appendMessage(v, 'user');
        input.value = '';
        // simple KB match
        const low = v.toLowerCase();
        let matched = false;
        for(const item of KB){
          for(const kw of item.q){
            if(low.includes(kw)){
              setTimeout(()=> appendMessage(item.a, 'bot'), 420);
              matched = true; break;
            }
          }
          if(matched) break;
        }
        if(!matched) setTimeout(()=> appendMessage('Thanks â€” we will review and contact you. For urgent matters use WhatsApp.', 'bot'), 700);
      });
      input.addEventListener('keydown', (e)=> { if(e.key === 'Enter') { e.preventDefault(); sendBtn.click(); } });

      // auto open once per session
      try {
        if(!localStorage.getItem('ljf_chat_shown')){ setTimeout(()=> openPanel(), 900); localStorage.setItem('ljf_chat_shown', '1'); }
      } catch(e){}
    })();

    // small safety
    $$('a[href^="tel:"], a[href^="mailto:"]').forEach(a=>a.setAttribute('rel','noopener'));
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
