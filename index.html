<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <!-- ======================================================
       DOCUMENT META
  ======================================================= -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>The Justice Firm | Advocates & Legal Consultants</title>

  <meta name="description"
        content="The Justice Firm is a premier law practice based in Prayagraj (Allahabad), Uttar Pradesh, offering expert legal representation in Criminal, Family, Civil, and Constitutional matters.">

  <meta name="keywords"
        content="Advocate Prayagraj, Lawyer Allahabad, Criminal Lawyer UP, Bail Advocate, Family Lawyer, Civil Lawyer">

  <meta name="author" content="The Justice Firm">

  <!-- ======================================================
       SEO / SOCIAL
  ======================================================= -->
  <meta property="og:title" content="The Justice Firm | Advocates & Legal Consultants">
  <meta property="og:description"
        content="Trusted legal counsel with integrity, discretion, and precision.">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="en_IN">

  <!-- ======================================================
       STRUCTURED DATA (LEGAL SERVICE)
  ======================================================= -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LegalService",
    "name": "The Justice Firm",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Prayagraj",
      "addressRegion": "Uttar Pradesh",
      "addressCountry": "IN"
    },
    "areaServed": "Uttar Pradesh",
    "email": "adv.shastri@gmail.com",
    "telephone": "+91-9454183793"
  }
  </script>

  <!-- ======================================================
       FONTS
  ======================================================= -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:wght@400;600;700&display=swap"
        rel="stylesheet">

  <!-- ======================================================
       TAILWIND
  ======================================================= -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ======================================================
       ICONS
  ======================================================= -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- ======================================================
       TAILWIND CONFIG
  ======================================================= -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            obsidian: '#050505',
            charcoal: '#0a0f14',
            navy: {
              900: '#0B1120',
              800: '#161e2e'
            },
            gold: {
              300: '#F0E68C',
              400: '#D4AF37',
              500: '#C5A059',
              600: '#997B36'
            }
          },
          fontFamily: {
            serif: ['Playfair Display', 'serif'],
            sans: ['Inter', 'sans-serif']
          },
          animation: {
            'fade-in': 'fadeIn .6s ease-out',
            'slide-up': 'slideUp .8s ease-out'
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' }
            },
            slideUp: {
              '0%': { transform: 'translateY(28px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' }
            }
          }
        }
      }
    }
  </script>

  <!-- ======================================================
       GLOBAL STYLES
  ======================================================= -->
  <style>
    body {
      background-color: #050505;
      color: #cbd5e1;
      -webkit-font-smoothing: antialiased;
    }

    .glass-panel {
      background: rgba(11, 17, 32, 0.85);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      border: 1px solid rgba(255,255,255,0.05);
    }

    .gold-text-gradient {
      background: linear-gradient(135deg, #F0E68C 0%, #C5A059 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .modal-open {
      overflow: hidden;
    }

    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-thumb {
      background: #334155;
      border-radius: 4px;
    }
  </style>
</head>

<body class="font-sans selection:bg-gold-600/30 selection:text-white">

<!-- ======================================================
     NAVIGATION
======================================================= -->
<nav id="navbar"
     class="fixed top-0 w-full z-50 bg-obsidian/95 backdrop-blur-md
            border-b border-white/5 transition-all duration-300"
     role="navigation"
     aria-label="Main Navigation">

  <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">

    <!-- Brand -->
    <div class="flex items-center gap-4">
      <div class="w-11 h-11 bg-obsidian border border-gold-500/30
                  flex items-center justify-center rounded-sm">
        <span class="font-serif font-bold text-2xl
                     bg-clip-text text-transparent
                     bg-gradient-to-br from-white via-gold-300 to-gold-500">
          JF
        </span>
      </div>
      <div>
        <h1 class="text-lg md:text-xl font-serif text-white tracking-wide">
          The Justice<span class="text-gold-500">Firm</span>
        </h1>
        <p class="text-[10px] uppercase tracking-[0.25em] text-slate-500">
          Prayagraj • Uttar Pradesh
        </p>
      </div>
    </div>

    <!-- Desktop Menu -->
    <div class="hidden md:flex items-center gap-8 text-sm tracking-wide">
      <a href="#practice" class="hover:text-gold-400 transition-colors">Practice</a>
      <a href="#team" class="hover:text-gold-400 transition-colors">Team</a>
      <a href="#booking" class="hover:text-gold-400 transition-colors">Consultation</a>
      <a href="#contact"
         class="px-6 py-3 bg-gold-600 hover:bg-gold-500
                text-white rounded-sm transition-all">
        Book Appointment
      </a>
    </div>

    <!-- Mobile Toggle (JS later) -->
    <button class="md:hidden text-white" aria-label="Open Menu">
      <i data-lucide="menu"></i>
    </button>

  </div>
</nav>

<!-- ======================================================
     HERO
======================================================= -->
<section class="relative min-h-screen flex items-center justify-center
                overflow-hidden pt-24">

  <div class="absolute inset-0 bg-gradient-to-b
              from-obsidian via-obsidian/85 to-transparent"></div>

  <div class="relative z-10 max-w-4xl mx-auto px-6 text-center
              animate-slide-up">

    <div class="inline-block px-4 py-1 border border-gold-500/30
                rounded-full bg-gold-500/5 mb-6">
      <span class="text-gold-400 text-xs uppercase tracking-widest">
        Trusted Since 2010
      </span>
    </div>

    <h2 class="text-3xl sm:text-4xl md:text-6xl
               font-serif text-white leading-tight mb-6">
      Discreet, Strategic &<br>
      <span class="gold-text-gradient">
        Results-Focused Legal Counsel
      </span>
    </h2>

    <p class="text-slate-400 max-w-2xl mx-auto
              text-base md:text-lg leading-relaxed">
      Expert representation in Criminal, Family, Civil, and Constitutional
      matters before District Courts, High Courts, and Tribunals.
    </p>

    <div class="flex flex-col sm:flex-row gap-4 justify-center mt-10">
      <a href="#contact"
         class="px-8 py-4 bg-gold-600 hover:bg-gold-500
                text-white uppercase tracking-wider text-sm">
        Book Consultation
      </a>
      <a href="#chatbot"
         class="px-8 py-4 border border-slate-600
                hover:border-gold-500 text-white
                hover:text-gold-400 uppercase tracking-wider text-sm">
        Ask Legal Assistant
      </a>
    </div>

  </div>
</section>

<!-- ======================================================
     ABOUT
======================================================= -->
<section class="py-24 px-6 bg-obsidian">
  <div class="max-w-4xl mx-auto text-center">
    <h3 class="text-2xl md:text-3xl font-serif text-white mb-6">
      Clarity, Discipline & Client Dignity
    </h3>
    <p class="text-slate-400 leading-relaxed text-base md:text-lg">
      The Justice Firm is founded on the belief that legal representation
      must combine doctrinal excellence with human sensitivity.
      Every brief is approached with precision, confidentiality,
      and a commitment to safeguarding the rights and dignity of clients.
    </p>
  </div>
</section>

<!-- ======================================================
     TRUST MARKERS
======================================================= -->
<section class="py-16 bg-navy-900/30">
  <div class="max-w-6xl mx-auto px-6 grid md:grid-cols-3 gap-8 text-center">
    <div>
      <i data-lucide="scale" class="mx-auto text-gold-400 mb-4"></i>
      <p class="text-white font-medium">Courtroom Excellence</p>
    </div>
    <div>
      <i data-lucide="shield-check" class="mx-auto text-gold-400 mb-4"></i>
      <p class="text-white font-medium">Confidential Representation</p>
    </div>
    <div>
      <i data-lucide="award" class="mx-auto text-gold-400 mb-4"></i>
      <p class="text-white font-medium">Ethical Practice</p>
    </div>
  </div>
</section>

<!-- ======================================================
     DAILY LEGAL INSIGHT (SHELL)
======================================================= -->
<section class="border-t border-white/5 bg-navy-900/40">
  <div class="max-w-7xl mx-auto px-6 py-4 flex gap-4 items-center">
    <i data-lucide="sparkles" class="text-gold-400"></i>
    <p class="text-sm italic text-slate-300">
      “Justice delayed is justice denied.”
    </p>
  </div>
          </section>
          <!-- ======================================================
     PRACTICE AREAS
======================================================= -->
<section id="practice" class="py-24 px-6 bg-navy-900/20">
  <div class="max-w-7xl mx-auto">

    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-serif text-white mb-4">
        Core Practice Areas
      </h2>
      <div class="h-1 w-24 bg-gold-500 mx-auto"></div>
      <p class="text-slate-400 max-w-2xl mx-auto mt-6">
        Our chambers provide comprehensive representation across
        trial courts, appellate forums, and constitutional benches.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

      <!-- Criminal -->
      <div class="p-8 bg-navy-900/40 border border-white/5 rounded-sm
                  hover:border-gold-500/30 transition-all">
        <i data-lucide="shield" class="text-gold-400 w-10 h-10 mb-6"></i>
        <h3 class="text-xl font-serif text-white mb-3">
          Criminal Defence
        </h3>
        <p class="text-slate-400 text-sm leading-relaxed">
          Representation in FIRs, bail and anticipatory bail,
          trial proceedings, appeals, and criminal revisions
          before District Courts and High Courts.
        </p>
      </div>

      <!-- Family -->
      <div class="p-8 bg-navy-900/40 border border-white/5 rounded-sm
                  hover:border-gold-500/30 transition-all">
        <i data-lucide="users" class="text-gold-400 w-10 h-10 mb-6"></i>
        <h3 class="text-xl font-serif text-white mb-3">
          Family & Matrimonial
        </h3>
        <p class="text-slate-400 text-sm leading-relaxed">
          Divorce, restitution, maintenance, custody, domestic
          violence matters handled with discretion and sensitivity.
        </p>
      </div>

      <!-- Civil -->
      <div class="p-8 bg-navy-900/40 border border-white/5 rounded-sm
                  hover:border-gold-500/30 transition-all">
        <i data-lucide="gavel" class="text-gold-400 w-10 h-10 mb-6"></i>
        <h3 class="text-xl font-serif text-white mb-3">
          Civil & Property
        </h3>
        <p class="text-slate-400 text-sm leading-relaxed">
          Partition suits, injunctions, recovery proceedings,
          title disputes, and execution matters.
        </p>
      </div>

      <!-- Constitutional -->
      <div class="p-8 bg-navy-900/40 border border-white/5 rounded-sm
                  hover:border-gold-500/30 transition-all">
        <i data-lucide="scale" class="text-gold-400 w-10 h-10 mb-6"></i>
        <h3 class="text-xl font-serif text-white mb-3">
          Constitutional & Writs
        </h3>
        <p class="text-slate-400 text-sm leading-relaxed">
          Writ petitions, public law remedies, service matters,
          and constitutional challenges before High Courts.
        </p>
      </div>

      <!-- Arbitration -->
      <div class="p-8 bg-navy-900/40 border border-white/5 rounded-sm
                  hover:border-gold-500/30 transition-all">
        <i data-lucide="file-check" class="text-gold-400 w-10 h-10 mb-6"></i>
        <h3 class="text-xl font-serif text-white mb-3">
          Arbitration & Mediation
        </h3>
        <p class="text-slate-400 text-sm leading-relaxed">
          Alternative dispute resolution for commercial,
          contractual, and family disputes with efficiency.
        </p>
      </div>

      <!-- Advisory -->
      <div class="p-8 bg-navy-900/40 border border-white/5 rounded-sm
                  hover:border-gold-500/30 transition-all">
        <i data-lucide="briefcase" class="text-gold-400 w-10 h-10 mb-6"></i>
        <h3 class="text-xl font-serif text-white mb-3">
          Advisory & Opinions
        </h3>
        <p class="text-slate-400 text-sm leading-relaxed">
          Written legal opinions, compliance advisory,
          and litigation risk assessment.
        </p>
      </div>

    </div>
  </div>
</section>

<!-- ======================================================
     TEAM SECTION
======================================================= -->
<section id="team" class="py-28 px-6 bg-obsidian">
  <div class="max-w-7xl mx-auto">
    <div class="text-center mb-20">
      <span class="text-gold-400 text-xs uppercase tracking-widest">
        Our Chambers
      </span>
      <h2 class="text-3xl md:text-5xl font-serif text-white mt-4">
        Distinguished Counsel
      </h2>
      <p class="text-slate-400 max-w-2xl mx-auto mt-6">
        Our firm is defined by the integrity, experience,
        and scholarship of its advocates.
      </p>
    </div>

    <div id="team-grid"
         class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      <!-- Populated via JS in Part 3 -->
    </div>

  </div>
</section>

<!-- ======================================================
     TEAM MODAL (PROFILE VIEW)
======================================================= -->
<div id="team-modal"
     class="hidden fixed inset-0 z-50 bg-black/90
            flex items-center justify-center p-6"
     role="dialog"
     aria-modal="true">

  <div class="bg-navy-900 border border-gold-500/20
              max-w-lg w-full p-8 rounded relative">

    <button onclick="closeTeamModal()"
            class="absolute top-4 right-4 text-slate-400
                   hover:text-white">
      <i data-lucide="x"></i>
    </button>

    <h3 id="modal-name"
        class="text-2xl font-serif text-gold-400 mb-2">
    </h3>

    <p id="modal-role"
       class="text-xs uppercase tracking-widest text-white mb-6">
    </p>

    <p id="modal-bio"
       class="text-slate-300 text-sm leading-relaxed">
    </p>

    <div class="mt-8 pt-6 border-t border-white/5">
      <a href="#contact"
         onclick="closeTeamModal()"
         class="block w-full text-center bg-gold-600
                hover:bg-gold-500 text-white py-3
                uppercase tracking-wider text-sm">
        Book Consultation
      </a>
    </div>

  </div>
</div>

<!-- ======================================================
     BOOKING CALENDAR
======================================================= -->
<section id="booking" class="py-24 px-6 bg-navy-900/30">
  <div class="max-w-5xl mx-auto">

    <div class="text-center mb-12">
      <h2 class="text-3xl font-serif text-white mb-4">
        Schedule a Consultation
      </h2>
      <p class="text-slate-400">
        Request a confidential appointment at your convenience.
      </p>
    </div>

    <div class="border border-white/5 rounded overflow-hidden">
      <!-- Calendly Inline Widget -->
<div class="calendly-inline-widget"
     data-url="https://calendly.com/adv-shastri/30min"
     style="min-width:320px;height:650px;">
</div>

<script src="https://assets.calendly.com/assets/external/widget.js"
        async></script>
    </div>

    <p class="text-[11px] text-slate-500 italic mt-4 text-center">
      Appointments are subject to confirmation.
    </p>

  </div>
</section>

<!-- ======================================================
     TESTIMONIALS
======================================================= -->
<section class="py-24 px-6 bg-obsidian border-t border-white/5">
  <div class="max-w-4xl mx-auto text-center">

    <h2 class="text-2xl md:text-3xl font-serif text-gold-400 mb-16">
      Client Testimonials
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-10">

      <div class="p-8 bg-navy-900/40 border border-white/5 text-left">
        <p class="text-slate-300 italic leading-relaxed mb-6">
          “Adv. Shastri guided us through a complex family dispute
          with professionalism and compassion.”
        </p>
        <p class="text-gold-400 font-serif">
          — Client, Prayagraj
        </p>
      </div>

      <div class="p-8 bg-navy-900/40 border border-white/5 text-left">
        <p class="text-slate-300 italic leading-relaxed mb-6">
          “Clear strategy and effective representation in a
          contested property matter.”
        </p>
        <p class="text-gold-400 font-serif">
          — Client, Lucknow
        </p>
      </div>

    </div>

  </div>
</section>
<!-- ======================================================
     AI LEGAL CHATBOT (FREE • LOCKED)
======================================================= -->
<div id="chatbot"
     class="
       fixed z-50 hidden flex flex-col glass-panel
       border border-gold-500/30 shadow-2xl

       /* Mobile: FULL SCREEN */
       inset-0 w-full h-full rounded-none

       /* Desktop: FLOATING PANEL */
       md:inset-auto md:bottom-6 md:right-6
       md:w-[380px] md:h-[520px]
       md:rounded-lg
     ">

  <!-- Header -->
  <div class="p-4 border-b border-gold-500/20 bg-navy-900">
    <div class="flex items-center justify-between">
      <div>
        <h3 class="font-serif text-gold-400 text-lg">
          AI Legal Assistant
        </h3>
        <p class="text-[10px] text-slate-400 italic">
          Legal information only • English / हिंदी / Hinglish
        </p>
        <span id="case-category-label"
              class="text-[10px] text-gold-400 uppercase tracking-widest">
          General Legal
        </span>
      </div>
      <button onclick="toggleChatbot()"
              class="text-slate-400 hover:text-white">
        <i data-lucide="x"></i>
      </button>
    </div>
  </div>

  <!-- Messages -->
  <div id="chat-messages"
       class="flex-1 overflow-y-auto p-4 space-y-4 text-sm bg-obsidian/60">
    <div class="bg-navy-800 border border-slate-700
                p-3 rounded text-slate-200">
      नमस्ते। I am the AI Legal Assistant for The Justice Firm.
      <br><br>
      I can provide general legal information related to
      Criminal, Family, Civil, and Constitutional law in India.
    </div>
  </div>

  <!-- Input -->
  <div class="p-3 border-t border-gold-500/20 bg-navy-900 space-y-2">
    <input id="gemini-key"
           type="password"
           placeholder="AIzaSyDpssACM71Ozu_k3r6zPj1EuEtoykqLOcE"
           class="w-full bg-obsidian border border-slate-700
                  p-2 text-xs text-white outline-none">

    <div class="flex gap-2">
      <input id="chat-input"
             placeholder="Ask a legal question…"
             class="flex-1 bg-obsidian border border-slate-700
                    p-2 text-sm text-white outline-none">
      <button onclick="sendChatMessage()"
              class="bg-gold-600 hover:bg-gold-500
                     px-4 py-2 text-white rounded text-sm">
        Send
      </button>
    </div>
  </div>
</div>

<!-- Chat Toggle Button -->
<button id="chatbot-toggle"
        onclick="toggleChatbot()"
        class="fixed bottom-6 right-6 z-40
               w-14 h-14 rounded-full
               bg-gold-600 hover:bg-gold-500
               text-white flex items-center justify-center
               shadow-2xl">
  <i data-lucide="message-square"></i>
</button>

<!-- ======================================================
     TEAM DATA & LOGIC
======================================================= -->
<script>
document.addEventListener("DOMContentLoaded", () => {

  const teamMembers = [
    {
      name: "Adv. Ganga Shankar Shastri",
      role: "Founder & Lead Counsel",
      bio: "15+ years of experience before District Courts and High Courts, specialising in criminal defence and property litigation.",
      image: "./ganga.jpg"
    },
    {
      name: "Adv. Minakshi Shastri",
      role: "Senior Associate",
      bio: "LL.M. with extensive experience in civil disputes, appellate drafting, and legal research.",
      image: "./minakshi.jpg"
    },
    {
      name: "Adv. Shivani Shastri",
      role: "Consulting Advocate",
      bio: "LL.M., pursuing Ph.D., focusing on constitutional law, policy research, and advisory opinions.",
      image: "./shivani.jpg"
    },
    {
      name: "Adv. Sanjay Kumar",
      role: "Associate Counsel",
      bio: "Focused on criminal trials, bail matters, and pragmatic defence strategies.",
      image: null
    }
  ];

  const teamGrid = document.getElementById("team-grid");

  teamMembers.forEach((m, index) => {
    const card = document.createElement("div");
    card.className =
      "group bg-navy-900/40 border border-white/5 p-6 text-center hover:border-gold-500/30 transition-all cursor-pointer";

    card.onclick = () => openTeamModal(index);

    const avatar = m.image
      ? `<img src="${m.image}"
              class="w-full h-full object-cover"
              style="object-position:center 20%;"
              loading="lazy">`
      : `<i data-lucide="user" class="w-12 h-12 text-slate-500"></i>`;

    card.innerHTML = `
      <div class="w-32 h-32 mx-auto mb-4 rounded-full overflow-hidden bg-slate-800 flex items-center justify-center">
        ${avatar}
      </div>
      <h3 class="font-serif text-white">${m.name}</h3>
      <p class="text-gold-400 text-xs uppercase mt-2">${m.role}</p>
    `;

    teamGrid.appendChild(card);
  });

  lucide.createIcons();
});
</script>
<!-- ======================================================
     TEAM MODAL LOGIC
======================================================= -->
<script>
function openTeamModal(index) {
  const m = teamMembers[index];
  document.getElementById("modal-name").innerText = m.name;
  document.getElementById("modal-role").innerText = m.role;
  document.getElementById("modal-bio").innerText = m.bio;
  document.getElementById("team-modal").classList.remove("hidden");
  document.body.classList.add("modal-open");
}

function closeTeamModal() {
  document.getElementById("team-modal").classList.add("hidden");
  document.body.classList.remove("modal-open");
}
</script>

<!-- ======================================================
     CHATBOT CORE LOGIC
======================================================= -->
<script>
let chatTranscript = [];
let detectedCaseCategory = "General Legal";

const LEGAL_KEYWORDS = [
  "law","legal","court","case","bail","fir","divorce","custody",
  "maintenance","criminal","civil","property","ipc","crpc",
  "writ","constitution","advocate","trial"
];

function isLegalQuery(text) {
  const t = text.toLowerCase();
  return LEGAL_KEYWORDS.some(k => t.includes(k));
}

function detectLanguage(text) {
  if (/[\u0900-\u097F]/.test(text)) return "hi";
  if (/kya|kaise|bail|case|divorce|fir/i.test(text)) return "hinglish";
  return "en";
}

function detectCaseCategory(text) {
  const t = text.toLowerCase();
  if (/bail|fir|ipc|crpc|arrest/.test(t)) return "Criminal Law";
  if (/divorce|custody|maintenance|498a/.test(t)) return "Family / Matrimonial";
  if (/property|partition|injunction/.test(t)) return "Civil / Property";
  if (/writ|constitution|article/.test(t)) return "Constitutional / Writ";
  return "General Legal";
}

function saveToTranscript(sender, message) {
  chatTranscript.push({
    sender,
    message,
    time: new Date().toLocaleString()
  });
}
</script>

<!-- ======================================================
     CHATBOT SEND MESSAGE (GEMINI)
======================================================= -->
<script>
async function sendChatMessage() {
  const input = document.getElementById("chat-input");
  const msg = input.value.trim();
  if (!msg) return;

  if (!isLegalQuery(msg)) {
    alert("This assistant is restricted to legal topics only.");
    return;
  }

  saveToTranscript("User", msg);
  detectedCaseCategory = detectCaseCategory(msg);
  document.getElementById("case-category-label").innerText =
    detectedCaseCategory;

  const box = document.getElementById("chat-messages");
  box.innerHTML += `
    <div class="text-right">
      <div class="inline-block bg-gold-600 text-white p-2 rounded">
        ${msg}
      </div>
    </div>`;
  input.value = "";
  box.scrollTop = box.scrollHeight;

  const apiKey = document.getElementById("gemini-key").value;
  const lang = detectLanguage(msg);

  let systemPrompt =
    "You are a legal information assistant for an Indian law firm. " +
    "Only provide general legal information. Never give legal advice. ";

  if (lang === "hi") {
    systemPrompt += "Respond in simple Hindi. ";
  } else if (lang === "hinglish") {
    systemPrompt += "Respond in Hinglish (Hindi + English mix). ";
  } else {
    systemPrompt += "Respond in clear English. ";
  }

  systemPrompt +=
    "Always recommend booking a consultation.\n\nUser: " + msg;

  const response = await fetch(
    "https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=" +
      apiKey,
    {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        contents: [{ parts: [{ text: systemPrompt }] }]
      })
    }
  );

  const data = await response.json();
  const reply =
    data.candidates?.[0]?.content?.parts?.[0]?.text ||
    "Please book a consultation for personalised legal advice.";

  saveToTranscript("AI Assistant", reply);

  box.innerHTML += `
    <div class="bg-navy-800 border border-slate-700 p-3 rounded text-slate-200">
      ${reply.replace(/\n/g, "<br>")}
      <hr class="my-2 border-white/10">
      <a href="#contact" class="text-gold-400 underline text-xs">
        Book a confidential consultation
      </a>
      <p class="text-[10px] text-slate-500 mt-2 italic">
        General legal information only. Not legal advice.
      </p>
    </div>`;
  box.scrollTop = box.scrollHeight;
}

function toggleChatbot() {
  document.getElementById("chatbot").classList.toggle("hidden");
  document.getElementById("chatbot-toggle").classList.toggle("hidden");
}
</script>
<!-- ======================================================
     EMAIL CHAT TRANSCRIPT (FORMFREE)
======================================================= -->
<script>
async function emailTranscript() {
  if (chatTranscript.length === 0) {
    alert("No conversation available to email.");
    return;
  }

  const email = prompt(
    "Enter your email to receive this chat transcript:"
  );
  if (!email) return;

  let formattedTranscript =
    "Case Category: " + detectedCaseCategory + "\n";
  formattedTranscript +=
    "====================================\n\n";

  formattedTranscript += chatTranscript
    .map(entry =>
      `[${entry.time}] ${entry.sender}: ${entry.message}`
    )
    .join("\n\n");

  try {
    const response = await fetch(
      "https://formspree.io/f/myzqwkvv",
      {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          _replyto: email,
          subject:
            "Legal Chat Transcript (" +
            detectedCaseCategory +
            ") – The Justice Firm",
          message: formattedTranscript
        })
      }
    );

    if (response.ok) {
      alert(
        "Transcript sent successfully. Please check your email."
      );
    } else {
      alert(
        "Unable to send transcript. Please try again later."
      );
    }
  } catch (error) {
    alert("Network error. Please try again later.");
  }
}
</script>

<!-- ======================================================
     TRANSCRIPT BUTTON (CHATBOT FOOTER INJECTION)
======================================================= -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const chatFooter = document.querySelector(
    "#chatbot .p-3.border-t"
  );
  if (chatFooter) {
    const btn = document.createElement("button");
    btn.innerText = "Email this conversation";
    btn.className =
      "text-[10px] text-slate-400 hover:text-gold-400 underline mt-2";
    btn.onclick = emailTranscript;
    chatFooter.appendChild(btn);

    const note = document.createElement("p");
    note.className =
      "text-[9px] text-slate-500 italic mt-1";
    note.innerText =
      "Transcript is emailed only on request and not stored by the firm.";
    chatFooter.appendChild(note);
  }
});
</script>

<!-- ======================================================
     ULTRA-PREMIUM DISCLAIMER
======================================================= -->
<section class="py-24 px-6 bg-navy-900/40 border-t border-gold-500/10">
  <div class="max-w-4xl mx-auto text-center">
    <i data-lucide="shield-alert"
       class="mx-auto text-gold-400 w-8 h-8 mb-6"></i>

    <h3 class="text-2xl md:text-3xl font-serif text-white mb-6">
      Professional & Regulatory Disclaimer
    </h3>

    <p class="text-slate-400 text-sm leading-relaxed">
      As per the rules of the Bar Council of India, advocates are
      prohibited from advertising or soliciting work.
      This website is intended solely to provide general
      information about the firm, its areas of practice,
      and legal processes.
      <br><br>
      The AI Legal Assistant provides general legal information
      only and does not constitute legal advice, solicitation,
      or an advocate–client relationship.
      For personalised legal advice, a formal consultation
      with an advocate is required.
    </p>
  </div>
</section>

<!-- ======================================================
     CONTACT SECTION
======================================================= -->
<section id="contact"
         class="py-24 px-6 bg-obsidian border-t border-white/5">
  <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-16">

    <!-- Contact Info -->
    <div>
      <h2 class="text-3xl md:text-4xl font-serif text-white mb-6">
        Contact Chambers
      </h2>
      <p class="text-slate-400 mb-10">
        For confidential consultations and professional
        legal assistance.
      </p>

      <div class="space-y-6 text-slate-400">
        <div class="flex items-start gap-4">
          <i data-lucide="map-pin"
             class="text-gold-400 mt-1"></i>
          <p>Prayagraj (Allahabad), Uttar Pradesh, India</p>
        </div>
        <div class="flex items-start gap-4">
          <i data-lucide="phone"
             class="text-gold-400 mt-1"></i>
          <p>+91 94541 83793</p>
        </div>
        <div class="flex items-start gap-4">
          <i data-lucide="mail"
             class="text-gold-400 mt-1"></i>
          <p>adv.shastri@gmail.com</p>
        </div>
      </div>
    </div>

    <!-- Contact Form -->
    <form
      action="https://formspree.io/f/myzqwkvv"
      method="POST"
      class="bg-navy-900/50 p-8 border border-slate-800 space-y-6">

      <div>
        <label class="block text-xs uppercase text-slate-500 mb-2">
          Full Name
        </label>
        <input name="name" required
               class="w-full bg-obsidian border border-slate-700
                      p-3 text-white">
      </div>

      <div>
        <label class="block text-xs uppercase text-slate-500 mb-2">
          Phone
        </label>
        <input name="phone" required
               class="w-full bg-obsidian border border-slate-700
                      p-3 text-white">
      </div>

      <div>
        <label class="block text-xs uppercase text-slate-500 mb-2">
          Email
        </label>
        <input type="email" name="_replyto" required
               class="w-full bg-obsidian border border-slate-700
                      p-3 text-white">
      </div>

      <div>
        <label class="block text-xs uppercase text-slate-500 mb-2">
          Message
        </label>
        <textarea name="message" rows="4"
                  class="w-full bg-obsidian border border-slate-700
                         p-3 text-white"></textarea>
      </div>

      <button
        class="w-full bg-gold-600 hover:bg-gold-500
               text-white py-4 uppercase tracking-wider">
        Submit Secure Inquiry
      </button>
    </form>
  </div>
</section>

<!-- ======================================================
     FOOTER
======================================================= -->
<footer class="bg-obsidian border-t border-slate-900 py-12 px-6">
  <div class="max-w-7xl mx-auto flex flex-col md:flex-row
              justify-between items-center gap-8 text-sm">

    <div class="text-slate-500">
      © 2024 The Justice Firm. All Rights Reserved.
    </div>

    <div class="flex gap-6 text-slate-500">
      <a href="https://twitter.com/TheJustice96756"
         target="_blank"
         aria-label="Twitter"
         class="hover:text-gold-400">
        <i data-lucide="twitter"></i>
      </a>

      <a href="https://wa.me/919454183793"
         target="_blank"
         aria-label="WhatsApp"
         class="hover:text-gold-400">
        <i data-lucide="message-circle"></i>
      </a>

      <a href="https://www.linkedin.com"
         target="_blank"
         aria-label="LinkedIn"
         class="hover:text-gold-400">
        <i data-lucide="linkedin"></i>
      </a>
    </div>
  </div>
</footer>

<!-- ======================================================
     FLOATING CTAs
======================================================= -->
<div class="fixed bottom-6 left-6 z-50 flex flex-col gap-4">

  <!-- WhatsApp -->
  <a href="https://wa.me/919454183793?text=Hello%20The%20Justice%20Firm%2C%0A%0AI%20would%20like%20to%20request%20a%20confidential%20legal%20consultation.%0A%0ARegards."
     target="_blank"
     aria-label="Chat on WhatsApp"
     class="w-14 h-14 rounded-full bg-[#25D366]
            flex items-center justify-center shadow-2xl">
    <i data-lucide="message-circle" class="text-white"></i>
  </a>

  <!-- Call -->
  <a href="tel:+919454183793"
     aria-label="Call Now"
     class="w-14 h-14 rounded-full bg-gold-600
            flex items-center justify-center shadow-2xl">
    <i data-lucide="phone-call" class="text-white"></i>
  </a>

</div>

<!-- ======================================================
     FINAL INIT
======================================================= -->
<script>
lucide.createIcons();
</script>

</body>
</html>
